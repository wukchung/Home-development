<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Введение - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.acl.html">Zend_Acl</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.acl.html">Zend_Acl</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.acl.refining.html">Настройка управления доступом</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.acl.introduction" class="section"><div class="info"><h1 class="title">Введение</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Acl</span> предоставляет легковесную и гибкую реализацию списка прав
        доступа (<acronym class="acronym">ACL</acronym>) и управления привилегиями. Приложение может использовать
        <acronym class="acronym">ACL</acronym> для контроля доступа одних объектов к другим - защищенным.
    </p>

    <p class="para">
        В рамках данной документации:
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                <em class="emphasis">Ресурс</em> - объект, доступ к
                которому контролируется.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <em class="emphasis">Роль</em> - объект, который
                может запрашивать доступ к ресурсу.
            </p>
        </li>
    </ul>

    <p class="para">
        Говоря проще, <em class="emphasis">роли запрашивают доступ к ресурсам</em>.
        Например, если парковщик запрашивает доступ к автомобилю, то
        парковщик - это роль, а автомобиль - ресурс, поскольку доступ к
        автомобилю не может предоставляться всем без исключения.
    </p>

    <p class="para">
        Благодаря спецификации и использованию списка прав доступа (<acronym class="acronym">ACL</acronym>)
        приложение может контролировать предоставление ролям доступа к ресурсам.
    </p>

    <div class="section" id="zend.acl.introduction.resources" name="zend.acl.introduction.resources"><div class="info"><h1 class="title">Ресурсы</h1></div>
        
        <p class="para">
            Создать ресурс в <span class="classname">Zend_Acl</span> очень просто.
            <span class="classname">Zend_Acl</span> предоставляет
            интерфейс ресурса <span class="classname">Zend_Acl_Resource_Interface</span> для
            облегчения процесса создания ресурса. Этот интерфейс содержит только
            один метод,  <span class="methodname">getResourceId()</span>. Классу достаточно
            реализовывать этот интерфейс для того, чтобы <span class="classname">Zend_Acl</span>
            рассматривал объект этого класса как ресурс. Кроме того, <span class="classname">Zend_Acl</span>
            предоставляет <span class="classname">Zend_Acl_Resource</span> в качестве базового
            класса, который разработчики могут расширять по желанию.
        </p>

        <p class="para">
            <span class="classname">Zend_Acl</span> предоставляет древовидную структуру, в которую могут
            добавляться различные ресурсы. В этой структуре они могут быть
            организованы от общих (корень дерева) к специфическим
            (листья дерева). При запросах к определенным ресурсам в иерархии
            будет выполнен автоматический поиск правил, относящихся
            к ресурсам-предкам, учитывающий простое наследование правил.
            Например, если некое общее
            правило должно действовать в каждом здании города, то проще
            прикрепить его к городу, чем крепить к каждому зданию в городе.
            Однако, для некоторых зданий могут потребоваться исключения из этого
            правила, в <span class="classname">Zend_Acl</span> это достигается путем закрепления исключений
            за каждым зданием, требующим исключений из правила.
            Ресурс может наследовать только от одного родительского ресурса,
            однако сам родительский ресурс может,
            в свою очередь, наследовать от другого родительского ресурса и т.д.
        </p>

        <p class="para">
            <span class="classname">Zend_Acl</span> также поддерживает права доступа к ресурсам (например,
            &quot;создание&quot;, &quot;чтение&quot;, &quot;обновление&quot;, &quot;удаление&quot;),
            разработчик может присваивать правила, которые будут влиять на все
            или определенные права доступа к ресурсу.
        </p>
    </div>

    <div class="section" id="zend.acl.introduction.roles" name="zend.acl.introduction.roles"><div class="info"><h1 class="title">Роли</h1></div>
        
        <p class="para">
            Как и в случае с ресурсами, создавать роль тоже очень просто.
            Все роли должны реализовывать интерфейс
            <span class="classname">Zend_Acl_Role_Interface</span>. Этот интерфейс содержит
            единственный метод  <span class="methodname">getRoleId()</span>. Кроме того,
            <span class="classname">Zend_Acl</span>
            предоставляет <span class="classname">Zend_Acl_Role</span> в качестве базового класса,
            который разработчики могут расширять по желанию.
        </p>

        <p class="para">
            В <span class="classname">Zend_Acl</span> роль может наследовать от одной или от нескольких
            ролей. Это реализовано для поддержки
            наследования правил между ролями. Например, пользовательская роль,
            такая как &quot;Салли&quot;, может принадлежать одной или нескольким
            родительским ролям, таким как &quot;редактор&quot; и &quot;администратор&quot;.
            Разработчик может привязывать правила к &quot;редактору&quot; и
            &quot;администратору&quot; раздельно, и &quot;Салли&quot; будет наследовать правила
            обоих ролей. Нет необходимости привязывать правила непосредственно
            к &quot;Салли&quot;.
        </p>

        <p class="para">
            Хотя множественное наследование ролей - очень полезная возможность,
            она также усложняет разработку. Следующий пример демонстрирует
            неопределенное условие и показывает, как <span class="classname">Zend_Acl</span> решает эту
            проблему.
        </p>

        <div class="example"><div class="info"><p><b>Example #1 Множественное наследование ролей</b></p></div>
            
            <div class="example-contents"><p>
                Следующий код определяет три базовые роли:
                &quot;guest&quot;, &quot;member&quot; и
                &quot;admin&quot;, от которых будут наследовать другие роли.
                Далее создается &quot;someUser&quot;, он наследует от этих
                только что созданных трех ролей. Порядок, в котором эти роли
                появляются в массиве <var class="varname">$parents</var>,
                важен. При необходимости <span class="classname">Zend_Acl</span> ищет правила доступа не
                только для запрашиваемых ролей (в нашем случае,
                &quot;someUser&quot;), но и для ролей, от которых
                запрашиваемая роль унаследована
                (в нашем примере, &quot;guest&quot;, &quot;member&quot; и
                &quot;admin&quot;):
            </p></div>
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Acl<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'guest'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; -&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'member'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; -&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'admin'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$parents</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'guest'</span>, <span style="color: #ff0000;">'member'</span>, <span style="color: #ff0000;">'admin'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'someUser'</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #0000ff;">$parents</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">add</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Resource<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'someResource'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">deny</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'guest'</span>, <span style="color: #ff0000;">'someResource'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">allow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'member'</span>, <span style="color: #ff0000;">'someResource'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'someUser'</span>, <span style="color: #ff0000;">'someResource'</span><span style="color: #66cc66;">&#41;</span> ? <span style="color: #ff0000;">'разрешен'</span> : <span style="color: #ff0000;">'запрещен'</span>;</div></li></ol></div></div></div>

            <div class="example-contents"><p>
                Поскольку нет правил, определенных специально для роли
                &quot;someUser&quot; и ресурса
                &quot;someResource&quot;, то <span class="classname">Zend_Acl</span> должен производить
                поиск правил, которые могут быть определены для ролей,
                от которых &quot;someUser&quot; наследуется. Сперва
                проверяется роль &quot;admin&quot;, и обнаруживается, что
                для нее не определены правила доступа. Затем проверяется роль
                &quot;member&quot;, и <span class="classname">Zend_Acl</span> обнаруживает, что есть правило
                разрешающее доступ для &quot;member&quot; к
                &quot;someResource&quot;.
            </p></div>
            <div class="example-contents"><p>
                Если бы <span class="classname">Zend_Acl</span> продолжил поиск правил, определенных для
                родительских ролей, то обнаружил бы, что для
                &quot;guest&quot; запрещен доступ к
                &quot;someResource&quot;. Это пример показывает противоречие,
                так как теперь для &quot;someUser&quot; доступ к
                &quot;someResource&quot; разрешен и запрещен одновременно.
                Конфликт произошел по причине наследования от нескольких ролей.
            </p></div>
            <div class="example-contents"><p>
                <span class="classname">Zend_Acl</span> решает эту неоднозначность, завершая запрос, как
                только находит первое правило, которое может быть применено к запросу.
                В этом случае, если роль &quot;member&quot;
                проверяется раньше, чем роль &quot;guest&quot;, то
                данный пример выведет &quot;разрешен&quot;.
            </p></div>
        </div>
        <blockquote><p><b class="note">Note</b>: 
            
                При определении нескольких родительских ролей, не
                забывайте, что последний указанный родитель
                будет первым в списке поиска правил для запроса авторизации.
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.acl.introduction.creating" name="zend.acl.introduction.creating"><div class="info"><h1 class="title">Создание списка контроля доступа (ACL)</h1></div>
        

        <p class="para">
            Список контроля доступа (<acronym class="acronym">ACL</acronym>) может представлять собой любое
            множество физических или виртуальных объектов. В целях
            демонстрации, мы создадим базовый
            функционал <acronym class="acronym">ACL</acronym> для системы управления содержимым
            (<acronym class="acronym">CMS</acronym>), который будет поддерживать нескольких уровней групп к
            множеству областей. Чтобы создать новый объект <acronym class="acronym">ACL</acronym>, производим
            инстанцирование <acronym class="acronym">ACL</acronym> без параметров:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Acl<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: 
            
                До тех пор, пока разработчик не определит какое-либо правило,
                разрешающее доступ, <span class="classname">Zend_Acl</span> отказывает всем ролям в доступе
                ко всем привилегиям на все ресурсы.
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.acl.introduction.role_registry" name="zend.acl.introduction.role_registry"><div class="info"><h1 class="title">Регистрация ролей</h1></div>
        

        <p class="para">
            <acronym class="acronym">CMS</acronym> почти всегда нуждаются в иерархии
            доступа для определения авторских возможностей своих пользователей.
            Это может быть группа &quot;Гость&quot;,
            предоставляющая ограниченный доступ для демонстрации, группа
            &quot;Сотрудник&quot; - группа большинства пользователей <acronym class="acronym">CMS</acronym>,
            которые производят каждодневные операции, группа &quot;Редактор&quot; - для
            тех кто публикует и редактирует, архивирует и удаляет контент, и,
            наконец, группа &quot;Администратор&quot;, участники которой могут выполнять
            все операции, которые доступны участникам других групп, а также
            управлять закрытой информацией, пользователями,
            конфигурацией адинистративной части, делать резервное
            копирование данных и их экспорт.
            Этот набор прав доступа может быть представлен в реестре ролей,
            позволяя каждой группе наследовать привилегии
            родительской группы, при этом имея индивидуальные права доступа.
            Права доступа могут быть изображены в следующем виде:
        </p>

        <table class="doctable table"><div class="info"><caption><b>Контроль за доступом для демонстрационной CMS</b></caption></div>
          
          
            <thead valign="middle">
              <tr valign="middle">
                <th>Название</th>
                <th>Индивидуальные права</th>
                <th>Права, унаследованные от</th>
              </tr>

            </thead>


            <tbody valign="middle" class="tbody">
              <tr valign="middle">
                <td align="left">Гость (guest)</td>
                <td align="left">Просмотр (view)</td>
                <td align="left">Не определено</td>
              </tr>


              <tr valign="middle">
                <td align="left">Сотрудник (staff)</td>
                <td align="left">Редактирование (edit), предложение на публикацию (submit), исправление
                (revise)</td>
                <td align="left">Гость</td>
              </tr>


              <tr valign="middle">
                <td align="left">Редактор (editor)</td>
                <td align="left">Публикация (publish), архивирование (archive), удаление (delete)</td>
                <td align="left">Сотрудник</td>
              </tr>


              <tr valign="middle">
                <td align="left">Администратор (administrator)</td>
                <td align="left">(Обладает всеми правами)</td>
                <td align="left">Не определено</td>
              </tr>

            </tbody>
          
        </table>


        <p class="para">
            Для этого примера мы используем <span class="classname">Zend_Acl_Role</span>, но можно
            было бы использовать любой другой класс,
            реализующий интерфейс <span class="classname">Zend_Acl_Role_Interface</span>.
            Эти группы могут быть добавлены в реестр ролей
            следующим образом:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Acl<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Добавление групп в реестр ролей с использованием Zend_Acl_Role</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Гость не наследует управление доступом</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$roleGuest</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'guest'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$roleGuest</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Сотрудник наследует от гостя</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'staff'</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #0000ff;">$roleGuest</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">/*</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">Делает то же самое, что и</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">$acl-&gt;addRole(new Zend_Acl_Role('staff'), 'guest');</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">*/</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Редактор наследует от сотрудника</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'editor'</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #ff0000;">'staff'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Администатор не наследует управление доступом</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'administrator'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    </div>

    <div class="section" id="zend.acl.introduction.defining" name="zend.acl.introduction.defining"><div class="info"><h1 class="title">Определение контроля доступа</h1></div>
        

        <p class="para">
            Теперь, когда <acronym class="acronym">ACL</acronym> содержит все необходимые роли, можно определить
            правила, по которым роли будут иметь доступ к ресурсам. Вы, должно
            быть, заметили, что мы не определили ни одного отдельного ресурса
            для этого примера, это упрощает демонстрацию того, что правила
            применяются ко всем ресурсам. <span class="classname">Zend_Acl</span> предоставляет реализацию,
            посредством которой правила должны передаваться
            от общих к специфическим, минимизируя таким образом количество
            необходимых правил, так как
            ресурсы и роли наследуют правила, которые определены для их предков.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                В целом, <span class="classname">Zend_Acl</span> подчиняется правилу, только если более
                точное правило не применимо.
            <br />
        </p></blockquote>

        <p class="para">
            В результате мы можем определить умеренно сложный набор правил
            минимальным кодом. Чтобы определить базовые права доступа, описанные
            выше:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">&lt;?php</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">require_once</span> <span style="color: #ff0000;">'Zend/Acl.php'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Acl<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">require_once</span> <span style="color: #ff0000;">'Zend/Acl/Role.php'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$roleGuest</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'guest'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$roleGuest</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'staff'</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #0000ff;">$roleGuest</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'editor'</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #ff0000;">'staff'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">addRole</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Acl_Role<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'administrator'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Гость может только просматривать контент</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">allow</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$roleGuest</span>, <span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #ff0000;">'view'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">/* другим способом, предыдущий блок кода может быть записан в таком виде:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">$acl-&gt;allow('guest', null, 'view');</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//*/</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Сотрудник наследует привилегии просмотра у Гостя,</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// но также нуждается в дополнительных привилегиях</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">allow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'staff'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'edit'</span>, <span style="color: #ff0000;">'submit'</span>, <span style="color: #ff0000;">'revise'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Редактор наследует привилегии просмотра, редактирования,</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// отправки и исправлений у Посетителя</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// но также нуждается в дополнительных привилегиях</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">allow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'editor'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'publish'</span>, <span style="color: #ff0000;">'archive'</span>, <span style="color: #ff0000;">'delete'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Администратор не наследует ничего, но обладает всеми привилегиями</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">allow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'administrator'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Значение <b><tt>NULL</tt></b> в вызовах
             <span class="methodname">allow()</span> в этом примере используется для
            указания того, что правила, предоставляющие доступ,
            действительны для всех ресурсов.
        </p>

    </div>

    <div class="section" id="zend.acl.introduction.querying" name="zend.acl.introduction.querying"><div class="info"><h1 class="title">Запросы к ACL</h1></div>
        

        <p class="para">
            Теперь у нас есть гибкий <acronym class="acronym">ACL</acronym>, который может использоваться для
            определения того, достаточно ли прав имеет запрашивающий, чтобы
            производить действия в веб-приложении. Используя метод
             <span class="methodname">isAllowed()</span>, производить запросы довольно просто:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'guest'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #ff0000;">'view'</span><span style="color: #66cc66;">&#41;</span> ?</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">&quot;разрешен&quot;</span> : <span style="color: #ff0000;">&quot;запрещен&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// разрешен</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'staff'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #ff0000;">'publish'</span><span style="color: #66cc66;">&#41;</span> ?</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">&quot;разрешен&quot;</span> : <span style="color: #ff0000;">&quot;запрещен&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// запрещен</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'staff'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #ff0000;">'revise'</span><span style="color: #66cc66;">&#41;</span> ?</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">&quot;разрешен&quot;</span> : <span style="color: #ff0000;">&quot;запрещен&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// разрешен</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'editor'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #ff0000;">'view'</span><span style="color: #66cc66;">&#41;</span> ?</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">&quot;разрешен&quot;</span> : <span style="color: #ff0000;">&quot;запрещен&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// разрешен потому, что редактор наследует от гостя</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'editor'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #ff0000;">'update'</span><span style="color: #66cc66;">&#41;</span> ?</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">&quot;разрешен&quot;</span> : <span style="color: #ff0000;">&quot;запрещен&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// запрещен потому, что нет правила, разрешающего обновление (update)</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'administrator'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #ff0000;">'view'</span><span style="color: #66cc66;">&#41;</span> ?</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">&quot;разрешен&quot;</span> : <span style="color: #ff0000;">&quot;запрещен&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// разрешен потому, что администратор обладает всеми привилегиями</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'administrator'</span><span style="color: #66cc66;">&#41;</span> ?</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">&quot;разрешен&quot;</span> : <span style="color: #ff0000;">&quot;запрещен&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// разрешен потому, что администратор обладает всеми привилегиями</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$acl</span>-&gt;<span style="color: #006600;">isAllowed</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'administrator'</span>, <span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #ff0000;">'update'</span><span style="color: #66cc66;">&#41;</span> ?</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">&quot;разрешен&quot;</span> : <span style="color: #ff0000;">&quot;запрещен&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// разрешен потому, что администратор обладает всеми привилегиями</span></div></li></ol></div></div></div>

    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.acl.html">Zend_Acl</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.acl.html">Zend_Acl</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.acl.refining.html">Настройка управления доступом</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.acl.html">Zend_Acl</a></li>
  <li class="active"><a href="zend.acl.introduction.html">Введение</a></li>
  <li><a href="zend.acl.refining.html">Настройка управления доступом</a></li>
  <li><a href="zend.acl.advanced.html">Расширенное использование</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>