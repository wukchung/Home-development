<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Utiliser Zend_Layout - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="learning.layout.intro.html">Introduction</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="learning.layout.html">Getting Started with Zend_Layout</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="learning.layout.conclusions.html">Zend_Layout: Conclusions</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="learning.layout.usage" class="section"><div class="info"><h1 class="title">Utiliser Zend_Layout</h1></div>
    

    <p class="para">
        L&#039;utilisation classique de <span class="classname">Zend_Layout</span> est simple. En supposant
        que vous utilisez <span class="classname">Zend_Application</span>, il suffit simplement de
        passer des options de configuration et créer un script de layout.
    </p>

    <div class="section" id="learning.layout.usage.configuration" name="learning.layout.usage.configuration"><div class="info"><h1 class="title">Layout Configuration</h1></div>
        

        <p class="para">
            L&#039;endroit recommandé pour stocker les layouts est
            &quot;<var class="filename">layouts/scripts/</var>&quot; dans l&#039;application:
        </p>

        <div class="programlisting text"><div class="textcode"><div class="text" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">application</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">|-- Bootstrap.php</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">|-- configs</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">|&nbsp; &nbsp;`-- application.ini</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">|-- controllers</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">|-- layouts</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">|&nbsp; &nbsp;`-- scripts</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">|&nbsp; &nbsp; &nbsp; &nbsp;|-- layout.phtml</div></li></ol></div></div></div>


        <p class="para">
            Pour initialiser <span class="classname">Zend_Layout</span>, ajouter ceci à votre fichier
            de configuration (&quot;<var class="filename">application/configs/application.ini</var>&quot;):
        </p>

        <div class="programlisting dosini"><div class="dosinicode"><div style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">resources.layout.layoutPath = APPLICATION_PATH &quot;/layouts/scripts&quot;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">resources.layout.layout = &quot;layout&quot;</div></li></ol></div></div></div>


        <p class="para">
            La première ligne indique où chercher les scripts de layout; la seconde donne le
            nom du script à utiliser (l&#039;extension est supposée &quot;<var class="filename">.phtml</var>&quot;
            par défaut).
        </p>
    </div>

    <div class="section" id="learning.layout.usage.layout-script" name="learning.layout.usage.layout-script"><div class="info"><h1 class="title">Créer un script de layout</h1></div>
        

        <p class="para">
            Il convient maintenant de créer un script de layout. D&#039;abord, vérifiez l&#039;existance du
            dossier &quot;<var class="filename">application/layouts/scripts</var>&quot;; puis ouvrez un éditeur et
            créez une mise en page balisée. Les scripts de layout sont des scripts de vue, avec
            quelques différences tout de même.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;html&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;head&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &lt;title&gt;My Site&lt;/title&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;/head&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;body&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">&lt;?php</span> <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">layout</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>-&gt;<span style="color: #006600;">content</span> <span style="color: #000000; font-weight: bold;">?&gt;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;/body&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;/html&gt;</div></li></ol></div></div></div>


        <p class="para">
            Dans l&#039;exemple ci-dessus, un appel à l&#039;aide de vue  <span class="methodname">layout()</span> y
            est effectué. Lorsque vous activez l&#039;instance de <span class="classname">Zend_Layout</span>,
            vous avez aussi accès à une aide d&#039;acion et de vue qui permettent d&#039;accéder à l&#039;instance
            de <span class="classname">Zend_Layout</span>; et vous pouvez ainsi appeler des méthodes
            sur l&#039;objet layout. Dans notre cas, nous récupérons une variable appelée
            <var class="varname">$content</var>, et nous l&#039;affichons. Par défaut, <var class="varname">$content</var>
            est peuplée du contenu de la vue rendue pour l&#039;action en cours. Sinon, tout ce que vous
            feriez dans un script de vue est valide dans un script de layout: appel d&#039;aides ou
            de méthodes sur la vue.
        </p>

        <p class="para">
            Maintenant, nous avons un script de layout fonctionnel et notre application sait où le
            trouver.
        </p>
    </div>

    <div class="section" id="learning.layout.usage.access" name="learning.layout.usage.access"><div class="info"><h1 class="title">Accéder à l&#039;objet Layout</h1></div>
        

        <p class="para">
            Il est probable que vous ayez besoin d&#039;accéder à l&#039;objet instance layout. Cela est
            possible de trois manières:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <em class="emphasis">Dans des scripts de vue:</em> utilisez l&#039;aide de vue
                     <span class="methodname">layout()</span>, qui retourne l&#039;instance de
                    <span class="classname">Zend_Layout</span> enregistrée au moyen du plugin MVC.
                </p>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">&lt;?php</span> <span style="color: #0000ff;">$layout</span> = <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">layout</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>; <span style="color: #000000; font-weight: bold;">?&gt;</span></div></li></ol></div></div></div>


                <p class="para">
                    Comme cela retourne l&#039;objet de layout, vous pouvez appeler dessus toute méthode
                    ou assigner des variables.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">Dans vos contrôleurs:</em> utilisez ici l&#039;aide d&#039;action
                     <span class="methodname">layout()</span>, qui agit comme l&#039;aide de vue.
                </p>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Appel de l'aide comme méthode sur le gestionnaire d'aides:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span> = <span style="color: #0000ff;">$this</span>-&gt;_helper-&gt;<span style="color: #006600;">layout</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Ou, de manière plus détaillée:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$helper</span> = <span style="color: #0000ff;">$this</span>-&gt;_helper-&gt;<span style="color: #006600;">getHelper</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Layout'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span> = <span style="color: #0000ff;">$helper</span>-&gt;<span style="color: #006600;">getLayoutInstance</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


                <p class="para">
                    Comme avec l&#039;aide de vue, vous pouvez appeler dès lors n&#039;importe quelle
                    méthode de layout ou lui assigner des variables.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">Ailleurs: </em> utilisez la méthode statique
                     <span class="methodname">getMvcInstance()</span>. Cette méthode retourne l&#039;instance
                    de layout comme déja vu plus haut maintenant.
                </p>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span> = Zend_Layout::<span style="color: #006600;">getMvcInstance</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">Via le bootstrap: </em> utilisez la ressource layout qui
                    crée, configure et retourne l&#039;objet <span class="classname">Zend_Layout</span>.
                </p>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span> = <span style="color: #0000ff;">$bootstrap</span>-&gt;<span style="color: #006600;">getResource</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Layout'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


                <p class="para">
                    Partout où vous avez accès à l&#039;objet bootstrap, il s&#039;agit de la méthode
                    recommandée par rapport à  <span class="methodname">getMvcInstance()</span>.
                </p>
            </li>
        </ul>
    </div>

    <div class="section" id="learning.layout.usage.other-operations" name="learning.layout.usage.other-operations"><div class="info"><h1 class="title">Autres opérations</h1></div>
        

        <p class="para">
            Dans la plupart des cas, le script de configuration de layout ci-dessus (avec quelques
            modifications) répondra à vos besoins. Cependant, dans certains cas il peut être
            intéressant d&#039;utiliser d&#039;autres fonctionnalités. Dans les exemples qui suivent,
            vous allez utiliser une des<a href="learning.layout.usage.html#learning.layout.usage.access" class="link">méthodes listées ci-dessus</a> pour
            récupérer l&#039;objet layout.
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <em class="emphasis">Affecter les variables de layout</em>.
                    <span class="classname">Zend_Layout</span> garde en mémoire les variables de vue
                    spécifiques à la layout, la clé <var class="varname">$content</var> en est un
                    exemple. Vous pouvez assigner et récupérer ces variables grâce à la méthode
                     <span class="methodname">assign()</span> ou en y accédant comme des attributs
                    classiques.
                </p>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Affecter du contenu:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span>-&gt;<span style="color: #006600;">somekey</span> = <span style="color: #ff0000;">&quot;foo&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Afficher ce même contenu:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$layout</span>-&gt;<span style="color: #006600;">somekey</span>; <span style="color: #808080; font-style: italic;">// 'foo'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utiliser la méthode assign() :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span>-&gt;<span style="color: #006600;">assign</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'someotherkey'</span>, <span style="color: #ff0000;">'bar'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Accéder à la variable reste identique:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$layout</span>-&gt;<span style="color: #006600;">someotherkey</span>; <span style="color: #808080; font-style: italic;">// 'bar'</span></div></li></ol></div></div></div>

            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">disableLayout()</span>. Occasionellement, vous pouriez vouloir
                    d&quot;sactiver totalement les layouts, par exemple, pour répondre à une requête AJAX
                    ou autravers d&#039;une API RESTful. Dans ces cas, appelez la méthode
                     <span class="methodname">disableLayout()</span> de l&#039;objet layout.
                </p>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span>-&gt;<span style="color: #006600;">disableLayout</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


                <p class="para">
                    Le contraire de cette méthode,  <span class="methodname">enableLayout()</span>, permet
                    de ré-activer le rendu des layouts pour l&#039;action en cours.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">Utiliser un autre script de layout</em>: Si vous avez plusieurs scripts
                    de layout pour votre application, vous pouvez selectionner lequel rendre grâce à la
                    méthode  <span class="methodname">setLayout()</span>. Précisez alors le nom du script de layout,
                    sans l&#039;extension.
                </p>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utiliser le script de layout &quot;alternate.phtml&quot;:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span>-&gt;<span style="color: #006600;">setLayout</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'alternate'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


                <p class="para">
                    Le script de layout doit se trouver dans le <var class="varname">$layoutPath</var> précisé via
                    la configuration (en bootstrap générallement). <span class="classname">Zend_Layout</span>
                    utilisera le nouveau script à rendre.
                </p>
            </li>
        </ul>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="learning.layout.intro.html">Introduction</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="learning.layout.html">Getting Started with Zend_Layout</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="learning.layout.conclusions.html">Zend_Layout: Conclusions</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="learning.html">Learning Zend Framework</a></li>
  <li class="header up"><a href="learning.layout.html">Getting Started with Zend_Layout</a></li>
  <li><a href="learning.layout.intro.html">Introduction</a></li>
  <li class="active"><a href="learning.layout.usage.html">Utiliser Zend_Layout</a></li>
  <li><a href="learning.layout.conclusions.html">Zend_Layout: Conclusions</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>