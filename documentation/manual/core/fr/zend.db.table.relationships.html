<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Relations Zend_Db_Table - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.db.table.rowset.html">Zend_Db_Table_Rowset</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.db.html">Zend_Db</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.db.table.definition.html">Zend_Db_Table_Definition</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.db.table.relationships" class="section"><div class="info"><h1 class="title">Relations Zend_Db_Table</h1></div>
    

    <div class="section" id="zend.db.table.relationships.introduction" name="zend.db.table.relationships.introduction"><div class="info"><h1 class="title">Introduction</h1></div>
        

        <p class="para">
            Les tables possèdent des relations entre elles, dans une base de données
            relationnelle. Une entité d&#039;une table peut être liée à une autre entité d&#039;une autre
            table, via un procédé appelé contrainte d&#039;intégrité référentielle
        </p>

        <p class="para">
            La classe <span class="classname">Zend_Db_Table_Row</span> possède des méthodes pour
            récupérer des enregistrement dans d&#039;autres tables, liées à celle en cours.
        </p>
    </div>

    <div class="section" id="zend.db.table.relationships.defining" name="zend.db.table.relationships.defining"><div class="info"><h1 class="title">Définir ses relations</h1></div>
        

        <p class="para">
            Chaque table doit avoir sa classe étendant
            <span class="classname">Zend_Db_Table_Abstract</span>, comme décrit dans <a href="zend.db.table.html#zend.db.table.defining" class="xref">D&eacute;finir une classe de Table</a>. Voyez aussi <a href="zend.db.adapter.html#zend.db.adapter.example-database" class="xref">La base de donn&eacute;es d'exemple</a> pour une description de la base de donnée
            qui servira d&#039;exemple pour la suite de ce chapitre.
        </p>

        <p class="para">Voici les classes correspondantes à ces tables :</p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> Accounts <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_name</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #ff0000;">'accounts'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_dependentTables</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Bugs'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> Products <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_name</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #ff0000;">'products'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_dependentTables</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'BugsProducts'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> Bugs <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_name</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #ff0000;">'bugs'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_dependentTables</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'BugsProducts'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_referenceMap</span>&nbsp; &nbsp; = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Reporter'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'reported_by'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Accounts'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'account_name'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Engineer'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'assigned_to'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Accounts'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'account_name'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Verifier'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'verified_by'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Accounts'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'account_name'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> BugsProducts <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_name</span> = <span style="color: #ff0000;">'bugs_products'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_referenceMap</span>&nbsp; &nbsp; = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Bug'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_id'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Bugs'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_id'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Product'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'product_id'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Products'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'product_id'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
            Si vous utilisez <span class="classname">Zend_Db_Table</span> pour émuler les cascades
            <b><tt>UPDATE</tt></b> et <b><tt>DELETE</tt></b>, alors déclarez
            <var class="varname">$_dependentTables</var> en tant que tableau dans la classe des tables parentes.
            Listez ainsi le nom de chaque table dépendante. Utilisez bien le nom des classes, et non
            les noms physiques des tables.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Si votre SGBD implémente le mécanisme des cascades, alors vous n&#039;avez pas
                besoin de déclarer <var class="varname">$_dependentTables</var>. Voyez <a href="zend.db.table.relationships.html#zend.db.table.relationships.cascading" class="xref">Op&eacute;rations d'&eacute;critures en cascade</a> pour plus d&#039;informations.
            <br />
        </p></blockquote>

        <p class="para">
            Déclarez un tableau <var class="varname">$_referenceMap</var> dans les classes de chaque table
            dépendante (qui &quot;reçoit une clé&quot;). C&#039;est un tableau associatif, dit de &quot;rôles&quot;. Un rôle
            définit quelle table est parente dans la relation, et quelle est sa colonne de
            parenté.
        </p>

        <p class="para">
            Le rôle est utilisé comme index du tableau <var class="varname">$_referenceMap</var>. Il est
            utilisé pour définir la relation, et pourra faire partie du nom de certaines méthodes,
            comme nous le verrons plus tard. Choisissez ainsi un nom de rôle de manière
            intelligente.
        </p>

        <p class="para">
            Dans l&#039;exemple du dessus, les rôles dans la classe Bugs sont :
            <code class="code">&quot;Reporter&quot;</code>, <code class="code">&quot;Engineer&quot;</code>, <code class="code">&quot;Verifier&quot;</code> et
            <code class="code">&quot;Product&quot;</code>.
        </p>

        <p class="para">
            La valeur de chaque rôle dans le tableau <var class="varname">$_referenceMap</var> est aussi un
            tableau associatif. Les éléments de chaque rôle sont décrits ci-après.
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <em class="emphasis">columns</em> =&gt; une chaîne de caractères ou un tableau
                    de chaînes désignant le(s) nom(s) des clés étrangères dans la table dépendante
                    (la table actuelle donc).
                </p>

                <p class="para">
                    Il est courant qu&#039;il s&#039;agisse d&#039;une seule colonne, mais on peut rencontrer
                    le cas de clés composées de multiples colonnes.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">refTableClass</em> =&gt; désigne la classe de la table
                    parente, liée à cette colonne. Utilisez le nom de la classe et non le nom de la
                    table physique.
                </p>

                <p class="para">
                    Il est courant qu&#039;une table dépendante n&#039;ait qu&#039;une seule référence d&#039;une
                    même table parente. Cependant certaines tables peuvent avoir plusieurs
                    références vers une même table parente. Dans notre base de données d&#039;exemple,
                    c&#039;est le cas avec la table <code class="code">bugs</code>. Elle possède soit une et une seule
                    colonne référençant la table parente <code class="code">products</code>, mais elle possède
                    trois références (donc trois colonnes) vers la table parente
                    <code class="code">accounts</code>. Chaque référence doit être matérialisée par un rôle
                    unique dans le tableau <var class="varname">$_referenceMap</var>.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">refColumns</em> =&gt; c&#039;est une chaîne de caractères ou un
                    tableau de chaînes nommant la(es) colonne(s) (clé primaire) de la table
                    parente.
                </p>

                <p class="para">
                    Si vous devez utiliser de multiples colonnes parentes pour une seule clé,
                    alors veillez à bien les entrer dans <code class="code">&#039;columns&#039;</code> dans le même ordre
                    que dans <code class="code">&#039;refColumns&#039;</code>.
                </p>

                <p class="para">
                    Il est optionnel de spécifier la <code class="code">refColumns</code>. La clé primaire
                    est utilisée par défaut comme colonne parente dans une relation.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">onDelete</em> =&gt; le nom de l&#039;action à exécuter si un
                    enregistrement est supprimé de la table parente. Voyez <a href="zend.db.table.relationships.html#zend.db.table.relationships.cascading" class="xref">Op&eacute;rations d'&eacute;critures en cascade</a> pour plus
                    d&#039;informations.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">onUpdate</em> =&gt; le nom de l&#039;action à exécuter si un
                    enregistrement est mis à jour dans la table parente. Voyez<a href="zend.db.table.relationships.html#zend.db.table.relationships.cascading" class="xref">Op&eacute;rations d'&eacute;critures en cascade</a> pour plus
                    d&#039;informations.
                </p>
            </li>
        </ul>
    </div>

    <div class="section" id="zend.db.table.relationships.fetching.dependent" name="zend.db.table.relationships.fetching.dependent"><div class="info"><h1 class="title">Récupérer des enregistrements dépendants (enfants)</h1></div>
        

        <p class="para">
            Si vous possédez un enregistrement actif (<code class="code">Row</code>), il est possible de
            récupérer ses enfants dépendants, si les dépendances ont été déclarées suivant la
            procédure ci-dessus. Utilisez la méthode :
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$row</span>-&gt;<span style="color: #006600;">findDependentRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$table</span>, <span style="color: #66cc66;">&#91;</span><span style="color: #0000ff;">$rule</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Cette méthode retourne un objet instance de
            <span class="classname">Zend_Db_Table_Rowset_Abstract</span>, qui contient tous les
            enregistrements (<code class="code">Row</code>) de la table dépendante <var class="varname">$table</var> faisant
            référence à l&#039;enregistrement actif actuel <var class="varname">$row</var>.
        </p>

        <p class="para">
            Le paramètre <var class="varname">$table</var> désigne la table dépendante à utiliser. Ceci peut
            être une chaîne de caractères aussi bien qu&#039;un objet de la classe de cette table.
        </p>

        <div class="example"><div class="info"><p><b>Example #1 Récupérer des enregistrements dépendants</b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple montre comment obtenir un enregistrement actif (objet
                <code class="code">Row</code>) de la table <code class="code">Accounts</code>, et comment en récupérer les
                enfants dépendants de la table <code class="code">Bugs</code>. (les bugs reportés par ce
                compte)
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsTable</span>&nbsp; &nbsp; &nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Accounts<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsRowset</span>&nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$user1234</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$accountsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsReportedByUser</span> = <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findDependentRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Bugs'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Le second paramètre <var class="varname">$rule</var> est optionnel. Il s&#039;agit du nom du rôle à
            utiliser depuis le tableau <var class="varname">$_referenceMap</var> de la classe de la table
            dépendante. Si vous ne le spécifiez pas, le premier rôle sera utilisé. Il n&#039;y a dans la
            majorité des cas qu&#039;un seul rôle.
        </p>

        <p class="para">
            Dans l&#039;exemple ci dessus, nous ne fournissons pas de nom de rôle, le premier est
            donc pris en considération, et il s&#039;agit de <code class="code">&quot;Reporter&quot;</code>.
        </p>

        <div class="example"><div class="info"><p><b>Example #2 Récupérer des enregistrements dépendants avec un rôle spécifique</b></p></div>
            

            <div class="example-contents"><p>
                Dans cet exemple nous montrons comment obtenir un enregistrement
                (<code class="code">Row</code>) depuis la table <code class="code">Accounts</code>, et comment trouver les
                <code class="code">Bugs</code> assignés à ce compte (<code class="code">Account</code>). Nous devrons alors
                nommer le rôle <code class="code">&quot;Engineer&quot;</code>.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsTable</span>&nbsp; &nbsp; &nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Accounts<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsRowset</span>&nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$user1234</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$accountsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsAssignedToUser</span> = <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findDependentRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Bugs'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'Engineer'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Vous pouvez rajouter des critères à vos relations, comme l&#039;ordre ou la limite,
            ceci en utilisant l&#039;objet <code class="code">select</code> de l&#039;enregistrement parent.
        </p>

        <p class="para">
            <div class="example"><div class="info"><p><b>Example #3 
                        Récupérer des enregistrements dépendants en utilisant un objet
                        Zend_Db_Table_Select
                    </b></p></div>
                    

                <div class="example-contents"><p>
                    Dans cet exemple nous montrons comment obtenir un enregistrement
                    (<code class="code">Row</code>) depuis la table <code class="code">Accounts</code>, et comment trouver les
                    <code class="code">Bugs</code> assignés à ce compte (<code class="code">Account</code>), mais limités
                    seulement à trois enregistrements, et ordonnés par nom. Nous devrons nommer le
                    rôle <code class="code">&quot;Engineer&quot;</code>.
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsTable</span>&nbsp; &nbsp; &nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Accounts<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsRowset</span>&nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$user1234</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$accountsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$select</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">select</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>-&gt;<span style="color: #006600;">order</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'name ASC'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;<span style="color: #006600;">limit</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsAssignedToUser</span> = <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findDependentRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Bugs'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'Engineer'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">$select</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>Vous pouvez récupérer les enregistrements dépendants d&#039;une autre manière.
        En utilisant les &quot;méthodes magiques&quot;. En effet,
        <span class="classname">Zend_Db_Table_Row_Abstract</span> va utiliser la méthode
         <span class="methodname">findDependentRowset(&#039;&lt;TableClass&gt;&#039;, &#039;&lt;Rule&gt;&#039;)</span> si vous appelez
            sur l&#039;enregistrement une méthode correspondante à un de ces motifs :
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para"><code class="code">$row-&gt;find&lt;TableClass&gt;()</code></p>
            </li>

            <li class="listitem">
                <p class="para"><code class="code">$row-&gt;find&lt;TableClass&gt;By&lt;Rule&gt;()</code></p>
            </li>
        </ul>

        <p class="para">
            Dans les motifs ci-dessus, <code class="code">&lt;TableClass&gt;</code> et
            <code class="code">&lt;Rule&gt;</code> désignent respectivement le nom de la table dépendante et le
            rôle à utiliser.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Certains frameworks tels que Rails pour Ruby, utilise un mécanisme dit
                d&#039;inflexion, qui permet de transformer les noms des identifiants (nom de table, de
                rôle...) d&#039;une certaine manière bien spécifique dans les méthodes appelées. Cela
                n&#039;est pas le cas de Zend Framework : vous devez, dans vos méthodes magiques,
                utiliser l&#039;orthographe exacte des noms des rôles et classes, tels que vous les
                définissez.
            <br />
        </p></blockquote>

        <div class="example"><div class="info"><p><b>Example #4 
                Récupérer des enregistrements dépendants en utilisant les méthodes magiques
            </b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple a le même effet que le précédent. Il utilise simplement les
                méthodes magiques pour récupérer les enregistrements dépendants.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsTable</span>&nbsp; &nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Accounts<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsRowset</span>&nbsp; &nbsp;= <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$user1234</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$accountsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utilise le rôle par défaut (le premier de la liste)</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsReportedBy</span>&nbsp; &nbsp;= <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findBugs</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utilise un rôle spécifique</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsAssignedTo</span>&nbsp; &nbsp;= <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findBugsByEngineer</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.db.table.relationships.fetching.parent" name="zend.db.table.relationships.fetching.parent"><div class="info"><h1 class="title">Récupérer l&#039;enregistrement parent</h1></div>
        

        <p class="para">
            Si vous possédez un enregistrement (<code class="code">Row</code>) dont la table possède une
            table parente, il est possible alors de récupérer l&#039;enregistrement parent. Utilisez pour
            cela la méthode :
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$row</span>-&gt;<span style="color: #006600;">findParentRow</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$table</span>, <span style="color: #66cc66;">&#91;</span><span style="color: #0000ff;">$rule</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            La logique veut qu&#039;il ne puisse y avoir qu&#039;un et un seul parent par
            enregistrement. Ainsi, cette méthode retourne un objet <code class="code">Row</code> et non un objet
            <code class="code">Rowset</code>
        </p>

        <p class="para">
            Le premier paramètre <var class="varname">$table</var> désigne la table parente. Ceci peut être
            une chaîne de caractères, ou un objet instance de la classe de la table parente.
        </p>

        <div class="example"><div class="info"><p><b>Example #5 Récupérer l&#039;enregistrement parent</b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple illustre la récupération d&#039;un enregistrement <code class="code">Bugs</code> (disons
                par exemple ceux avec le statut &quot;NEW&quot;), et l&#039;obtention de l&#039;enregistrement
                parent correspondant à <code class="code">Accounts</code> (la personne ayant reporté le
                bug)
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span>&nbsp; &nbsp;= <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span>&nbsp; = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">fetchAll</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_status = ?'</span> =&gt; <span style="color: #ff0000;">'NEW'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1</span>&nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$reporter</span>&nbsp; &nbsp; = <span style="color: #0000ff;">$bug1</span>-&gt;<span style="color: #006600;">findParentRow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Accounts'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Le second paramètre <var class="varname">$rule</var> est optionnel. Il s&#039;agit du nom du rôle à
            utiliser depuis le tableau <var class="varname">$_referenceMap</var> de la classe de la table
            dépendante. Si vous ne le spécifiez pas, le premier rôle sera utilisé. Il n&#039;y a dans la
            majorité des cas qu&#039;un seul rôle.
        </p>

        <p class="para">
            Dans l&#039;exemple ci dessus, nous ne fournissons pas de nom de rôle, le premier est
            donc pris en considération, et il s&#039;agit de <code class="code">&quot;Reporter&quot;</code>.
        </p>

        <div class="example"><div class="info"><p><b>Example #6 Récupérer un enregistrement parent avec un rôle spécifique</b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple va démontrer comment, à partir d&#039;un enregistrement de
                <code class="code">Bugs</code>, récupérer la personne en étant assignée. Il va falloir utiliser
                le rôle <code class="code">&quot;Engineer&quot;</code>.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span>&nbsp; &nbsp;= <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span>&nbsp; = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">fetchAll</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_status = ?'</span>, <span style="color: #ff0000;">'NEW'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1</span>&nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$engineer</span>&nbsp; &nbsp; = <span style="color: #0000ff;">$bug1</span>-&gt;<span style="color: #006600;">findParentRow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Accounts'</span>, <span style="color: #ff0000;">'Engineer'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Vous pouvez récupérer l&#039;enregistrement parent d&#039;une autre manière. En utilisant
            les &quot;méthodes magiques&quot;. En effet, Zend_Db_Table_Row_Abstract va utiliser la
            méthode <span class="methodname">findParentRow(&#039;&lt;TableClass&gt;&#039;, &#039;&lt;Rule&gt;&#039;)</span> si vous appelez
            sur l&#039;enregistrement une méthode correspondante à un de ces motifs :
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">$row-&gt;findParent&lt;TableClass&gt;([Zend_Db_Table_Select
                    $select])</code>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">$row-&gt;findParent&lt;TableClass&gt;By&lt;Rule&gt;([Zend_Db_Table_Select
                    $select])</code>
                </p>
            </li>
        </ul>

        <p class="para">
            Dans les motifs ci-dessus, <code class="code">&lt;TableClass&gt;</code> et
            <code class="code">&lt;Rule&gt;</code> représentent respectivement le nom de la classe de la table
            parente, et le rôle à utiliser éventuellement.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Les noms de la table et du rôle doivent être orthographiés de la même manière
                qu&#039;ils ne le sont lors de leur définition dans la table.
            <br />
        </p></blockquote>

        <div class="example"><div class="info"><p><b>Example #7 Récupérer un enregistrement parent en utilisant les méthodes magiques</b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple a le même effet que le précédent. Il utilise simplement les
                méthodes magiques pour récupérer l&#039;enregistrement parent.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span>&nbsp; &nbsp;= <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span>&nbsp; = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">fetchAll</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_status = ?'</span>, <span style="color: #ff0000;">'NEW'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1</span>&nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utilise le rôle par défaut ( le premier déclaré)</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$reporter</span>&nbsp; &nbsp; = <span style="color: #0000ff;">$bug1</span>-&gt;<span style="color: #006600;">findParentAccounts</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utilise un rôle spécifique</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$engineer</span>&nbsp; &nbsp; = <span style="color: #0000ff;">$bug1</span>-&gt;<span style="color: #006600;">findParentAccountsByEngineer</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.db.table.relationships.fetching.many-to-many" name="zend.db.table.relationships.fetching.many-to-many"><div class="info"><h1 class="title">
            Récupérer des enregistrements dans une relation N-N (plusieurs-à-plusieurs ou
            &quot;many-to-many&quot;)
        </h1></div>
        

        <p class="para">
            Si vous possédez un enregistrement sur une table (appelons la &quot;table d&#039;origine&quot;)
            ayant une relation plusieurs à plusieurs vers une autre table (appelons la &quot;table de
            destination&quot;), vous pouvez alors accéder aux enregistrements de la table de destination,
            via une table dite &quot;d&#039;intersection&quot;. Utilisez la méthode :
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$row</span>-&gt;<span style="color: #006600;">findManyToManyRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$table</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">$intersectionTable</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#91;</span><span style="color: #0000ff;">$rule1</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#91;</span><span style="color: #0000ff;">$rule2</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#91;</span>Zend_Db_Table_Select <span style="color: #0000ff;">$select</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Cette méthode retourne un objet instance de
            <span class="classname">Zend_Db_Table_Rowset_Abstract</span> qui contient les enregistrements de
            la table <var class="varname">$table</var> qui correspondent à la relation plusieurs à plusieurs.
            L&#039;enregistrement courant de la table courante, <var class="varname">$row</var>, est utilisé comme
            point de départ pour effectuer une jointure vers la table de destination, via la table
            d&#039;intersection.
        </p>

        <p class="para">
            Le premier paramètre <var class="varname">$table</var> peut être soit une chaîne soit un objet
            instance de la classe de la table de destination dans la relation plusieurs à
            plusieurs.
        </p>

        <p class="para">
            Le second paramètre <var class="varname">$intersectionTable</var> peut être soit une chaîne soit
            un objet instance de la classe de la table d&#039;intersection dans la relation plusieurs à
            plusieurs.
        </p>

        <div class="example"><div class="info"><p><b>Example #8 Récupérer des enregistrements dans une relation plusieurs-à-plusieurs</b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple montre comment posséder un enregistrement de la table d&#039;origine
                <code class="code">Bugs</code>, et comment en récupérer les enregistrements de
                <code class="code">Products</code>, qui représentent les produits qui font référence à ce
                bug.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span>&nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span>&nbsp; &nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1234</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$productsRowset</span>&nbsp; &nbsp;= <span style="color: #0000ff;">$bug1234</span>-&gt;<span style="color: #006600;">findManyToManyRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Products'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'BugsProducts'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Les troisième et quatrième paramètres, <var class="varname">$rule1</var> et <var class="varname">$rule2</var>,
            sont optionnels. Ce sont des chaînes de caractères qui désignent les rôles à utiliser
            dans le tableau <var class="varname">$_referenceMap</var> de la table d&#039;intersection.
        </p>

        <p class="para">
            <var class="varname">$rule1</var> nomme le rôle dans la relation entre la table d&#039;origine et la
            table d&#039;intersection. Dans notre exemple, il s&#039;agit donc de la relation de
            <code class="code">Bugs</code> à <code class="code">BugsProducts</code>.
        </p>

        <p class="para">
            <var class="varname">$rule2</var>nomme le rôle dans la relation entre la table d&#039;origine et la
            table d&#039;intersection. Dans notre exemple, il s&#039;agit donc de la relation de
            <code class="code">BugsProducts</code> à <code class="code">Products</code>.
        </p>

        <p class="para">
            Si vous ne spécifiez pas de rôles, alors le premier rôle trouvé pour la table,
            dans le tableau <var class="varname">$_referenceMap</var>, sera utilisé. Dans la grande majorité des
            cas, il n&#039;y a qu&#039;un rôle.
        </p>

        <p class="para">
            Dans l&#039;exemple ci-dessus, les rôles ne sont pas spécifiés. Ainsi
            <var class="varname">$rule1</var> prend la valeur <code class="code">&quot;Reporter&quot;</code> et <var class="varname">$rule2</var> prend
            la valeur <code class="code">&quot;Product&quot;</code>.
        </p>

        <div class="example"><div class="info"><p><b>Example #9 Récupérer des enregistrements dans une relation plusieurs-à-plusieurs avec un
            rôle spécifique</b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple montre comment à partir d&#039;un enregistrement de <code class="code">Bugs</code>,
                récupérer les enregistrements de <code class="code">Products</code>, représentant les produits
                comportant ce bug.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span>&nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span>&nbsp; &nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1234</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$productsRowset</span>&nbsp; &nbsp;= <span style="color: #0000ff;">$bug1234</span>-&gt;<span style="color: #006600;">findManyToManyRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Products'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'BugsProducts'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'Bug'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Vous pouvez récupérer l&#039;enregistrement de destination d&#039;une autre manière. En
            utilisant les &quot;méthodes magiques&quot;. En effet,
            <span class="classname">Zend_Db_Table_Row_Abstract</span> va utiliser la méthode
            <code class="code">findManyToManyRowset(&#039;&lt;TableClass&gt;&#039;, &#039;&lt;IntersectionTableClass&gt;&#039;,
            &#039;&lt;Rule1&gt;&#039;, &#039;&lt;Rule2&gt;&#039;)</code> si vous appelez sur l&#039;enregistrement une
            méthode correspondante à un de ces motifs :
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">$row-&gt;find&lt;TableClass&gt;Via&lt;IntersectionTableClass&gt;([Zend_Db_Table_Select
                    $select])</code>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">$row-&gt;find&lt;TableClass&gt;Via&lt;IntersectionTableClass&gt;By&lt;Rule1&gt;([Zend_Db_Table_Select
                    $select])</code>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">$row-&gt;find&lt;TableClass&gt;Via&lt;IntersectionTableClass&gt;By&lt;Rule1&gt;And&lt;Rule2&gt;([Zend_Db_Table_Select
                    $select])</code>
                </p>
            </li>
        </ul>

        <p class="para">
            Dans les motifs ci dessus, <code class="code">&lt;TableClass&gt;</code> et
            <code class="code">&lt;IntersectionTableClass&gt;</code> sont des chaînes de caractères
            correspondantes aux noms des classes des tables de destination et d&#039;intersection
            (respectivement). <code class="code">&lt;Rule1&gt;</code> et <code class="code">&lt;Rule2&gt;</code> sont
            respectivement des chaînes désignant les rôles dans la table d&#039;intersection pour la
            table de référence, et de destination.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Les noms de la table et des rôles doivent être orthographiés de manière
                exacte, tel qu&#039;ils le sont lors de leurs définitions respectives.
            <br />
        </p></blockquote>

        <div class="example"><div class="info"><p><b>Example #10 Récupérer des enregistrements dans une relation plusieurs-à-plusieurs avec
            les méthodes magiques</b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple illustre la récupération d&#039;enregistrements dans une table de
                destination, bugs, depuis un produit, en passant par une table d&#039;intersection, le
                tout, via des méthodes magiques.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span>&nbsp; &nbsp;= <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span>&nbsp; = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1234</span>&nbsp; &nbsp; &nbsp;= <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utilisation des rôles par défaut</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$products</span>&nbsp; &nbsp; = <span style="color: #0000ff;">$bug1234</span>-&gt;<span style="color: #006600;">findProductsViaBugsProducts</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utilisation d'un rôle spécifique</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$products</span>&nbsp; &nbsp; = <span style="color: #0000ff;">$bug1234</span>-&gt;<span style="color: #006600;">findProductsViaBugsProductsByBug</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.db.table.relationships.cascading" name="zend.db.table.relationships.cascading"><div class="info"><h1 class="title">Opérations d&#039;écritures en cascade</h1></div>
        

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Déclarer l&#039;intégrité référentielle</b><br /></span>
            

            
                Déclarer les opérations de cascades dûes à l&#039;intégrité référentielle dans
                <span class="classname">Zend_Db_Table</span> directement, ne doit se faire
                <em class="emphasis">seulement</em> si votre SGBD ne supporte pas nativement ce genre
                d&#039;opérations.
            <br />

            
                C&#039;est le cas par exemple de MySQL utilisant le stockage de tables MyISAM, ou
                encore SQLite. Ces solutions là ne supportent pas l&#039;intégrité référentielle. Il peut
                alors être intéressant d&#039;utiliser <span class="classname">Zend_Db_Table</span> pour émuler
                un tel comportement
            <br />

            
                Si votre SGBD en revanche supporte les clauses <code class="code">ON DELETE</code> et
                <code class="code">ON UPDATE</code>, alors vous devriez les déclarer directement dans le SGBD
                plutôt que de vous fier à l&#039;émulation proposée par
                <span class="classname">Zend_Db_Table</span>. Déclarer son intégrité référentielle dans son
                SGBD directement est tout à fait recommandé pour les performances, l&#039;intégrité
                (l&#039;atomicité des opérations), et la logique de base de données.
            <br />

            
                Il est très important de ne pas déclarer ses règles d&#039;intégrité référentielle
                à la fois dans son SGBD et dans les classes
                <span class="classname">Zend_Db_Table</span>.
            <br />
        </p></blockquote>

        <p class="para">
            Vous pouvez déclarer des opérations de cascade sur un <b><tt>UPDATE</tt></b> ou un
            <b><tt>DELETE</tt></b>, à appliquer sur les enregistrements dépendants à la table en
            cours.
        </p>

        <div class="example"><div class="info"><p><b>Example #11 Exemple de DELETE cascade</b></p></div>
            

            <div class="example-contents"><p>
                Cet exemple montre l&#039;effacement d&#039;un enregistrement de <code class="code">Products</code>,
                qui va propager l&#039;effacement des enregistrements dépendants dans la table
                <code class="code">Bugs</code>.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$productsTable</span>&nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Products<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$productsRowset</span> = <span style="color: #0000ff;">$productsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$product1234</span>&nbsp; &nbsp; = <span style="color: #0000ff;">$productsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$product1234</span>-&gt;<span style="color: #006600;">delete</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Cascades automatiques vers le table Bugs</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// et suppression des enregistrements dépendants.</span></div></li></ol></div></div></div>

        </div>

        <p class="para">
            De la même manière, si vous utilisez un <b><tt>UPDATE</tt></b> pour changer la valeur
            de la clé primaire d&#039;une table parente, vous pourriez nécessiter que les clés étrangères
            des tables dépendantes soient mises à jour.
        </p>

        <p class="para">
            En général s&#039;il s&#039;agit d&#039;une séquence, il n&#039;est pas nécessaire de mettre à jour
            les enregistrements dépendants. En revanche concernant les clé dites
            <em class="emphasis">naturelles </em>, il peut s&#039;avérer nécessaire de propager un changement
            de valeur.
        </p>

        <p class="para">
            Afin de déclarer une relation de cascades dans
            <span class="classname">Zend_Db_Table</span>, éditer les rôles dans <var class="varname">$_referenceMap</var>.
            Ajoutez les clés <code class="code">&#039;onDelete&#039;</code> et <code class="code">&#039;onUpdate&#039;</code> et donnez leur la
            valeur &#039;cascade&#039; (ou la constante <b><tt>self::CASCADE</tt></b>). Avant qu&#039;un
            enregistrement ne soit modifié(sa clé primaire) / supprimé, tous les enregistrements
            dans les tables dépendantes seront modifiés / supprimés.
        </p>

        <div class="example"><div class="info"><p><b>Example #12 Exemple de déclaration des opérations de cascade</b></p></div>
            

            <div class="example-contents"><p>
                Dans l&#039;exemple ci-après, les enregistrements de <code class="code">Bugs</code> sont
                automatiquement supprimés si l&#039;enregistrement dans la table <code class="code">Products</code>
                auquel ils font référence est supprimé. L&#039;élément <code class="code">&quot;onDelete&quot;</code> de la
                <var class="varname">$_referenceMap</var> est mis à <b><tt>self::CASCADE</tt></b>.
            </p></div>

            <div class="example-contents"><p>
                Pas de mise à jour en cascade en revanche pour cette table, si la clé primaire
                de la table parente est changée. En effet, l&#039;élément <code class="code">&quot;onUpdate&quot;</code> est mis
                à <b><tt>self::RESTRICT</tt></b>. Vous auriez aussi pu tout simplement ne pas spécifier
                <code class="code">&quot;onUpdate&quot;</code> .
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> BugsProducts <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; ...</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_referenceMap</span>&nbsp; &nbsp; = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Product'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'product_id'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Products'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'product_id'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'onDelete'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; self::<span style="color: #006600;">CASCADE</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'onUpdate'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; self::<span style="color: #006600;">RESTRICT</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; ...</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

        </div>

        <div class="section" id="zend.db.table.relationships.cascading.notes" name="zend.db.table.relationships.cascading.notes"><div class="info"><h1 class="title">Notes concernant les opérations de cascade</h1></div>
            

            <p class="para">
                <em class="emphasis">Les opérations de cascades déclenchées par Zend_Db_Table ne sont pas
                atomiques.</em>
            </p>

            <p class="para">
                Ceci signifie que si votre SGBD possède un moyen de gérer les cascades, comme
                l&#039;intégrité référentielle (et les clés étrangères), alors vous ne devriez pas
                utiliser les cascades INSERT via <span class="classname">Zend_Db_Table</span>, car elles
                vont entrer en conflit avec le système d&#039;intégrité référentielle du SGBD qui lui,
                est atomique.
            </p>

            <p class="para">
                Le problème est plus mitigé concernant <b><tt>DELETE</tt></b>. Vous pouvez
                détruire de manière non atomique un enregistrement dépendant, avant de détruire son
                parent.
            </p>

            <p class="para">
                Cependant, les deux opérations <b><tt>UPDATE</tt></b> et <b><tt>DELETE</tt></b>
                utilisées de manière non atomique(que), c&#039;est à dire avec le mécanisme de
                <span class="classname">Zend_Db_Table</span>, peuvent laisser la base de données dans un
                état non désiré, ou état intermédiaire. Supposez que vous supprimiez tous les
                enregistrements dépendants, pour finir par leur parent unique. A un moment donnée,
                la base de donnée sera dans un état tel que le parent sera sans enfants, mais
                toujours bel et bien présent. Si un autre client se connecte exactement à ce moment
                là, il va pouvoir requêter éventuellement le parent, en croyant que celui-ci n&#039;a
                plus d&#039;enfant, ce qui normalement n&#039;est pas le cas. Il est alors totalement
                impossible pour ce client là de se rendre compte qu&#039;il a effectuer une lecture au
                beau milieu d&#039;une plus vaste opération d&#039;effacement.
            </p>

            <p class="para">
                Les problèmes de changements non-atomique peuvent être anéantis en utilisant
                les transactions isolantes, c&#039;est d&#039;ailleurs un de leur rôle clé. Cependant certains
                SGBDs ne supportent pas encore les transactions, et autorisent leurs clients à lire
                des changements incomplets pas validés en totalité.
            </p>

            <p class="para">
                <em class="emphasis">Les opérations de cascades de Zend_Db_Table ne sont utilisées que
                par Zend_Db_Table.</em>
            </p>

            <p class="para">
                Les cascades pour <b><tt>DELETE</tt></b> et <b><tt>UPDATE</tt></b> définies dans vos
                classes <span class="classname">Zend_Db_Table</span> ne sont utilisées que lors du recours
                aux méthodes  <span class="methodname">save()</span> ou  <span class="methodname">delete()</span> sur les enregistrements
                <code class="code">Row</code>. Si vous utilisez une autre interface pour vos <b><tt>UPDATE</tt></b>
                ou <b><tt>DELETE</tt></b>, comme par exemple un outil de requêtes, ou une autre
                application, les opérations de cascades ne sont bien sûr pas appliquées. C&#039;est même
                le cas si vous utilisez les méthodes  <span class="methodname">update()</span> et  <span class="methodname">delete()</span>
                dans la classe <span class="classname">Zend_Db_Adapter</span>.
            </p>

            <p class="para"><em class="emphasis">Pas d&#039;<b><tt>INSERT</tt></b> en cascade</em></p>

            <p class="para">
                Le support pour les cascades d&#039;<b><tt>INSERT</tt></b> n&#039;est pas assuré. Vous
                devez explicitement insérer les enregistrements dépendants à un enregistrement
                parent.
            </p>
        </div>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.db.table.rowset.html">Zend_Db_Table_Rowset</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.db.html">Zend_Db</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.db.table.definition.html">Zend_Db_Table_Definition</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.db.html">Zend_Db</a></li>
  <li><a href="zend.db.adapter.html">Zend_Db_Adapter</a></li>
  <li><a href="zend.db.statement.html">Zend_Db_Statement</a></li>
  <li><a href="zend.db.profiler.html">Zend_Db_Profiler</a></li>
  <li><a href="zend.db.select.html">Zend_Db_Select</a></li>
  <li><a href="zend.db.table.html">Zend_Db_Table</a></li>
  <li><a href="zend.db.table.row.html">Zend_Db_Table_Row</a></li>
  <li><a href="zend.db.table.rowset.html">Zend_Db_Table_Rowset</a></li>
  <li class="active"><a href="zend.db.table.relationships.html">Relations Zend_Db_Table</a></li>
  <li><a href="zend.db.table.definition.html">Zend_Db_Table_Definition</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>