<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_Http_Cookie and Zend_Http_CookieJar - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.http.client.adapters.html">Zend_Http_Client - Adaptateurs de connexion</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.http.html">Zend_Http</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.http.response.html">Zend_Http_Response</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.http.cookies" class="section"><div class="info"><h1 class="title">Zend_Http_Cookie and Zend_Http_CookieJar</h1></div>
    

    <div class="section" id="zend.http.cookies.introduction" name="zend.http.cookies.introduction"><div class="info"><h1 class="title">Introduction</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Http_Cookie</span>, comme son nom l&#039;indique, est une classe
            qui représente un cookie <acronym class="acronym">HTTP</acronym>. Elle propose des méthodes d&#039;analyse de la chaîne de
            réponse <acronym class="acronym">HTTP</acronym>, de collection des cookies, et d&#039;accès à leurs propriétés. Il est aussi
            possible avec cette classe de vérifier si les paramètres d&#039;un cookie correspondent à un
            scénario précis, par exemple une <acronym class="acronym">URL</acronym> spécifique, un certain temps d&#039;expiration, la
            présence ou non de <acronym class="acronym">HTTPS</acronym>, etc...
        </p>

        <p class="para">
            <span class="classname">Zend_Http_CookieJar</span> est un objet utilisé en général avec
            <span class="classname">Zend_Http_Client</span> pour fournir une collection d&#039;objets
            <span class="classname">Zend_Http_Cookie</span>. L&#039;idée principale est d&#039;attacher un objet
            <span class="classname">Zend_Http_CookieJar</span> à un objet
            <span class="classname">Zend_Http_Client</span>, de manière à ce que toutes les requêtes de
            celui-ci utilisent les cookies présents dans l&#039;objet <code class="code">CookieJar</code>. Ainsi,
            lorsque le client enverra une autre requête, il demandera à l&#039;objet
            <code class="code">CookieJar</code> tous les cookies concernant cette requête. Ceci est très pratique
            dans des cas comme envoyer un cookie de session entre plusieurs requêtes <acronym class="acronym">HTTP</acronym>
            successives. De plus, l&#039;objet <span class="classname">Zend_Http_CookieJar</span> peut être
            sérialisé et mis en session.
        </p>
    </div>

    <div class="section" id="zend.http.cookies.cookie.instantiating" name="zend.http.cookies.cookie.instantiating"><div class="info"><h1 class="title">Instancier des objets Zend_Http_Cookie</h1></div>
        

        <p class="para">
            L&#039;instanciation se fait de deux manières différentes : <ul class="itemizedlist">
                    <li class="listitem">
                    <p class="para">
                        Via son constructeur, de cette façon : <code class="code">new
                        Zend_Http_Cookie(string $name, string $value, string $domain, [int $expires,
                        [string $path, [boolean $secure]]]);</code>
                    </p>

                    <ul class="itemizedlist">
                        <li class="listitem">
                            <p class="para">
                                <var class="varname">$name</var>: Nom du cookie (par ex. &quot;PHPSESSID&quot;)
                                (requis)
                            </p>
                        </li>

                        <li class="listitem">
                            <p class="para"><var class="varname">$value</var>: La valeur du cookie (requis)</p>
                        </li>

                        <li class="listitem">
                            <p class="para">
                                <var class="varname">$domain</var>: Le domaine de validité du cookie (par
                                ex. &quot;.example.com&quot;) (requis)
                            </p>
                        </li>

                        <li class="listitem">
                            <p class="para">
                                <var class="varname">$expires</var>: Temps d&#039;expiration du cookie, un
                                timestamp UNIX (optionnel, défaut à <b><tt>NULL</tt></b>). Si non
                                fourni, le cookie sera considéré comme &quot;cookie de session&quot;, avec pas
                                de temps d&#039;expiration.
                            </p>
                        </li>

                        <li class="listitem">
                            <p class="para">
                                <var class="varname">$path</var>: Chemin de validité du cookie, par ex.
                                &quot;/foo/bar/&quot; (optionnel, défaut : &quot;/&quot;)
                            </p>
                        </li>

                        <li class="listitem">
                            <p class="para">
                                <var class="varname">$secure</var>: Booléen, Si le cookie doit être transmis
                                via connexion sécurisée (HTTPS) uniquement (optionnel, défaut à
                                <b><tt>FALSE</tt></b>)
                            </p>
                        </li>
                    </ul>
                </li>

                <li class="listitem">
                    <p class="para">
                        En appelant la méthode statique  <span class="methodname">fromString($cookieStr, [$refUri, [$encodeValue]])</span>, avec une
                        chaîne de caractères représentant un cookie tel que défini dans les en-têtes
                        <acronym class="acronym">HTTP</acronym> &quot;Set-Cookie&quot; (réponse) ou &quot;Cookie&quot; (requête). Dans ce cas la valeur du
                        cookie doit être encodée. Lorsque la chaîne de caractères représentant un
                        cookie ne comporte pas de partie &quot;domain&quot;, vous devez fournir alors un <acronym class="acronym">URI</acronym>
                        selon lequel le cookie cherchera son domaine et son chemin.
                    </p>
                    <p class="para">
                        La méthode <code class="code">fromString</code> accepte les paramètres suivants :
                    </p>
                    <ul class="itemizedlist">
                        <li class="listitem">
                            <p class="para">
                            <var class="varname">$cookieStr</var>: a cookie string as represented in the
                           &#039;Set-Cookie&#039; <acronym class="acronym">HTTP</acronym> response header or &#039;Cookie&#039;
                           <acronym class="acronym">HTTP</acronym> request header (required)
                            </p>
                        </li>
                        <li class="listitem">
                            <p class="para">
                            <var class="varname">$refUri</var>: a reference <acronym class="acronym">URI</acronym> according to which the cookie&#039;s domain and path
                            will be set. (optional, defaults to parsing the value from the $cookieStr)
                            </p>
                        </li>
                        <li class="listitem">
                            <p class="para">
                            <var class="varname">$encodeValue</var>: If the value should be passed through urldecode. Also effects the cookie&#039;s
                            behavior when being converted back to a cookie string. (optional, defaults to true)
                            </p>
                        </li>
                    </ul>
                </li>
            </ul> <div class="example"><div class="info"><p><b>Example #1 Créer un objet Zend_Http_Cookie</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// D'abord, en utilisant son constructeur.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ce cookie expirera dans 2 heures</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Http_Cookie<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'bar'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'.example.com'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/time"><span style="color: #000066;">time</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> + <span style="color: #cc66cc;">7200</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'/path'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// En prenant l'en-tête de réponse HTTP 'Set-Cookie'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Ce cookie n'expirera pas et ne sera envoyé que</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// sur des connexions sécurisées</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span> = Zend_Http_Cookie::<span style="color: #006600;">fromString</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'foo=bar; domain=.example.com; path=/path; secure'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Si le domaine n'est pas présent, spécifiez le manuellement :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span> = Zend_Http_Cookie::<span style="color: #006600;">fromString</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'foo=bar; secure;'</span>, <span style="color: #ff0000;">'http://www.example.com/path'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div> <blockquote><p><b class="note">Note</b>: 
                
                    Lorsque vous utilisez la méthode statique
                     <span class="methodname">Zend_Http_Cookie::fromString()</span>, veillez à fournir un
                    cookie <acronym class="acronym">URL</acronym> encodé (tel que c&#039;est le cas dans les en-têtes <acronym class="acronym">HTTP</acronym>). Avec le
                    constructeur en revanche, il est nécessaire d&#039;utiliser une valeur non
                    encodée.
                <br />
                </p></blockquote>
            </p>

        <p class="para">
            La manipulation inverse est possible. Grâce à la méthode
             <span class="methodname">__toString()</span>, vous pouvez récupérer une chaîne représentant le cookie, à
            partir de l&#039;objet <span class="classname">Zend_Http_Cookie</span>. La chaîne alors retournée est
            la même que celle utilisée dans l&#039;en-tête HTTP &quot;Cookie&quot;, à savoir une chaîne encodée,
            terminée par un point-virgule (;) : <div class="example"><div class="info"><p><b>Example #2 Passer de l&#039;objet Zend_Http_Cookie à la chaîne</b></p></div>
                    

                    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Création d'un nouveau cookie</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Http_Cookie<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'two words'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'.example.com'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/time"><span style="color: #000066;">time</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> + <span style="color: #cc66cc;">7200</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'/path'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Va afficher 'foo=two+words;' :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$cookie</span>-&gt;__toString<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Ceci est la même chose</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #66cc66;">&#40;</span>string<span style="color: #66cc66;">&#41;</span> <span style="color: #0000ff;">$cookie</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// En PHP 5.2 et plus, ceci fonctionne aussi :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$cookie</span>;</div></li></ol></div></div></div>

                </div>
            </p>
    </div>

    <div class="section" id="zend.http.cookies.cookie.accessors" name="zend.http.cookies.cookie.accessors"><div class="info"><h1 class="title">Zend_Http_Cookie méthodes getter</h1></div>
        

        <p class="para">
            Une fois l&#039;objet <span class="classname">Zend_Http_Cookie</span> crée, il existe des
            méthodes &#039;getter&#039; pour accéder aux différentes propriétés du cookie : <ul class="itemizedlist">
                    <li class="listitem">
                        <p class="para"><code class="code">string getName()</code>: Retourne le nom du cookie</p>
                    </li>

                    <li class="listitem">
                    <p class="para">
                        <code class="code">string getValue()</code>: Retourne la valeur réelle (décodée),
                        du cookie
                    </p>
                </li>

                <li class="listitem">
                    <p class="para"><code class="code">string getDomain()</code>: Retourne le domaine du cookie</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <code class="code">string getPath()</code>: Retourne le chemin du cookie, par
                        défaut &#039;/&#039;
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <code class="code">int getExpiryTime()</code>: Retourne la date d&#039;expiration, comme
                        timestamp UNIX. Si pas de date, <b><tt>NULL</tt></b> sera retourné.
                    </p>
                </li>
                </ul>
            </p>

        <p class="para">
            Voici encore quelques méthodes de vérifications booléennes : <ul class="itemizedlist">
                    <li class="listitem">
                    <p class="para">
                        <code class="code">boolean isSecure()</code>: Regarde si le cookie est un cookie
                        sécurisé. Si c&#039;est le cas, les navigateurs ont pour instruction de ne les
                        envoyer que sur des connexions sécurisées (HTTPS).
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <code class="code">boolean isExpired(int $time = null)</code>: Vérifie si le cookie
                        est expirés. Si il n&#039;y a pas de date d&#039;expiration, cette méthode retournera
                        toujours <b><tt>TRUE</tt></b>. Si <var class="varname">$time</var> est fourni, alors la date
                        du cookie sera comparée à ce <var class="varname">$time</var>, et non plus au temps
                        actuel.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <code class="code">boolean isSessionCookie()</code>: Vérifie si le cookie est un
                        cookie dit &#039;de session&#039;. C&#039;est un cookie sans date d&#039;expiration, sensé être
                        détruit à la fin de la session de travail actuelle (à la fermeture du
                        navigateur).
                    </p>
                </li>
                </ul>
            </p>

        <p class="para">
            <div class="example"><div class="info"><p><b>Example #3 Utilisation des méthodes getter de Zend_Http_Cookie</b></p></div>
                    

                    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Création d'un cookie</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span> =</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; Zend_Http_Cookie::<span style="color: #006600;">fromString</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo=two+words;'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;. <span style="color: #ff0000;">' domain=.example.com;'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;. <span style="color: #ff0000;">' path=/somedir;'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;. <span style="color: #ff0000;">'secure;'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;. <span style="color: #ff0000;">'expires=Wednesday, 28-Feb-05 20:41:22 UTC'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">getName</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;&nbsp; &nbsp;<span style="color: #808080; font-style: italic;">// Affiche 'foo'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">getValue</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;&nbsp; <span style="color: #808080; font-style: italic;">// Affiche 'two words'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">getDomain</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>; <span style="color: #808080; font-style: italic;">// Affiche '.example.com'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">getPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;&nbsp; &nbsp;<span style="color: #808080; font-style: italic;">// Affiche '/'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <a href="http://www.php.net/date"><span style="color: #000066;">date</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Y-m-d'</span>, <span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">getExpiryTime</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Affiche '2005-02-28'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">isExpired</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> ? <span style="color: #ff0000;">'Yes'</span> : <span style="color: #ff0000;">'No'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Affiche 'Yes'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">isExpired</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/strtotime"><span style="color: #000066;">strtotime</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'2005-01-01'</span><span style="color: #66cc66;">&#41;</span> ? <span style="color: #ff0000;">'Yes'</span> : <span style="color: #ff0000;">'No'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Affiche 'No'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">isSessionCookie</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> ? <span style="color: #ff0000;">'Yes'</span> : <span style="color: #ff0000;">'No'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Affiche 'No'</span></div></li></ol></div></div></div>

                </div>
            </p>
    </div>

    <div class="section" id="zend.http.cookies.cookie.matching" name="zend.http.cookies.cookie.matching"><div class="info"><h1 class="title">Zend_Http_Cookie: Correspondance de scénario</h1></div>
        

        <p class="para">
            La vraie valeur ajoutée d&#039;un objet <span class="classname">Zend_Http_Cookie</span> est sa
            méthode match(). Celle-ci teste le cookie en rapport avec un scénario <acronym class="acronym">HTTP</acronym>, pour savoir
            ci celui-ci doit être attaché à la requête ou pas. La syntaxe est la suivante :
            <code class="code">boolean Zend_Http_Cookie-&gt;match(mixed $uri, [boolean $matchSessionCookies, [int
            $now]]);</code> <ul class="itemizedlist">
                    <li class="listitem">
                    <p class="para">
                        <code class="code">mixed $uri</code> : un objet Zend_Uri_Http avec un domaine et un
                        chemin à vérifier. Une chaîne représentant une <acronym class="acronym">URL</acronym> peut aussi être utilisée.
                        Le cookie sera déclaré bon si le schéma de l&#039;URL (HTTP ou <acronym class="acronym">HTTPS</acronym>) correspond,
                        ainsi que le chemin (path).
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <code class="code">boolean $matchSessionCookies</code> : établit ou non une
                        correspondance pour les cookies dits de session. Par défaut :
                        <b><tt>TRUE</tt></b>. Si mis à <b><tt>FALSE</tt></b>, alors les cookies sans date
                        d&#039;expiration seront ignorés du processus.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <code class="code">int $now</code> : timestamp UNIX passé pour vérifier
                        l&#039;expiration du cookie. Si non spécifié, alors le temps actuel sera pris en
                        considération.
                    </p>
                </li>
            </ul> <div class="example"><div class="info"><p><b>Example #4 Correspondance de cookies</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Création de l'objet cookie - d'abord un cookie sécurisé</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span> = Zend_Http_Cookie::<span style="color: #006600;">fromString</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'foo=two+words; domain=.example.com; path=/somedir; secure;'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'https://www.example.com/somedir/foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera true</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'http://www.example.com/somedir/foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera false, car la connexion n'est pas sécurisée</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'https://otherexample.com/somedir/foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera false, le domaine est incorrect</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'https://example.com/foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera false, le chemin est incorrect</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'https://www.example.com/somedir/foo.php'</span>, <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera false, car les cookies de session ne sont pas pris en compte</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'https://sub.domain.example.com/somedir/otherdir/foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera true</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Création d'un autre objet cookie - cette fois non sécurisé,</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// expire dans 2 heures</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span> = Zend_Http_Cookie::<span style="color: #006600;">fromString</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'foo=two+words; domain=www.example.com; expires='</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; . <a href="http://www.php.net/date"><span style="color: #000066;">date</span></a><span style="color: #66cc66;">&#40;</span>DATE_COOKIE, <a href="http://www.php.net/time"><span style="color: #000066;">time</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> + <span style="color: #cc66cc;">7200</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'http://www.example.com/'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera true</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'https://www.example.com/'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Will return true - non secure cookies can go</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// over secure connexions as well!</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'http://subdomain.example.com/'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera false, domaine incorrect</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cookie</span>-&gt;<span style="color: #006600;">match</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'http://www.example.com/'</span>, <span style="color: #000000; font-weight: bold;">true</span>, <a href="http://www.php.net/time"><span style="color: #000066;">time</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> + <span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span> * <span style="color: #cc66cc;">3600</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Retournera false, car nous avons rajouter 3 heures au temps actuel</span></div></li></ol></div></div></div>

                </div>
            </p>
    </div>

    <div class="section" id="zend.http.cookies.cookiejar" name="zend.http.cookies.cookiejar"><div class="info"><h1 class="title">Classe Zend_Http_CookieJar : Instanciation</h1></div>
        

        <p class="para">
            Dans la plupart des cas, il ne sera pas nécessaire d&#039;instancier soi-même un objet
            <span class="classname">Zend_Http_CookieJar</span>. Si vous voulez un conteneur de cookie
            (CookieJar) attaché à votre objet <span class="classname">Zend_Http_Client</span>, appelez
            simplement <span class="classname">Zend_Http_Client-&gt;setCookieJar()</span>, et un nouveau
            conteneur, vide, y sera attaché. Plus tard, vous pourrez utiliser la méthode
            <span class="classname">Zend_Http_Client-&gt;getCookieJar()</span>, pour récupérer ce
            conteneur.
        </p>

        <p class="para">
            Si vous voulez tout de même instancier manuellement un objet
            <code class="code">CookieJar</code>, appelez son constructeur avec &quot;<code class="code">new
            Zend_Http_CookieJar()</code>&quot;, sans paramètres. Sinon il est possible aussi de passer
            par la méthode statique  <span class="methodname">Zend_Http_CookieJar::fromResponse()</span> qui
            prend, elle, deux paramètres : un objet <span class="classname">Zend_Http_Response</span> et un
            <acronym class="acronym">URI</acronym> de référence (un objet <span class="classname">Zend_Uri_Http</span> ou une chaîne). Cette
            méthode retourne alors un objet <span class="classname">Zend_Http_CookieJar</span> qui
            contiendra les cookies de la réponse <acronym class="acronym">HTTP</acronym> passée. L&#039;URI de référence servira à remplir
            les paramètres &quot;domain&quot; et &quot;path&quot; des cookies, si jamais ils n&#039;ont pas été définis dans
            les en-têtes &quot;Set-Cookie&quot;.
        </p>
    </div>

    <div class="section" id="zend.http.cookies.cookiejar.adding_cookies" name="zend.http.cookies.cookiejar.adding_cookies"><div class="info"><h1 class="title">Ajouter des cookies à un objet Zend_Http_CookieJar</h1></div>
        

        <p class="para">
            En temps normal, c&#039;est l&#039;objet <span class="classname">Zend_Http_Client</span> qui
            ajoutera des cookies dans l&#039;objet <code class="code">CookieJar</code> que vous lui aurez attaché.
            Vous pouvez en ajouter manuellement aussi : <ul class="itemizedlist">
                    <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Http_CookieJar-&gt;addCookie($cookie[,
                        $ref_uri])</span>: Ajoute un cookie au conteneur (Jar). $cookie peut
                        être soit un objet <span class="classname">Zend_Http_Cookie</span>, soit une chaîne
                        qui sera alors convertie de manière automatique en objet cookie. Si vous
                        passez une chaîne, alors vous devriez aussi passer le paramètre $ref_uri qui
                        représente l&#039;URI de référence pour déterminer les paramètres &quot;domain&quot; et
                        &quot;path&quot; du cookie.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Http_CookieJar-&gt;addCookiesFromResponse($response,
                        $ref_uri)</span>: Ajoute tous les cookies présents dans une réponse
                        <acronym class="acronym">HTTP</acronym> au conteneur. La réponse <acronym class="acronym">HTTP</acronym> doit être un objet
                        <span class="classname">Zend_Http_Response</span> contenant au moins un en-tête
                        &quot;Set-Cookie&quot;. <span class="classname">$ref_uri</span> est un <acronym class="acronym">URI</acronym> (un objet
                        Zend_Uri_Http ou une chaîne), servant de référence pour remplir les
                        paramètres du cookie &quot;domain&quot; et &quot;path&quot;, si ceux-ci ne sont pas trouvés dans
                        la réponse.
                    </p>
                </li>
                </ul>
            </p>
    </div>

    <div class="section" id="zend.http.cookies.cookiejar.getting_cookies" name="zend.http.cookies.cookiejar.getting_cookies"><div class="info"><h1 class="title">Récupérer les cookies présents dans un objet Zend_Http_CookieJar</h1></div>
        

        <p class="para">
            Comme pour l&#039;ajout de cookies, en théorie, vous n&#039;aurez pas besoin de récupérer
            des cookies du conteneur, car l&#039;objet <span class="classname">Zend_Http_Client</span> se
            chargera de les gérer lui-même et de les envoyer dans les bonnes requêtes. Cependant, il
            existe des méthodes pour récupérer des cookies depuis un conteneur (Jar) :
             <span class="methodname">getCookie()</span>,  <span class="methodname">getAllCookies()</span>, et
             <span class="methodname">getMatchingCookies()</span>. De plus, itérer sur le CookieJar vous permettra d&#039;en
            extraire tous les objets <span class="classname">Zend_Http_Cookie</span>.
        </p>

        <p class="para">
            Il est important de noter que chacune de ces trois méthodes, prend un paramètre
            spécial destiné à déterminer le type que chaque méthode retournera. Ce paramètre peut
            avoir 3 valeurs: <ul class="itemizedlist">
                    <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Http_CookieJar::COOKIE_OBJECT</span>: Retourne un
                        objet <span class="classname">Zend_Http_Cookie</span>. Si plus d&#039;un cookie devait
                        être retourné, il s&#039;agira alors d&#039;un tableau d&#039;objets cookie.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Http_CookieJar::COOKIE_STRING_ARRAY</span>:
                        Retourne les cookies comme des chaînes de caractères dans un format
                        &quot;foo=bar&quot;, correspondant au format de l&#039;en-tête de requête <acronym class="acronym">HTTP</acronym> &quot;Cookie&quot;. Si
                        plus d&#039;un cookie devait être retourné, il s&#039;agira alors d&#039;un tableau de
                        chaînes.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Http_CookieJar::COOKIE_STRING_CONCAT</span>:
                        Similaire à COOKIE_STRING_ARRAY, mais si plusieurs cookies devaient être
                        retournés, alors il ne s&#039;agira plus d&#039;un tableau, mais d&#039;une chaîne
                        concaténant tous les cookies, séparés par des point-virgule (;). Ceci est
                        très utile pour passer tous les cookies d&#039;un coup, dans l&#039;en-tête <acronym class="acronym">HTTP</acronym>
                        &quot;Cookie&quot;.
                    </p>
                </li>
                </ul>
            </p>

        <p class="para">
            Voici la structure des méthodes de récupération des cookies : <ul class="itemizedlist">
                    <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Http_CookieJar-&gt;getCookie($uri, $cookie_name[,
                        $ret_as])</span>: Retourne un cookie depuis le conteneur, selon son <acronym class="acronym">URI</acronym>
                        (domain et path), et son nom. <var class="varname">$uri</var> est un objet
                        <span class="classname">Zend_Uri_Http</span> ou une chaîne. $cookie_name est une
                        chaîne identifiant le cookie en question. $ret_as spécifie le type de
                        retour, comme vu plus haut (par défaut COOKIE_OBJECT).
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Http_CookieJar-&gt;getAllCookies($ret_as)</span>:
                        Retourne tous les cookies du conteneur. $ret_as spécifie le type de retour,
                        comme vu plus haut (par défaut COOKIE_OBJECT).
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Http_CookieJar-&gt;getMatchingCookies($uri[,
                        $matchSessionCookies[, $ret_as[, $now]]])</span>: Retourne tous les
                        cookies ayant une correspondance pour un scénario donné, à savoir un <acronym class="acronym">URI</acronym> et
                        une date d&#039;expiration. <ul class="itemizedlist">
                                <li class="listitem">
                                <p class="para">
                                    <var class="varname">$uri</var> est soit un objet Zend_Uri_Http soit une
                                    chaîne.
                                </p>
                            </li>

                            <li class="listitem">
                                <p class="para">
                                    <var class="varname">$matchSessionCookies</var> est un booléen désignant
                                    si les cookies de session, c&#039;est à dire sans date d&#039;expiration,
                                    doivent être analysés aussi pour établir une correspondance. Par
                                    défaut : <b><tt>TRUE</tt></b>.
                                </p>
                            </li>

                            <li class="listitem">
                                <p class="para">
                                    <var class="varname">$ret_as</var> spécifie le type de retour, comme vu
                                    plus haut (par défaut COOKIE_OBJECT).
                                </p>
                            </li>

                            <li class="listitem">
                                <p class="para">
                                    <var class="varname">$now</var> est un entier représentant un timestamp
                                    UNIX à considérer comme &#039;maintenant&#039;. Ainsi tous les cookies
                                    expirant avant ce temps là, ne seront pas pris en compte. Si
                                    vous ne spécifiez pas ce paramètre, alors c&#039;est le temps actuel
                                    qui sera pris comme référence.
                                </p>
                            </li>
                        </ul> Vous pouvez en apprendre plus sur la correspondance des
                        cookies ici : <a href="zend.http.cookies.html#zend.http.cookies.cookie.matching" class="xref">Zend_Http_Cookie: Correspondance de sc&eacute;nario</a>.
                    </p>
                </li>
                </ul>
            </p>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.http.client.adapters.html">Zend_Http_Client - Adaptateurs de connexion</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.http.html">Zend_Http</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.http.response.html">Zend_Http_Response</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.http.html">Zend_Http</a></li>
  <li><a href="zend.http.client.html">Introduction</a></li>
  <li><a href="zend.http.client.advanced.html">Zend_Http_Client - Utilisation avanc&eacute;e</a></li>
  <li><a href="zend.http.client.adapters.html">Zend_Http_Client - Adaptateurs de connexion</a></li>
  <li class="active"><a href="zend.http.cookies.html">Zend_Http_Cookie and Zend_Http_CookieJar</a></li>
  <li><a href="zend.http.response.html">Zend_Http_Response</a></li>
  <li><a href="zend.http.user-agent.html">Zend_Http_UserAgent</a></li>
  <li><a href="zend.http.user-agent-device.html">The UserAgent Device Interface</a></li>
  <li><a href="zend.http.user-agent-features.html">The UserAgent Features Adapter</a></li>
  <li><a href="zend.http.user-agent-features-wurfl.html">The WURFL UserAgent Features Adapter</a></li>
  <li><a href="zend.http.user-agent-features-device-atlas.html">The DeviceAtlas UserAgent Features Adapter</a></li>
  <li><a href="zend.http.user-agent-features-tera-wurfl.html">The TeraWurfl UserAgent Features Adapter</a></li>
  <li><a href="zend.http.user-agent-storage.html">The UserAgent Storage Interface</a></li>
  <li><a href="zend.http.user-agent-storage-session.html">The Session UserAgent Storage Adapter</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>