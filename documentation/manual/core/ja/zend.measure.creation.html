<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>計測値の作成 - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.measure.introduction.html">導入</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.measure.html">Zend_Measure</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.measure.output.html">計測値の出力</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.measure.creation" class="section"><div class="info"><h1 class="title">計測値の作成</h1></div>

    

    <p class="para">
        計測値を表すオブジェクトを作成する際には、
        <span class="classname">Zend_Measure_*</span> のメソッドの最初のパラメータに
        入力値あるいは元の値を指定します。これは、
        <a href="zend.measure.creation.html#zend.measure.creation.number" class="link"><code class="code">数値の引数</code>
        </a>
        あるいは単位を含まない
        <a href="zend.measure.creation.html#zend.measure.creation.string" class="link"><code class="code">文字列</code>
        </a>、
        あるいは単位を指定した
        <a href="zend.measure.creation.html#zend.measure.creation.localized" class="link"><code class="code">各国固有の文字列</code>
        </a>
        のいずれかとなります。
        二番目の引数には、計測値の型を指定します。どちらのパラメータも必須です。
        言語は、任意で三番目のパラメータとして指定します。
    </p>

    <div class="section" id="zend.measure.creation.number" name="zend.measure.creation.number"><div class="info"><h1 class="title">整数および浮動小数点数からの計測値の作成</h1></div>

        

        <p class="para">
            整数に加えて、浮動小数点数を使用することもできます。しかし、
            <a href="http://www.php.net/float" class="link external">&raquo; &quot;0.1 や 0.7 のようなシンプルな小数であっても、
            それを内部的な二進数表現に変換する際には、どうしても多少精度が落ちてしまいます。&quot;</a>
            そのため、予期せぬ結果を引き起こすことがあります。
            また、ふたつの &quot;浮動小数点数&quot; が等しいかどうかを調べないようにしましょう。
        </p>

        <div class="example"><div class="info"><p><b>Example #1 整数および浮動小数点数を使用しての作成</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$measurement</span> = <span style="color: #cc66cc;">1234.7</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$unit</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Measure_Length<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span>integer<span style="color: #66cc66;">&#41;</span><span style="color: #0000ff;">$measurement</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zend_Measure_Length::<span style="color: #006600;">STANDARD</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$unit</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 出力は '1234 m' (メートル) となります</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$unit</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Measure_Length<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$measurement</span>, Zend_Measure_Length::<span style="color: #006600;">STANDARD</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$unit</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 出力は '1234.7 m' (メートル) となります</span></div></li></ol></div></div></div>

        </div>

    </div>

    <div class="section" id="zend.measure.creation.string" name="zend.measure.creation.string"><div class="info"><h1 class="title">文字列からの計測値の作成</h1></div>

        

        <p class="para">
            Zend Framework アプリケーションが入力として受け取って <span class="classname">Zend_Measure_*</span>
            クラスに渡す値の多くは、文字列としてしか渡せません。
            たとえば
            <a href="http://en.wikipedia.org/wiki/Roman_numerals" class="link external">&raquo; ローマ数字</a>
            の値は、<acronym class="acronym">PHP</acronym> の整数型・浮動小数点型の制限を越える値などがこれにあたります。
            整数値は文字列として表すことも可能です。
            <acronym class="acronym">PHP</acronym> の数値処理用関数の制限によって値の精度が損なわれる可能性がある場合は、
            代わりに文字列を使用するようにしましょう。
            <span class="classname">Zend_Measure_Number</span> は、BCMath 拡張モジュールを使用して
            任意の精度をサポートしています。以下の例に示すとおり、
            <a href="http://php.net/bin2dec" class="link external">&raquo;  <span class="methodname">bin2dec()</span>
            </a>
            のような多くの <acronym class="acronym">PHP</acronym> 関数の制限を避けるようになっています。
        </p>

        <div class="example"><div class="info"><p><b>Example #2 文字列を使用しての作成</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mystring</span> = <span style="color: #ff0000;">&quot;10010100111010111010100001011011101010001&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$unit</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Measure_Number<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mystring</span>, Zend_Measure_Number::<span style="color: #006600;">BINARY</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$unit</span>;</div></li></ol></div></div></div>

        </div>

    </div>

    <div class="section" id="zend.measure.creation.localized" name="zend.measure.creation.localized"><div class="info"><h1 class="title">ローカライズされた文字列をもとにした計測値</h1></div>

        

        <p class="para">
            各国固有の記法で文字列を入力した場合は、
            正しいロケールを知らない限りそれを正確に解釈できません。
            小数点に &quot;.&quot; を用い、三桁ごとの桁区切り文字に &quot;,&quot;
            を用いるのは英語では一般的です。しかし、その他の言語でもそうだとは限りません。
            例えば、英語の &quot;1,234.50&quot; は、ドイツ語では &quot;1.2345&quot; という意味になります。
            このような問題に対処するために、ロケールを考慮した
            <span class="classname">Zend_Measure_*</span> 系のクラスが用意されています。
            これは、言語や地域を指定することによって入力内容の曖昧さをなくし、
            意図した値として適切に解釈されるようにします。
        </p>

        <div class="example"><div class="info"><p><b>Example #3 ローカライズされた文字列</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'de'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mystring</span> = <span style="color: #ff0000;">&quot;1,234.50&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$unit</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Measure_Length<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mystring</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zend_Measure_Length::<span style="color: #006600;">STANDARD</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$locale</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$unit</span>; <span style="color: #808080; font-style: italic;">// 出力は &quot;1.234 m&quot; となります</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mystring</span> = <span style="color: #ff0000;">&quot;1,234.50&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$unit</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Measure_Length<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mystring</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zend_Measure_Length::<span style="color: #006600;">STANDARD</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'en_US'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$unit</span>; <span style="color: #808080; font-style: italic;">// 出力は &quot;1234.50 m&quot; となります</span></div></li></ol></div></div></div>

        </div>

        <p class="para">
            Zend Framework 1.7.0 以降では、<span class="classname">Zend_Measure</span>
            はアプリケーション単位でのロケールの使用にも対応します。
            そのためには、<span class="classname">Zend_Locale</span>
            のインスタンスを以下のようにレジストリに登録します。
            このようにすれば、同じロケールを何度も使用したいときに
            各インスタンスで毎回ロケールを設定する手間を省けます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 起動ファイルで</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'de_AT'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Registry::<span style="color: #006600;">set</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Zend_Locale'</span>, <span style="color: #0000ff;">$locale</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アプリケーションのどこかで</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$length</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Measure_Length<span style="color: #66cc66;">&#40;</span>Zend_Measure_Length::<span style="color: #006600;">METER</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    </div>

</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.measure.introduction.html">導入</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.measure.html">Zend_Measure</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.measure.output.html">計測値の出力</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.measure.html">Zend_Measure</a></li>
  <li><a href="zend.measure.introduction.html">導入</a></li>
  <li class="active"><a href="zend.measure.creation.html">計測値の作成</a></li>
  <li><a href="zend.measure.output.html">計測値の出力</a></li>
  <li><a href="zend.measure.edit.html">計測値の操作</a></li>
  <li><a href="zend.measure.types.html">計測値の型</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>