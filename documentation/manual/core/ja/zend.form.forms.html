<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_Form によるフォームの作成 - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.form.elements.html">Zend_Form_Element を用いたフォーム要素の作成</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.form.html">Zend_Form</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.form.decorators.html">Zend_Form_Decorator による独自のフォームマークアップの作成</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.form.forms" class="section"><div class="info"><h1 class="title">Zend_Form によるフォームの作成</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Form</span> クラスは、フォームの要素や
        表示グループ、そしてサブフォームの集約を行います。
        そして、その要素に対して次のような操作を行います。
    </p>

    <ul class="itemizedlist">
        <li class="listitem"><p class="para">
            入力の検証、エラーコードやメッセージの取得
        </p></li>

        <li class="listitem"><p class="para">
            値の集約 (すべての項目についてのフィルタリング前/
            フィルタリング後の値の取得など)
        </p></li>

        <li class="listitem"><p class="para">
            すべての項目についての反復処理。
            登録した順、あるいは各項目から取得した順序ヒントに従った順での処理
        </p></li>

        <li class="listitem"><p class="para">
            フォーム全体のレンダリング。デコレータでレンダリング方法をカスタマイズしたり、
            フォームの各項目を順次処理したりなど
        </p></li>
    </ul>

    <p class="para">
        <span class="classname">Zend_Form</span> で作成したフォームが複雑なものになることもありますが、
        シンプルなフォームで使用するのがもっともよくある使用例でしょう。
        手早いアプリケーション開発 (RAD) やプロトタイピングでの使用に最適です。
    </p>

    <p class="para">
        もっとも基本的な使用法は、単にフォームオブジェクトを作成するものです。
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 汎用的なフォームオブジェクト</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Form<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 独自のフォームオブジェクト</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span> = <span style="color: #000000; font-weight: bold;">new</span> My_Form<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li></ol></div></div></div>


    <p class="para">
        <span class="classname">Zend_Config</span> のインスタンスあるいは配列で設定を渡すことができます。
        これを使用すると、オブジェクトの状態を設定したり新しい要素を作成したりできます。
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 設定オプションを渡します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Form<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$config</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        <span class="classname">Zend_Form</span> は順次処理が可能です。
        各要素や表示グループ、サブフォームごとに処理できます。
        処理順は、登録した順番および各項目に設定されている順番となります。
        これは、各要素のレンダリングを適切な順で行いたいときに便利です。
    </p>

    <p class="para">
        <span class="classname">Zend_Form</span> は、要素や表示グループのファクトリとして使用できると同時に
        デコレータで自分自身をレンダリングすることもできます。
    </p>

    <div class="section" id="zend.form.forms.plugins" name="zend.form.forms.plugins"><div class="info"><h1 class="title">プラグインローダー</h1></div>
        
        <p class="para">
            <span class="classname">Zend_Form</span> では、
            <span class="classname">Zend_Loader_PluginLoader</span> を使用することで
            別の要素やデコレータの位置を指定できます。
            それぞれにプラグインローダーを関連づけることができ、
            汎用的なアクセサを使用してそれを取得したり変更したりします。
        </p>

        <p class="para">
            使用できるローダーの型は &#039;element&#039; と &#039;decorator&#039;
            です。さまざまなプラグインローダーメソッドが用意されています。
            型の名前は大文字小文字を区別しません。
        </p>

        <p class="para">
            プラグインローダーで使用できるメソッドは、次のとおりです。
        </p>

        <ul class="itemizedlist">
            <li class="listitem"><p class="para">
                 <span class="methodname">setPluginLoader($loader, $type)</span>:
                $loader はプラグインローダーオブジェクトで、type
                は先ほど説明した型のいずれかです。
                これは、指定した型のプラグインローダーを
                指定したローダーオブジェクトに設定します。
            </p></li>

            <li class="listitem"><p class="para">
                 <span class="methodname">getPluginLoader($type)</span>:
                $type に関連づけられたプラグインローダーを取得します。
            </p></li>

            <li class="listitem"><p class="para">
                 <span class="methodname">addPrefixPath($prefix, $path, $type = null)</span>:
                プレフィックスとパスの関連づけを、$type で指定したローダーに指定します。
                $type が <b><tt>NULL</tt></b> の場合はそのパスをすべてのローダーに追加します。この場合、
                プレフィックスの後に &quot;_Element&quot; および
                &quot;_Decorator&quot; を追加し、パスに &quot;Element/&quot; および
                &quot;Decorator/&quot; を追加します。追加のフォーム要素クラス群をすべて同じ階層に配置した場合は、
                このメソッドを使用すると簡単に基底プレフィックスを設定できます。
            </p></li>

            <li class="listitem"><p class="para">
                 <span class="methodname">addPrefixPaths(array $spec)</span>:
                複数のパスを、ひとつあるは複数のプラグインローダーに一度に追加します。
                配列の各要素は、キー &#039;path&#039;、&#039;prefix&#039; および
                &#039;type&#039; を持つ配列となります。
            </p></li>
        </ul>

        <p class="para">
            さらに、<span class="classname">Zend_Form</span>
            のインスタンスで作成したすべての要素や表示グループ用のプレフィックスパスを設定するには
            次のメソッドを使用します。
        </p>

        <ul class="itemizedlist">
            <li class="listitem"><p class="para">
                 <span class="methodname">addElementPrefixPath($prefix, $path, $type = null)</span>:
                 <span class="methodname">addPrefixPath()</span> と同じですが、
                クラスのプレフィックスとパスを指定しなければなりません。
                <code class="code">$type</code> を指定する場合は、それは
                <span class="classname">Zend_Form_Element</span>
                で指定したプラグインローダーの型のひとつでなければなりません。
                <code class="code">$type</code> にどんな値が指定できるのかについては <a href="zend.form.elements.html#zend.form.elements.loaders" class="link">要素のプラグインのセクション</a>
                を参照ください。<code class="code">$type</code> を省略した場合は、
                すべての型で用いる全般的なプレフィックスとみなします。
            </p></li>

            <li class="listitem"><p class="para">
                 <span class="methodname">addDisplayGroupPrefixPath($prefix, $path)</span>:
                 <span class="methodname">addPrefixPath()</span> と似ていますが、
                クラスのプレフィックスとパスを指定しなければなりません。
                しかし、表示グループではプラグインとして対応しているのはデコレータだけなので、
                <code class="code">$type</code> は不要です。
            </p></li>
        </ul>

        <p class="para">
            独自の要素やデコレータを使用すると、
            複数フォーム間で機能を共有したり
            独自の機能をカプセル化したりできるようになります。
            独自の要素を既存の標準クラスに置き換えて使用する例については、
            要素のドキュメントの中の
            <a href="zend.form.elements.html#zend.form.elements.loaders.customLabel" class="link">独自のラベルを作る例</a>
            を参照ください。
        </p>
    </div>

    <div class="section" id="zend.form.forms.elements" name="zend.form.forms.elements"><div class="info"><h1 class="title">要素</h1></div>
        
        <p class="para">
            <span class="classname">Zend_Form</span> では、フォームに要素を追加したり
            フォームから要素を削除したりするためのアクセサを提供しています。
            これらは要素オブジェクトのインスタンスを受け取ることもできますし、
            ファクトリとして要素オブジェクトのインスタンスを作成させることもできます。
        </p>

        <p class="para">
            要素を追加するもっとも基本的なメソッドが
             <span class="methodname">addElement()</span> です。
            このメソッドは、 <span class="classname">Zend_Form_Element</span> 型
            (あるいは <span class="classname">Zend_Form_Element</span> を継承したクラス) のオブジェクト
            あるいは新しい要素を作成するための引数
            (要素の型や名前、設定オプション) を受け取ります。
        </p>

        <p class="para">
            例を示します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 要素のインスタンスを使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$element</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Form_Element_Text<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addElement</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$element</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファクトリを使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Zend_Form_Element_Text 型で</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 'foo' という名前の要素を作成します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addElement</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'text'</span>, <span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 要素の label オプションを渡します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addElement</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'text'</span>, <span style="color: #ff0000;">'foo'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'label'</span> =&gt; <span style="color: #ff0000;">'Foo:'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: <span class="info"><b>addElement() における「流れるようなインターフェイス」の実装</b><br /></span>
            

            
                 <span class="methodname">addElement()</span> は「流れるようなインターフェイス」
                を実装しています。つまり、このメソッドは要素ではなく
                <span class="classname">Zend_Form</span> オブジェクトを返すということです。
                これによって、複数の addElement() メソッドやその他のフォームメソッド
                (<span class="classname">Zend_Form</span> のすべてのセッターは流れるようなインターフェイスを実装しています)
                を連結させることができます。
            <br />

            
                単に要素を返してほしい場合は、
                 <span class="methodname">createElement()</span> を使いましょう。
                概要は以下で説明します。しかし、
                 <span class="methodname">createElement()</span> は要素をフォームにアタッチしないことに注意しましょう。
            <br />

            
                内部的には、 <span class="methodname">addElement()</span> は実際には
                 <span class="methodname">createElement()</span> をコールして作成した要素をフォームにアタッチしています。
            <br />
        </p></blockquote>

        <p class="para">
            要素をフォームに追加したら、名前を指定してそれを取得できます。
            取得するには、 <span class="methodname">getElement()</span> メソッドを使用するか
            オブジェクトのプロパティとして要素にアクセスします。
            property:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// getElement():</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$foo</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getElement</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// オブジェクトのプロパティとして</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$foo</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">foo</span>;</div></li></ol></div></div></div>


        <p class="para">
            時には、フォームにアタッチせずに要素を作成したいこともあるでしょう
            (フォームに登録されているさまざまなプラグインパスを使いたいけれど、
            そのオブジェクトは後でサブフォームにアタッチしたい場合など)。
            そんな場合は  <span class="methodname">createElement()</span> メソッドを使用します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// $username は Zend_Form_Element_Text オブジェクトとなります</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$username</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">createElement</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'text'</span>, <span style="color: #ff0000;">'username'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <div class="section" id="zend.form.forms.elements.values" name="zend.form.forms.elements.values"><div class="info"><h1 class="title">値の設定と取得</h1></div>
            

            <p class="para">
                フォームの検証をすませたら、通常は値を取得することになるでしょう。
                その値を用いてデータベースの更新なりウェブサービスの操作なりといった作業を行います。
                すべての要素の値を取得するには  <span class="methodname">getValues()</span> を使用します。
                 <span class="methodname">getValue($name)</span> を使用すると、
                要素名を指定して特定の要素の値を取得できます。
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべての値を取得します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$values</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getValues</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 'foo' 要素の値のみを取得します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$value</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getValue</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                レンダリング前に、フォームに特定の値を設定したいこともあるでしょう。
                これを行うには  <span class="methodname">setDefaults()</span> メソッドあるいは
                 <span class="methodname">populate()</span> メソッドを使用します。
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setDefaults</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">populate</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                逆に、値を設定したり検証したりした後でフォームをクリアしたいこともあるでしょう。
                これを行うには  <span class="methodname">reset()</span> メソッドを使用します。
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">reset</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <div class="section" id="zend.form.forms.elements.global" name="zend.form.forms.elements.global"><div class="info"><h1 class="title">グローバルな操作</h1></div>
            

            <p class="para">
                時には、すべての要素に対して何らかの操作を行いたくなることもあります。
                ありがちな例としては、すべての要素に対してプラグインのプレフィックスを設定したり
                デコレータを設定したり、フィルタを設定したりといったものがあります。
                以下に例を示します。
            </p>

            <div class="example"><div class="info"><p><b>Example #1 すべての要素に対するプレフィックスパスの設定</b></p></div>
                

                <div class="example-contents"><p>
                    型を指定してすべての要素に対するプレフィックスパスを設定したり、
                    グローバルプレフィックスを使用したりする例です。
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// グローバルプレフィックスパスの設定:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// プレフィックス My_Foo_Filter、My_Foo_Validate、</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// My_Foo_Decorator のパスを作成します。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addElementPrefixPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'My_Foo'</span>, <span style="color: #ff0000;">'My/Foo/'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// フィルタのパスのみ:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addElementPrefixPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'My_Foo_Filter'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'My/Foo/Filter'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'filter'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// バリデータのパスのみ:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addElementPrefixPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'My_Foo_Validate'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'My/Foo/Validate'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'validate'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// デコレータのパスのみ:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addElementPrefixPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'My_Foo_Decorator'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'My/Foo/Decorator'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'decorator'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <div class="example"><div class="info"><p><b>Example #2 すべての要素に対するデコレータの設定</b></p></div>
                

                <div class="example-contents"><p>
                    すべての要素に対するデコレータを設定できます。
                     <span class="methodname">setElementDecorators()</span> に
                     <span class="methodname">setDecorators()</span>
                    と同じようなデコレータの配列を渡すと、
                    各要素にそれまで設定されていたすべてのデコレータを上書きします。
                    この例では、単純に ViewHelper デコレータと
                    Label デコレータを設定します。
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setElementDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'ViewHelper'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'Label'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <div class="example"><div class="info"><p><b>Example #3 いくつかの要素に対するデコレータの設定</b></p></div>
                

                <div class="example-contents"><p>
                    設定したい要素、あるいは設定したくない要素を指定することで、
                    一部の要素にだけデコレータを設定することもできます。
                     <span class="methodname">setElementDecorators()</span> の 2 番目の引数に要素名の配列を指定します。
                    デフォルトでは、ここで指定した要素にのみデコレータが設定されます。
                    3 番目の引数を渡すこともできます。
                    これは、設定「したい」要素なのか設定「したくない」
                    要素なのかを表すフラグとなります。
                    <b><tt>FALSE</tt></b> を渡すと、指定した
                    <em class="emphasis">以外の</em> すべての要素にデコレータを設定します。
                    このメソッドの標準的な使用法と同様、
                    各要素にそれまで設定されていたすべてのデコレータを上書きします。
                </p></div>

                <div class="example-contents"><p>
                    次の例は、
                    ViewHelper デコレータと Label デコレータを
                    要素 &#039;foo&#039; および &#039;bar&#039; に対してのみ使用するものです。
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setElementDecorators</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'ViewHelper'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Label'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'foo'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'bar'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


                <div class="example-contents"><p>
                    一方、この例では、ViewHelper デコレータと Label
                    デコレータを &#039;foo&#039; と &#039;bar&#039; <em class="emphasis">以外の</em>
                    すべての要素に対して使用します。
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setElementDecorators</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'ViewHelper'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Label'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'foo'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'bar'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

                <blockquote><p><b class="note">Note</b>: <span class="info"><b>要素によっては不適切なデコレータもある</b><br /></span>
                    

                    
                         <span class="methodname">setElementDecorators()</span>
                        はよい方法に見えますが、時には予期せぬ結果を引き起こすこともあります。
                        たとえば、ボタン系の要素 (Submit, Button, Reset)
                        では現在ラベルをボタンの値として使用しています。
                        そして ViewHelper デコレータや DtDdWrapper デコレータは、
                        余計なラベルやエラー、ヒントをレンダリングしないためにのみ用います。
                        上の例ではいくつかのラベルが重複してしまいます。
                    <br />

                    
                        先ほどの例に示したように、設定したい要素/したくない要素
                        を配列で指定するようにすれば、この問題を回避できます。
                    <br />

                    
                        したがって、このメソッドは注意して使うようにしましょう。
                        場合によっては、いくつかの要素を除外するか、
                        そののデコレータを変更して予期せぬ結果を防ぐ必要があります。
                    <br />
                </p></blockquote>

            <div class="example"><div class="info"><p><b>Example #4 すべての要素に対するフィルタの設定</b></p></div>
                

                <div class="example-contents"><p>
                    すべての要素に対して同じフィルタを適用したくなることもよくあります。
                    たとえば、すべての値を  <span class="methodname">trim()</span> するなどです。
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setElementFilters</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'StringTrim'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.form.forms.elements.methods" name="zend.form.forms.elements.methods"><div class="info"><h1 class="title">要素を操作するためのメソッド</h1></div>
            

            <p class="para">
                次のメソッドを使用して、要素を操作します。
            </p>

            <ul class="itemizedlist">
                <li class="listitem"><p class="para">
                     <span class="methodname">createElement($element, $name = null, $options = null)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addElement($element, $name = null, $options = null)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addElements(array $elements)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setElements(array $elements)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getElement($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getElements()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">removeElement($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">clearElements()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setDefaults(array $defaults)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setDefault($name, $value)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getValue($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getValues()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getUnfilteredValue($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getUnfilteredValues()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setElementFilters(array $filters)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setElementDecorators(array $decorators)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addElementPrefixPath($prefix, $path, $type = null)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addElementPrefixPaths(array $spec)</span>
                </p></li>
            </ul>
        </div>
    </div>

    <div class="section" id="zend.form.forms.displaygroups" name="zend.form.forms.displaygroups"><div class="info"><h1 class="title">表示グループ</h1></div>
        

        <p class="para">
            表示グループを使用すると、複数の要素を仮想的にグループ化して
            表示させることができます。
            フォーム内の各要素に対しては名前を指定してアクセスできますが、
            フォームの要素を順次処理したりレンダリングしたりするときは
            表示グループは一括して扱われます。
            表示グループのもっとも一般的な使用例は、
            フィールドセット内の要素をグループ化することです。
        </p>

        <p class="para">
            表示グループの基底クラスは <span class="classname">Zend_Form_DisplayGroup</span> です。
            このクラスのインスタンスを直接作成することもできますが、
            一般的には <span class="classname">Zend_Form</span> の
             <span class="methodname">addDisplayGroup()</span> メソッドでインスタンスを作成することになります。
            このメソッドの最初の引数には要素名の配列を渡し、
            表示グループの名前を 2 番目の引数で指定します。
            オプションの 3 番目の引数で、設定の配列や
            <span class="classname">Zend_Config</span> オブジェクトを渡すこともできます。
        </p>

        <p class="para">
            &#039;username&#039; と &#039;password&#039; という要素がすでにフォームに登録済みである場合に、
            次のコードを使用するとそれらを表示グループ
            &#039;login&#039; にまとめることができます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addDisplayGroup</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'username'</span>, <span style="color: #ff0000;">'password'</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #ff0000;">'login'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            表示グループにアクセスするには、
             <span class="methodname">getDisplayGroup()</span> メソッドを使用するか
            あるいは表示グループ名を指定します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// getDisplayGroup() の使用</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$login</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getDisplayGroup</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'login'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// オーバーロードの使用</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$login</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">login</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: <span class="info"><b>読み込み不要なデフォルトのデコレータ</b><br /></span>
            

            
                デフォルトのデコレータは、
                オブジェクトの初期化時に読み込まれるようになっています。
                この機能を無効にするには、表示グループの作成時にオプション
                &#039;disableLoadDefaultDecorators&#039; を指定します。
            <br />

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addDisplayGroup</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span>, <span style="color: #ff0000;">'bar'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'foobar'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'disableLoadDefaultDecorators'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            
                このオプションは、他のオプションと混用することもできます。
                その場合はオプションの配列や <span class="classname">Zend_Config</span>
                オブジェクトを使用します。
            <br />
        </p></blockquote>

        <div class="section" id="zend.form.forms.displaygroups.global" name="zend.form.forms.displaygroups.global"><div class="info"><h1 class="title">グローバルな操作</h1></div>
            

            <p class="para">
                要素と同様、表示グループに対しても全体に共通の操作があるでしょう。
                デコレータを設定したり、デコレータを探すプラグインパスを設定したりといったものです。
            </p>

            <div class="example"><div class="info"><p><b>Example #5 すべての表示グループに対するデコレータプレフィックスパスの設定</b></p></div>
                

                <div class="example-contents"><p>
                    デフォルトでは、表示グループはフォームが使用しているデコレータパスを継承します。
                    別の場所を探すようにしたい場合は
                     <span class="methodname">addDisplayGroupPrefixPath()</span> メソッドを使用します。
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addDisplayGroupPrefixPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'My_Foo_Decorator'</span>, <span style="color: #ff0000;">'My/Foo/Decorator'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <div class="example"><div class="info"><p><b>Example #6 すべての表示グループに対するデコレータの設定</b></p></div>
                

                <div class="example-contents"><p>
                    すべての表示グループに対するデコレータを設定できます。
                     <span class="methodname">setDisplayGroupDecorators()</span> に
                     <span class="methodname">setDecorators()</span>
                    と同じようなデコレータの配列を渡すと、
                    各表示グループにそれまで設定されていたすべてのデコレータを上書きします。
                    この例では、単純に fieldset デコレータ
                    (FormElements デコレータは、要素を順次処理するために必須です)
                    を設定します。
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setDisplayGroupDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'FormElements'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'Fieldset'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.form.forms.displaygroups.customClasses" name="zend.form.forms.displaygroups.customClasses"><div class="info"><h1 class="title">独自の表示グループクラスの使用</h1></div>
            

            <p class="para">
                デフォルトでは、<span class="classname">Zend_Form</span> は
                表示グループ用に <span class="classname">Zend_Form_DisplayGroup</span>
                クラスを使用します。
                このクラスを継承すれば、独自の機能を持つクラスを作成できます。
                 <span class="methodname">addDisplayGroup()</span>
                には具象インスタンスを渡すことはできませんが、
                どのクラスを使用するのかをオプションで指定できます。
                このときに使用するキーは &#039;displayGroupClass&#039; です。
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 'My_DisplayGroup' クラスを使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addDisplayGroup</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'username'</span>, <span style="color: #ff0000;">'password'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'user'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'displayGroupClass'</span> =&gt; <span style="color: #ff0000;">'My_DisplayGroup'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                そのクラスがまだ読み込まれていない場合は、<span class="classname">Zend_Form</span>
                は <span class="classname">Zend_Loader</span> を使ってクラスを読み込みます。
            </p>

            <p class="para">
                デフォルトの表示グループクラスを指定し、
                そのフォームオブジェクトで作成するすべての表示グループで
                同じクラスを使わせることもできます。
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべての表示グループで 'My_DisplayGroup' クラスを使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setDefaultDisplayGroupClass</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'My_DisplayGroup'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                これは、設定項目
                &#039;defaultDisplayGroupClass&#039; で指定することもできます。
                そうすれば、事前にこのクラスが読み込まれて
                すべての表示グループでこのクラスを使うようになります。
            </p>
        </div>

        <div class="section" id="zend.form.forms.displaygroups.interactionmethods" name="zend.form.forms.displaygroups.interactionmethods"><div class="info"><h1 class="title">表示グループを操作するためのメソッド</h1></div>
            

            <p class="para">
                次のメソッドを使用して、表示グループを操作します。
            </p>

            <ul class="itemizedlist">
                <li class="listitem"><p class="para">
                     <span class="methodname">addDisplayGroup(array $elements, $name, $options = null)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addDisplayGroups(array $groups)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setDisplayGroups(array $groups)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getDisplayGroup($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getDisplayGroups()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">removeDisplayGroup($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">clearDisplayGroups()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setDisplayGroupDecorators(array $decorators)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addDisplayGroupPrefixPath($prefix, $path)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setDefaultDisplayGroupClass($class)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getDefaultDisplayGroupClass($class)</span>
                </p></li>
            </ul>
        </div>

        <div class="section" id="zend.form.forms.displaygroups.methods" name="zend.form.forms.displaygroups.methods"><div class="info"><h1 class="title">Zend_Form_DisplayGroup のメソッド</h1></div>
            

            <p class="para">
                <span class="classname">Zend_Form_DisplayGroup</span> には次のようなメソッドがあります。
                タイプ別にまとめます。
            </p>

            <ul class="itemizedlist">
                <li class="listitem"><p class="para">設定</p>
                    <ul class="itemizedlist">
                        <li class="listitem"><p class="para"> <span class="methodname">setOptions(array $options)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setConfig(Zend_Config $config)</span></p></li>
                    </ul>
                </li>

                <li class="listitem"><p class="para">メタデータ</p>
                    <ul class="itemizedlist">
                        <li class="listitem"><p class="para"> <span class="methodname">setAttrib($key, $value)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">addAttribs(array $attribs)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setAttribs(array $attribs)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getAttrib($key)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getAttribs()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">removeAttrib($key)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">clearAttribs()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setName($name)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getName()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setDescription($value)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getDescription()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setLegend($legend)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getLegend()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setOrder($order)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getOrder()</span></p></li>
                    </ul>
                </li>

                <li class="listitem"><p class="para">要素</p>
                    <ul class="itemizedlist">
                        <li class="listitem"><p class="para"> <span class="methodname">createElement($type, $name, array $options = array())</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">addElement($typeOrElement, $name, array $options = array())</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">addElements(array $elements)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setElements(array $elements)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getElement($name)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getElements()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">removeElement($name)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">clearElements()</span></p></li>
                    </ul>
                </li>

                <li class="listitem"><p class="para">プラグインローダー</p>
                    <ul class="itemizedlist">
                        <li class="listitem"><p class="para"> <span class="methodname">setPluginLoader(Zend_Loader_PluginLoader $loader)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getPluginLoader()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">addPrefixPath($prefix, $path)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">addPrefixPaths(array $spec)</span></p></li>
                    </ul>
                </li>

                <li class="listitem"><p class="para">デコレータ</p>
                    <ul class="itemizedlist">
                        <li class="listitem"><p class="para"> <span class="methodname">addDecorator($decorator, $options = null)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">addDecorators(array $decorators)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setDecorators(array $decorators)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getDecorator($name)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getDecorators()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">removeDecorator($name)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">clearDecorators()</span></p></li>
                    </ul>
                </li>

                <li class="listitem"><p class="para">レンダリング</p>
                    <ul class="itemizedlist">
                        <li class="listitem"><p class="para"> <span class="methodname">setView(Zend_View_Interface $view = null)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getView()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">render(Zend_View_Interface $view = null)</span></p></li>
                    </ul>
                </li>

                <li class="listitem"><p class="para">I18n</p>
                    <ul class="itemizedlist">
                        <li class="listitem"><p class="para"> <span class="methodname">setTranslator(Zend_Translate_Adapter $translator = null)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">getTranslator()</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">setDisableTranslator($flag)</span></p></li>

                        <li class="listitem"><p class="para"> <span class="methodname">translatorIsDisabled()</span></p></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <div class="section" id="zend.form.forms.subforms" name="zend.form.forms.subforms"><div class="info"><h1 class="title">サブフォーム</h1></div>
        

        <p class="para">
            サブフォームの役割は、次のようなものです。
        </p>

        <ul class="itemizedlist">
            <li class="listitem"><p class="para">
                論理的な要素グループの作成。
                サブフォームは単なるフォームであり、
                サブフォームを独立したエンティティとして検証できます。
            </p></li>

            <li class="listitem"><p class="para">
                複数ページにまたがるフォームの作成。
                サブフォームは単なるフォームなので、
                ページごとに別々のサブフォームを表示させて複数ページのフォームを作成し、
                各ページで独自のバリデーションを行うことができます。
                すべてのサブフォームの検証に成功した時点ではじめて
                フォームの検証が完了したことになります。
            </p></li>

            <li class="listitem"><p class="para">
                表示のグループ化。
                表示グループと同様、サブフォームについても
                フォーム内でのレンダリングの際にはひとつの要素として扱われます。
                しかし注意しましょう。
                親フォームからはサブフォームの要素にはアクセスできません。
            </p></li>
        </ul>

        <p class="para">
            サブフォームは <span class="classname">Zend_Form</span> のオブジェクトです。一般的には
            <span class="classname">Zend_Form_SubForm</span> のオブジェクトとなります。
            後者のクラスには、大きなフォームに含めるのに適したデコレータが含まれています
            (<acronym class="acronym">HTML</acronym> の form タグをレンダリングせず、要素をグループ化するものです)。
            サブフォームをアタッチするには、単にそれを要素に追加して名前を指定するだけです。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addSubForm</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$subForm</span>, <span style="color: #ff0000;">'subform'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            サブフォームを取得するには、
             <span class="methodname">getSubForm($name)</span> を使用するかあるいはサブフォームの名前を使用します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// getSubForm() の使用</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$subForm</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getSubForm</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'subform'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// オーバーロードの使用</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$subForm</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">subform</span>;</div></li></ol></div></div></div>


        <p class="para">
            サブフォームは、親フォームの要素のひとつとして順次処理できます。
            サブフォーム内の要素は処理できません。
        </p>

        <div class="section" id="zend.form.forms.subforms.global" name="zend.form.forms.subforms.global"><div class="info"><h1 class="title">グローバルな操作</h1></div>
            

            <p class="para">
                要素や表示グループと同様、サブフォームに対しても全体に共通の操作があるでしょう。
                しかし、表示グループや要素とは異なり、
                サブフォームは親フォームのほとんどの機能を継承しています。
                グローバルな操作として本当に必要なのは、サブフォーム用のデコレータの設定くらいです。
                そんな場合には  <span class="methodname">setSubFormDecorators()</span>
                メソッドを使用します。次の例では、すべてのサブフォームに対して
                単純に fieldset デコレータを設定します
                (FormElements デコレータは、要素を順次処理するために必須です)。
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setSubFormDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'FormElements'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'Fieldset'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <div class="section" id="zend.form.forms.subforms.methods" name="zend.form.forms.subforms.methods"><div class="info"><h1 class="title">サブフォームを操作するためのメソッド</h1></div>
            

            <p class="para">
                次のメソッドを使用して、サブフォームを操作します。
            </p>

            <ul class="itemizedlist">
                <li class="listitem"><p class="para">
                     <span class="methodname">addSubForm(Zend_Form $form, $name, $order = null)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addSubForms(array $subForms)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setSubForms(array $subForms)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getSubForm($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getSubForms()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">removeSubForm($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">clearSubForms()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setSubFormDecorators(array $decorators)</span>
                </p></li>
            </ul>
        </div>
    </div>

    <div class="section" id="zend.form.forms.metadata" name="zend.form.forms.metadata"><div class="info"><h1 class="title">メタデータおよび属性</h1></div>
        

        <p class="para">
            フォームで一番大切なのはフォームが含む要素ですが、
            フォームにはそれ以外のメタデータも含まれます。たとえばフォームの名前
            (この名前は、<acronym class="acronym">HTML</acronym> のマークアップ時に ID として用いられます)
            やアクション、そしてメソッドなどです。
            要素や表示グループ、サブフォームの数も含まれます。
            それ以外にも任意のメタデータを含めることができます
            (通常は、form タグで指定する <acronym class="acronym">HTML</acronym> 属性などをここに含めます)。
        </p>

        <p class="para">
            フォームの名前を設定したり取得したりするには name アクセサを使用します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 名前を設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setName</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'registration'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 名前を取得します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$name</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getName</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            アクション (フォームを送信したときに進む URL)
            やメソッド (送信する方法。たとえば &#039;POST&#039; あるいは &#039;<b><tt>GET</tt></b>&#039;)
            を設定するには、それぞれ action アクセサおよび
            method アクセサを使用します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アクションとメソッドを設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setAction</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/user/login'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">setMethod</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'post'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            フォームのエンコード形式を設定するには
            enctype アクセサを使用します。
            <span class="classname">Zend_Form</span> では 2 つの定数
            <b><tt>Zend_Form::ENCTYPE_URLENCODED</tt></b> と
            <b><tt>Zend_Form::ENCTYPE_MULTIPART</tt></b> を定義しており、
            これらはそれぞれ &#039;application/x-www-form-urlencoded&#039; と
            &#039;multipart/form-data&#039; に対応します。
            しかし、これ以外にも任意のエンコード形式を指定できます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アクションとメソッド、そして enctype を設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setAction</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/user/login'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">setMethod</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'post'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">setEnctype</span><span style="color: #66cc66;">&#40;</span>Zend_Form::<span style="color: #006600;">ENCTYPE_MULTIPART</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: 
            
                メソッドやアクション、enctype はレンダリングの際に内部的に使われるものであり、
                バリデーション用のものではありません。
            <br />
        </p></blockquote>

        <p class="para">
            <span class="classname">Zend_Form</span> は <span class="classname">Countable</span>
            インターフェイスを実装しており、count 関数の引数として使用できます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$numItems</span> = <a href="http://www.php.net/count"><span style="color: #000066;">count</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$form</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            任意のメタデータを設定するには attribs アクセサを使用します。
            <span class="classname">Zend_Form</span> ではオーバーロードを使用して
            要素や表示グループそしてサブフォームにアクセスしているので、
            これがメタデータにアクセスするための唯一の方法となります。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 属性を設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setAttrib</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'class'</span>, <span style="color: #ff0000;">'zend-form'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addAttribs</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'id'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'registration'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'onSubmit'</span> =&gt; <span style="color: #ff0000;">'validate(this)'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 属性を取得します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$class</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getAttrib</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'class'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$attribs</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getAttribs</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 属性を削除します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">removeAttrib</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'onSubmit'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべての属性を削除します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">clearAttribs</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.form.forms.decorators" name="zend.form.forms.decorators"><div class="info"><h1 class="title">デコレータ</h1></div>
        

        <p class="para">
            フォームのマークアップを作成するのは手間のかかる作業です。
            特に、検証エラーの表示や値の送信などの決まりきった処理を何度も行うのは大変なことです。
            この問題に対する <span class="classname">Zend_Form</span>
            からの回答が <em class="emphasis">デコレータ</em> です。
        </p>

        <p class="para">
            <span class="classname">Zend_Form</span> オブジェクトのデコレータを使用して、
            フォームをレンダリングします。
            FormElements デコレータは、フォームのすべての項目
            (要素、表示グループ、サブフォーム)
            を順次処理し、それらをレンダリングした結果を返します。
            それ以外のデコレータを使用して、コンテンツをラップしたり
            前後に何かを追加したりできます。
        </p>

        <p class="para">
            <span class="classname">Zend_Form</span> のデフォルトのデコレータは、FormElements と
            HtmlTag (定義リストによるラッピングをします)、そして Form です。
            以下のコードと同様です。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">setDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'FormElements'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'HtmlTag'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'tag'</span> =&gt; <span style="color: #ff0000;">'dl'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'Form'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            これは、次のような出力をします。
        </p>

        <div class="programlisting html"><div class="htmlcode"><div style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;form action=&quot;/form/action&quot; method=&quot;post&quot;&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;dl&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">...</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;/dl&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;/form&gt;</div></li></ol></div></div></div>


        <p class="para">
            フォームオブジェクトに設定した任意の属性は、
            <acronym class="acronym">HTML</acronym> の <em class="emphasis">&lt;form&gt;</em> タグの属性となります。
        </p>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>読み込み不要なデフォルトのデコレータ</b><br /></span>
            

            
                デフォルトのデコレータは、
                オブジェクトの初期化時に読み込まれるようになっています。
                この機能を無効にするには、コンストラクタでオプション
                &#039;disableLoadDefaultDecorators&#039; を指定します。
            <br />

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Form<span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'disableLoadDefaultDecorators'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            
                このオプションは、他のオプションと混用することもできます。
                その場合はオプションの配列や <span class="classname">Zend_Config</span>
                オブジェクトを使用します。
            <br />
        </p></blockquote>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>同じ型の複数のデコレータの使用法</b><br /></span>
            

            
                内部的には、<span class="classname">Zend_Form</span>
                はデコレータのクラスをもとにデコレータを取得しています。
                その結果、同じ型のデコレータを複数使うことができなくなります。
                同じ型のデコレータを複数指定すると、
                後から指定したものが先に指定したものを上書きします。
            <br />

            
                これを回避するにはエイリアスを使用します。
                デコレータやデコレータ名を  <span class="methodname">addDecorator()</span>
                の最初の引数として渡すのではなく、ひとつの要素からなる配列を渡します。
                この配列には、デコレータオブジェクトあるいはデコレータ名を指すエイリアスを指定します。
            <br />

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 'FooBar' へのエイリアス</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addDecorator</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FooBar'</span> =&gt; <span style="color: #ff0000;">'HtmlTag'</span><span style="color: #66cc66;">&#41;</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'tag'</span> =&gt; <span style="color: #ff0000;">'div'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 後で、このように取得できます</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span> = <span style="color: #0000ff;">$element</span>-&gt;<span style="color: #006600;">getDecorator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FooBar'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            
                 <span class="methodname">addDecorators()</span> メソッドおよび
                 <span class="methodname">setDecorators()</span> メソッドでは、
                デコレータを表す配列を &#039;decorator&#039; オプションに渡す必要があります。
            <br />

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ふたつの 'HtmlTag' デコレータを使用するため、片方に 'FooBar' というエイリアスを指定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">addDecorators</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'HtmlTag'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'tag'</span> =&gt; <span style="color: #ff0000;">'div'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'decorator'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FooBar'</span> =&gt; <span style="color: #ff0000;">'HtmlTag'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'options'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'tag'</span> =&gt; <span style="color: #ff0000;">'dd'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 後で、このように取得できます</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$htmlTag</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getDecorator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'HtmlTag'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$fooBar</span>&nbsp; = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getDecorator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FooBar'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </p></blockquote>

        <p class="para">
            独自のデコレータを使用してフォームを作成することもできます。
            一般的な使用例としては、作成したい <acronym class="acronym">HTML</acronym> が厳密に決まっている場合などがあります。
            デコレータでそれとまったく同じ <acronym class="acronym">HTML</acronym> を作成し、単純にそれを返せばいいのです。
            個々の要素や表示グループに対してもそれぞれデコレータを使用できます。
        </p>

        <p class="para">
            デコレータ関連のメソッドを以下にまとめます。
        </p>

        <ul class="itemizedlist">
                <li class="listitem"><p class="para">
                     <span class="methodname">addDecorator($decorator, $options = null)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addDecorators(array $decorators)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setDecorators(array $decorators)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getDecorator($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getDecorators()</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">removeDecorator($name)</span>
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">clearDecorators()</span>
                </p></li>
        </ul>

        <p class="para">
            <span class="classname">Zend_Form</span> は、
            オーバーロードを使用して特定のデコレータをレンダリングすることもできます。
            &#039;render&#039; で始まる名前のメソッドを  <span class="methodname">__call()</span>
            で捕捉し、メソッド名の残りの部分にもとづいてデコレータを探します。
            見つかった場合は、そのデコレータ
            <em class="emphasis">だけ</em> をレンダリングします。
            引数を渡すと、それがデコレータの
             <span class="methodname">render()</span> メソッドにコンテンツとして渡されます。次の例を参照ください。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// FormElements デコレータのみをレンダリングします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">renderFormElements</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// fieldset デコレータのみ、コンテンツを渡してレンダリングします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">renderFieldset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;&lt;p&gt;This is fieldset content&lt;/p&gt;&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            デコレータが存在しない場合は、例外が発生します。
        </p>
    </div>

    <div class="section" id="zend.form.forms.validation" name="zend.form.forms.validation"><div class="info"><h1 class="title">バリデーション</h1></div>
        

        <p class="para">
            フォームの主な使用法は、送信されたデータを検証することです。
            <span class="classname">Zend_Form</span> は、フォーム全体あるいはその一部を一度に検証したり、
            XmlHttpRequests (AJAX) のレスポンスを自動的に検証したりできます。
            送信されたデータが無効な場合は、
            要素やサブフォームについて
            検証エラーのコードやメッセージを取得するメソッドが用意されています。
        </p>

        <p class="para">
            フォーム全体のバリデーションを行うには  <span class="methodname">isValid()</span> メソッドを使用します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>!<span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">isValid</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$_POST</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// 検証に失敗しました</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
             <span class="methodname">isValid()</span> はすべての必須要素の検証を行います。
            また非必須要素の中で値が送信された要素についても検証します。
        </p>

        <p class="para">
            時には一部のデータだけを検証したいこともあるでしょう。そんな場合には
             <span class="methodname">isValidPartial($data)</span> を使用します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>!<span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">isValidPartial</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// 検証に失敗しました</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
             <span class="methodname">isValidPartial()</span> は、
            data の項目にマッチする要素についてのみ検証を行います。
            マッチする要素がなかった場合は処理をスキップします。
        </p>

        <p class="para">
            <acronym class="acronym">AJAX</acronym> リクエストの要素や要素グループを検証する際は、
            通常はフォームの一部を検証してその結果を <acronym class="acronym">JSON</acronym> で返すことになります。
             <span class="methodname">processAjax()</span> が、まさにその作業を行うメソッドです。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$json</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">processAjax</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            こうすれば、単純に <acronym class="acronym">JSON</acronym> レスポンスをクライアントに返すことができます。
            フォームの検証に成功した場合は、この結果は <b><tt>TRUE</tt></b> となります。
            失敗した場合は、キーとメッセージのペアを含む javascript
            オブジェクトを返します。個々の &#039;message&#039;
            が検証エラーメッセージの配列となります。
        </p>

        <p class="para">
            フォームの検証に失敗した場合は、エラーコードとエラーメッセージをそれぞれ
             <span class="methodname">getErrors()</span> と
             <span class="methodname">getMessages()</span> で取得できます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$codes</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getErrors</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$messages</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getMessages</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: 
            
                 <span class="methodname">getMessages()</span> が返すメッセージは エラーコード/エラーメッセージ
                の配列なので、 <span class="methodname">getErrors()</span> は通常は不要です。
            <br />
        </p></blockquote>

        <p class="para">
            個々の要素のコードとエラーメッセージを取得するには、
            それぞれのメソッドに要素名を渡します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$codes</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getErrors</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'username'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$messages</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getMessages</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'username'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: 
            
                注意: 要素を検証する際、<span class="classname">Zend_Form</span> は各要素の
                 <span class="methodname">isValid()</span> メソッドに 2 番目の引数を渡します。
                これは検証対象のデータの配列です。
                これを使用すると、他の要素の入力内容をもとにした検証を
                各要素で行うことができます。
                例としては、「パスワード」欄と「パスワード（確認）」
                があるユーザ登録フォームがあります。「パスワード」
                要素の検証には「パスワード（確認）」の入力内容を使用することになるでしょう。
            <br />
        </p></blockquote>

        <div class="section" id="zend.form.forms.validation.errors" name="zend.form.forms.validation.errors"><div class="info"><h1 class="title">独自のエラーメッセージ</h1></div>
            

            <p class="para">
                時には、要素にアタッチされたバリデータが生成するエラーメッセージではなく
                独自のエラーメッセージを指定したくなることもあるでしょう。
                さらに、時には自分自身でフォームを無効だとマークしたいこともあるでしょう。
                次のメソッドでこの機能を使用できます。
            </p>

            <ul class="itemizedlist">
                <li class="listitem"><p class="para">
                     <span class="methodname">addErrorMessage($message)</span>:
                    フォームの検証エラーの際に表示するエラーメッセージを追加します。
                    複数回コールすると、新しいメッセージはスタックに追加されます。
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addErrorMessages(array $messages)</span>:
                    フォームの検証エラーの際に表示する複数のエラーメッセージを追加します。
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setErrorMessages(array $messages)</span>:
                    フォームの検証エラーの際に表示する複数のエラーメッセージを追加します。
                    それまでに設定されていたすべてのメッセージを上書きします。
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">getErrorMessages()</span>:
                    定義済みのカスタムエラーメッセージの一覧を取得します。
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">clearErrorMessages()</span>:
                    定義済みのカスタムエラーメッセージをすべて削除します。
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">markAsError()</span>:
                    検証に失敗したものとしてフォームにマークします。
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addError($message)</span>:
                    エラーメッセージをカスタムエラーメッセージスタックに追加し、
                    フォームを無効とマークします。
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">addErrors(array $messages)</span>:
                    複数のエラーメッセージをカスタムエラーメッセージスタックに追加し、
                    フォームを無効とマークします。
                </p></li>

                <li class="listitem"><p class="para">
                     <span class="methodname">setErrors(array $messages)</span>:
                    指定したメッセージでカスタムエラーメッセージスタックを上書きし、
                    フォームを無効とマークします。
                </p></li>
            </ul>

            <p class="para">
                この方式で設定したすべてのエラーは翻訳されることになります。
            </p>
        </div>

        <div class="section" id="zend.form.forms.validation.values" name="zend.form.forms.validation.values"><div class="info"><h1 class="title">正しい値だけを取得</h1></div>
            

            
            <p class="para">
                There are scenarios when you want to allow your user to work on a valid form
                in several steps. Meanwhile you allow the user to save the form with any
                set of values inbetween. Then if all the data is specified you can transfer
                the model from the building or prototying stage to a valid stage.
            </p>

            <p class="para">
                You can retrieve all the valid values that match the submitted data by calling:
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validValues</span> = <span style="color: #0000ff;">$form</span>-&gt;<span style="color: #006600;">getValidValues</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$_POST</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.form.forms.methods" name="zend.form.forms.methods"><div class="info"><h1 class="title">メソッド</h1></div>
        

        <p class="para">
            以下の一覧は、<span class="classname">Zend_Form</span> のメソッドをタイプ別にまとめたものです。
        </p>

        <ul class="itemizedlist">
            <li class="listitem"><p class="para">設定</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">setOptions(array $options)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setConfig(Zend_Config $config)</span></p></li>
                </ul>
            </li>

            <li class="listitem"><p class="para">プラグインローダーおよびパス</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">setPluginLoader(Zend_Loader_PluginLoader_Interface $loader, $type = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getPluginLoader($type = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addPrefixPath($prefix, $path, $type = null) </span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addPrefixPaths(array $spec)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addElementPrefixPath($prefix, $path, $type = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addElementPrefixPaths(array $spec)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addDisplayGroupPrefixPath($prefix, $path)</span></p></li>
                </ul>
            </li>

            <li class="listitem"><p class="para">メタデータ</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">setAttrib($key, $value)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addAttribs(array $attribs)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setAttribs(array $attribs)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getAttrib($key)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getAttribs()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">removeAttrib($key)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">clearAttribs()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setAction($action)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getAction()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setMethod($method)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getMethod()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setName($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getName()</span></p></li>
                </ul>
            </li>

            <li class="listitem"><p class="para">要素</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">addElement($element, $name = null, $options = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addElements(array $elements)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setElements(array $elements)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getElement($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getElements()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">removeElement($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">clearElements()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setDefaults(array $defaults)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setDefault($name, $value)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getValue($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getValues()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getUnfilteredValue($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getUnfilteredValues()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setElementFilters(array $filters)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setElementDecorators(array $decorators)</span></p></li>
                </ul>
            </li>

            <li class="listitem"><p class="para">サブフォーム</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">addSubForm(Zend_Form $form, $name, $order = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addSubForms(array $subForms)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setSubForms(array $subForms)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getSubForm($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getSubForms()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">removeSubForm($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">clearSubForms()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setSubFormDecorators(array $decorators)</span></p></li>
                </ul>
            </li>

            <li class="listitem"><p class="para">表示グループ</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">addDisplayGroup(array $elements, $name, $options = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addDisplayGroups(array $groups)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setDisplayGroups(array $groups)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getDisplayGroup($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getDisplayGroups()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">removeDisplayGroup($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">clearDisplayGroups()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setDisplayGroupDecorators(array $decorators)</span></p></li>
                </ul>
            </li>

            <li class="listitem"><p class="para">検証</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">populate(array $values)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">isValid(array $data)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">isValidPartial(array $data)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">processAjax(array $data)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">persistData()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getErrors($name = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getMessages($name = null)</span></p></li>
                </ul>
            </li>

            <li class="listitem"><p class="para">レンダリング</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">setView(Zend_View_Interface $view = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getView()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addDecorator($decorator, $options = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">addDecorators(array $decorators)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setDecorators(array $decorators)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getDecorator($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getDecorators()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">removeDecorator($name)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">clearDecorators()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">render(Zend_View_Interface $view = null)</span></p></li>
                </ul>
            </li>

            <li class="listitem"><p class="para">I18n</p>
                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"> <span class="methodname">setTranslator(Zend_Translate_Adapter $translator = null)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">getTranslator()</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">setDisableTranslator($flag)</span></p></li>

                    <li class="listitem"><p class="para"> <span class="methodname">translatorIsDisabled()</span></p></li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="section" id="zend.form.forms.config" name="zend.form.forms.config"><div class="info"><h1 class="title">設定</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Form</span> は、
             <span class="methodname">setOptions()</span> や  <span class="methodname">setConfig()</span> を用いて
            (あるいはコンストラクタでオプションや
            <span class="classname">Zend_Config</span> オブジェクトを渡して)
            さまざまに設定できます。
            これらのメソッドを使用して、フォームの要素や表示グループ、デコレータ、
            そしてメタデータを設定できます。
        </p>

        <p class="para">
            全般的なルールとして、もし &#039;set&#039; + オプションのキー
            という名前のメソッドが <span class="classname">Zend_Form</span>
            にあった場合は、そのメソッドを使用するとオプションを設定できます。
            アクセサが存在しない場合は
            キーが属性への参照とみなされ、
             <span class="methodname">setAttrib()</span> に渡されます。
        </p>

        <p class="para">
            このルールには、次のような例外があります。
        </p>

        <ul class="itemizedlist">
            <li class="listitem"><p class="para">
                    <span class="property">prefixPath</span> は
                     <span class="methodname">addPrefixPaths()</span> に渡されます。
            </p></li>

            <li class="listitem"><p class="para">
                <span class="property">elementPrefixPath</span> は
                 <span class="methodname">addElementPrefixPaths()</span> に渡されます。
            </p></li>

            <li class="listitem"><p class="para">
                <span class="property">displayGroupPrefixPath</span> は
                 <span class="methodname">addDisplayGroupPrefixPaths()</span> に渡されます。
            </p></li>

            <li class="listitem">
                <p class="para">以下のセッターはこの方式では設定できません。</p>

                <ul class="itemizedlist">
                    <li class="listitem"><p class="para"><span class="property">setAttrib (ただし、setAttribs は動作します)</span></p></li>

                    <li class="listitem"><p class="para"><span class="property">setConfig</span></p></li>

                    <li class="listitem"><p class="para"><span class="property">setDefault</span></p></li>

                    <li class="listitem"><p class="para"><span class="property">setOptions</span></p></li>

                    <li class="listitem"><p class="para"><span class="property">setPluginLoader</span></p></li>

                    <li class="listitem"><p class="para"><span class="property">setSubForms</span></p></li>

                    <li class="listitem"><p class="para"><span class="property">setTranslator</span></p></li>

                    <li class="listitem"><p class="para"><span class="property">setView</span></p></li>
                </ul>
            </li>
        </ul>

        <p class="para">
            例として、すべての型の設定データを渡すファイルを見てみましょう。
        </p>

        <div class="programlisting ini"><div class="inicode"><div class="ini" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000066; font-weight:bold;"><span style="">&#91;</span>element<span style="">&#93;</span></span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000099;">name </span>= <span style="color: #933;">&quot;registration&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000099;">action </span>= <span style="color: #933;">&quot;/user/register&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000099;">method </span>= <span style="color: #933;">&quot;post&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">attribs.<span style="color: #000099;">class </span>= <span style="color: #933;">&quot;zend_form&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">attribs.<span style="color: #000099;">onclick </span>= <span style="color: #933;">&quot;validate(this)&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000099;">disableTranslator </span>=<span style="color: #660066;"> <span style="">0</span></span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">prefixPath.element.<span style="color: #000099;">prefix </span>= <span style="color: #933;">&quot;My_Element&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">prefixPath.element.<span style="color: #000099;">path </span>= <span style="color: #933;">&quot;My/Element/&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">elementPrefixPath.validate.<span style="color: #000099;">prefix </span>= <span style="color: #933;">&quot;My_Validate&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">elementPrefixPath.validate.<span style="color: #000099;">path </span>= <span style="color: #933;">&quot;My/Validate/&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">displayGroupPrefixPath.<span style="color: #000099;">prefix </span>= <span style="color: #933;">&quot;My_Group&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">displayGroupPrefixPath.<span style="color: #000099;">path </span>= <span style="color: #933;">&quot;My/Group/&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">elements.username.<span style="color: #000099;">type </span>= <span style="color: #933;">&quot;text&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">elements.username.options.<span style="color: #000099;">label </span>= <span style="color: #933;">&quot;Username&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">elements.username.options.validators.alpha.<span style="color: #000099;">validator </span>= <span style="color: #933;">&quot;Alpha&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">elements.username.options.filters.<span style="color: #000099;">lcase </span>= <span style="color: #933;">&quot;StringToLower&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #666666; font-style: italic;">; more elements, of course...</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">elementFilters.<span style="color: #000099;">trim </span>= <span style="color: #933;">&quot;StringTrim&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #666666; font-style: italic;">;elementDecorators.trim = &quot;StringTrim&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">displayGroups.login.elements.<span style="color: #000099;">username </span>= <span style="color: #933;">&quot;username&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">displayGroups.login.elements.<span style="color: #000099;">password </span>= <span style="color: #933;">&quot;password&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">displayGroupDecorators.elements.<span style="color: #000099;">decorator </span>= <span style="color: #933;">&quot;FormElements&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">displayGroupDecorators.fieldset.<span style="color: #000099;">decorator </span>= <span style="color: #933;">&quot;Fieldset&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">decorators.elements.<span style="color: #000099;">decorator </span>= <span style="color: #933;">&quot;FormElements&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">decorators.fieldset.<span style="color: #000099;">decorator </span>= <span style="color: #933;">&quot;FieldSet&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">decorators.fieldset.decorator.options.<span style="color: #000099;">class </span>= <span style="color: #933;">&quot;zend_form&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">decorators.form.<span style="color: #000099;">decorator </span>= <span style="color: #933;">&quot;Form&quot;</span></div></li></ol></div></div></div>


        <p class="para">
            これは、<acronym class="acronym">XML</acronym> や <acronym class="acronym">PHP</acronym>
            の配列形式の設定ファイルにも簡単に置き換えることができます。
        </p>
    </div>

    <div class="section" id="zend.form.forms.custom" name="zend.form.forms.custom"><div class="info"><h1 class="title">カスタムフォーム</h1></div>
        

        <p class="para">
            独自の設定のフォームを使用するもうひとつの方法は、
            <span class="classname">Zend_Form</span> のサブクラスを作成することです。
            これには次のような利点があります。
        </p>

        <ul class="itemizedlist">
            <li class="listitem"><p class="para">
                フォームのユニットテストを容易に行うことができ、
                検証やレンダリングが期待通りのものかを確認しやすくなる。
            </p></li>

            <li class="listitem"><p class="para">
                個々の要素に対する決め細やかな制御ができる。
            </p></li>

            <li class="listitem"><p class="para">
                フォームオブジェクトの再利用がしやすくなり、移植性が高まる
                (設定ファイルの内容を気にする必要がなくなる)。
            </p></li>

            <li class="listitem"><p class="para">
                独自の機能を実装できる。
            </p></li>
        </ul>

        <p class="para">
            一般的な使用法としては、 <span class="methodname">init()</span>
            メソッドでフォーム要素などの設定を行います。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> My_Form_Login <span style="color: #000000; font-weight: bold;">extends</span> Zend_Form</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> init<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$username</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Form_Element_Text<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'username'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$username</span>-&gt;<span style="color: #006600;">class</span> = <span style="color: #ff0000;">'formtext'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$username</span>-&gt;<span style="color: #006600;">setLabel</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Username:'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">setDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ViewHelper'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'helper'</span> =&gt; <span style="color: #ff0000;">'formText'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Label'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'class'</span> =&gt; <span style="color: #ff0000;">'label'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$password</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Form_Element_Password<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'password'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$password</span>-&gt;<span style="color: #006600;">class</span> = <span style="color: #ff0000;">'formtext'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$password</span>-&gt;<span style="color: #006600;">setLabel</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Password:'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">setDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ViewHelper'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'helper'</span> =&gt; <span style="color: #ff0000;">'formPassword'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Label'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'class'</span> =&gt; <span style="color: #ff0000;">'label'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$submit</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Form_Element_Submit<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'login'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$submit</span>-&gt;<span style="color: #006600;">class</span> = <span style="color: #ff0000;">'formsubmit'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$submit</span>-&gt;<span style="color: #006600;">setValue</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Login'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">setDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ViewHelper'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'helper'</span> =&gt; <span style="color: #ff0000;">'formSubmit'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">addElements</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$username</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$password</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$submit</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">setDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'FormElements'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Fieldset'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Form'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
            このフォームのインスタンスを作成するのは、次のように簡単です。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$form</span> = <span style="color: #000000; font-weight: bold;">new</span> My_Form_Login<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            そして、すべての機能はすでに準備済みの状態で、
            設定ファイルは不要です (この例はかなり単純化していることに注意しましょう。
            バリデーションや要素のフィルタなどは省略しています)。
        </p>

        <p class="para">
            独自のフォームを作成する理由としてもうひとつよくあるのが、
            デフォルトのデコレータを定義したいというものです。
            この場合は  <span class="methodname">loadDefaultDecorators()</span> メソッドを上書きします。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> My_Form_Login <span style="color: #000000; font-weight: bold;">extends</span> Zend_Form</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> loadDefaultDecorators<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">setDecorators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'FormElements'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Fieldset'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Form'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.form.elements.html">Zend_Form_Element を用いたフォーム要素の作成</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.form.html">Zend_Form</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.form.decorators.html">Zend_Form_Decorator による独自のフォームマークアップの作成</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.form.html">Zend_Form</a></li>
  <li><a href="zend.form.introduction.html">Zend_Form(日本語)</a></li>
  <li><a href="zend.form.quickstart.html">Zend_Form クイックスタート</a></li>
  <li><a href="zend.form.elements.html">Zend_Form_Element を用いたフォーム要素の作成</a></li>
  <li class="active"><a href="zend.form.forms.html">Zend_Form によるフォームの作成</a></li>
  <li><a href="zend.form.decorators.html">Zend_Form_Decorator による独自のフォームマークアップの作成</a></li>
  <li><a href="zend.form.standardElements.html">Zend Framework に同梱されている標準のフォーム要素</a></li>
  <li><a href="zend.form.standardDecorators.html">Zend Framework に同梱されている標準のデコレータ</a></li>
  <li><a href="zend.form.i18n.html">Zend_Form の国際化</a></li>
  <li><a href="zend.form.advanced.html">Zend_Form の高度な使用法</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>