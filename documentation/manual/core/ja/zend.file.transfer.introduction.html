<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_File_Transfer(日本語) - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.file.html">Zend_File</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.file.html">Zend_File</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.file.transfer.validators.html">Zend_File_Transfer 用のバリデータ</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.file.transfer.introduction" class="section"><div class="info"><h1 class="title">Zend_File_Transfer(日本語)</h1></div>
    

    <p class="para">
        <span class="classname">Zend_File_Transfer</span> を使用すると、
        ファイルのアップロードやダウンロードを管理できます。
        組み込みのバリデータを使ってファイルを検証したり、
        フィルタによってファイルを変更したりという機能があります。
        <span class="classname">Zend_File_Transfer</span> はアダプタ形式を採用しており、
        <acronym class="acronym">HTTP</acronym> や FTP、WEBDAV などのさまざまな転送プロトコルを同じ <acronym class="acronym">API</acronym> で使用できます。
    </p>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>制限</b><br /></span>
        

        
            現在の <span class="classname">Zend_File_Transfer</span>
            の実装では、<acronym class="acronym">HTTP</acronym> Post によるアップロードにしか対応していません。
            ファイルのダウンロードやその他のアダプタについては次のリリースで追加される予定です。
            実装されていないメソッドを実行すると例外をスローします。
            したがって、実際のところは
            <span class="classname">Zend_File_Transfer_Adapter_Http</span>
            のインスタンスを直接操作することになります。
            これは、将来複数のアダプタが使用可能になった段階で変更される予定です。
        <br />
    </p></blockquote>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>フォーム</b><br /></span>
        

        
            <span class="classname">Zend_Form</span> を使う場合は <span class="classname">Zend_Form</span>
            の <acronym class="acronym">API</acronym> を使うようにし、<span class="classname">Zend_File_Transfer</span>
            を直接使わないようにしましょう。<span class="classname">Zend_Form</span>
            のファイル転送機能は <span class="classname">Zend_File_Transfer</span>
            で実装されているので、この章の説明は <span class="classname">Zend_Form</span>
            のユーザにも有用です。
        <br />
    </p></blockquote>

    <p class="para">
        <span class="classname">Zend_File_Transfer</span> の使い方はきわめて単純です。
        ふたつの部分から成り立っており、
        アップロードを行う <acronym class="acronym">HTTP</acronym> フォームとアップロードされたファイルを
        <span class="classname">Zend_File_Transfer</span> で処理するコードを作成します。
        次の例を参照ください。
    </p>

    <div class="example"><div class="info"><p><b>Example #1 シンプルなファイルアップロードフォーム</b></p></div>
        

        <div class="example-contents"><p>
            これは、基本的なファイルアップロード処理の例です。
            まずはファイルアップロードフォームから。
            今回の例では。アップロードしたいファイルはひとつです。
        </p></div>

        <div class="programlisting xml"><div class="xmlcode"><div class="xml" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #009900;"><span style="font-weight: bold; color: black;">&lt;form</span> <span style="color: #000066;">enctype</span>=<span style="color: #ff0000;">&quot;multipart/form-data&quot;</span> <span style="color: #000066;">action</span>=<span style="color: #ff0000;">&quot;/file/upload&quot;</span> <span style="color: #000066;">method</span>=<span style="color: #ff0000;">&quot;POST&quot;</span><span style="font-weight: bold; color: black;">&gt;</span></span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #009900;"><span style="font-weight: bold; color: black;">&lt;input</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;hidden&quot;</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;MAX_FILE_SIZE&quot;</span> <span style="color: #000066;">value</span>=<span style="color: #ff0000;">&quot;100000&quot;</span> <span style="font-weight: bold; color: black;">/&gt;</span></span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; アップロードするファイルを選択: <span style="color: #009900;"><span style="font-weight: bold; color: black;">&lt;input</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;uploadedfile&quot;</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;file&quot;</span> <span style="font-weight: bold; color: black;">/&gt;</span></span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #009900;"><span style="font-weight: bold; color: black;">&lt;br</span> <span style="font-weight: bold; color: black;">/&gt;</span></span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #009900;"><span style="font-weight: bold; color: black;">&lt;input</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;submit&quot;</span> <span style="color: #000066;">value</span>=<span style="color: #ff0000;">&quot;アップロード&quot;</span> <span style="font-weight: bold; color: black;">/&gt;</span></span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #009900;"><span style="font-weight: bold; color: black;">&lt;/form<span style="font-weight: bold; color: black;">&gt;</span></span></span></div></li></ol></div></div></div>


        <div class="example-contents"><p>
            <acronym class="acronym">HTML</acronym> を直接作成するのではなく、利便性を考慮して
            <a href="zend.form.standardElements.html#zend.form.standardElements.file" class="link">Zend_Form_Element_File</a>
            を使っていることに注意しましょう。
        </p></div>

        <div class="example-contents"><p>
            次はアップロードしたファイルを受け取る側です。
            今回の例では、受け取る側は <var class="filename">/file/upload</var>
            となります。そこで、 &#039;file&#039; コントローラにアクション
             <span class="methodname">upload()</span> を作成します。
        </p></div>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$adapter</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer_Adapter_Http<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$adapter</span>-&gt;<span style="color: #006600;">setDestination</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'C:<span style="color: #000099; font-weight: bold;">\t</span>emp'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>!<span style="color: #0000ff;">$adapter</span>-&gt;<span style="color: #006600;">receive</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$messages</span> = <span style="color: #0000ff;">$adapter</span>-&gt;<span style="color: #006600;">getMessages</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <a href="http://www.php.net/implode"><span style="color: #000066;">implode</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span>, <span style="color: #0000ff;">$messages</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <div class="example-contents"><p>
            このコードは <span class="classname">Zend_File_Transfer</span> のもっともシンプルな使用法を示すものです。
            ローカルの保存先を  <span class="methodname">setDestination()</span> メソッドで指定して
             <span class="methodname">receive()</span> メソッドをコールします。
            アップロード時に何らかのエラーが発生した場合は、
            返された例外の中でその情報を取得できます。
        </p></div>

    </div>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>注意</b><br /></span>
        

        
            この例は、<span class="classname">Zend_File_Transfer</span> の基本的な <acronym class="acronym">API</acronym> を説明するためだけのものです。
            これをそのまま実際の環境で使用しては
            <em class="emphasis">いけません</em>。
            深刻なセキュリティ問題を引き起こしてしまいます。
            常にバリデータを使用してセキュリティを向上させるようにしなければなりません。
        <br />
    </p></blockquote>

    <div class="section" id="zend.file.transfer.introduction.adapters" name="zend.file.transfer.introduction.adapters"><div class="info"><h1 class="title">Zend_File_Transfer がサポートするアダプタ</h1></div>
        

        <p class="para">
            <span class="classname">Zend_File_Transfer</span> は、
            さまざまなアダプタと転送方向をサポートするように作られています。
            ファイルのアップロードやダウンロードだけでなく、転送
            (あるアダプタでのアップロードと別のアダプタでのダウンロードを同時に行う)
            にも対応できるように設計されています。
            しかし、Zend Framework 1.6 の時点で存在するアダプタは
            Http アダプタひとつだけです。
        </p>
    </div>

    <div class="section" id="zend.file.transfer.introduction.options" name="zend.file.transfer.introduction.options"><div class="info"><h1 class="title">Zend_File_Transfer のオプション</h1></div>
        

        <p class="para">
            <span class="classname">Zend_File_Transfer</span> やそのアダプタはさまざまなオプションをサポートしています。
            オプションはコンストラクタで指定することもできますし、
             <span class="methodname">setOptions($options)</span> で指定することもできます。
             <span class="methodname">getOptions()</span> は、実際に設定されているオプションを返します。
            サポートするオプションは次のとおりです。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <em class="emphasis">ignoreNoFile</em>: このオプションを <b><tt>TRUE</tt></b> にすると、
                    ファイルがフォームからアップロードされなかったときにバリデータは何も行いません。
                    このオプションの既定値は <b><tt>FALSE</tt></b> で、
                    この場合はファイルがアップロードされなければエラーとなります。
                </p>
            </li>
        </ul>
    </div>

    <div class="section" id="zend.file.transfer.introduction.checking" name="zend.file.transfer.introduction.checking"><div class="info"><h1 class="title">ファイルのチェック</h1></div>
        

        <p class="para">
            <span class="classname">Zend_File_Transfer</span>
            のメソッドの中には、さまざまな前提条件をチェックするためのものもあります。
            これらは、アップロードされたファイルを処理する際に便利です。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <em class="emphasis">isValid($files = null)</em>: このメソッドは、
                    ファイルにアタッチされたバリデータを用いてそのファイルが妥当なものかどうかを検証します。
                    ファイル名を省略した場合はすべてのファイルをチェックします。
                     <span class="methodname">isValid()</span> を  <span class="methodname">receive()</span> の前にコールすることもできます。
                    この場合、 <span class="methodname">receive()</span> がファイルを受信する際に内部的に
                     <span class="methodname">isValid()</span> をコールすることはありません。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">isUploaded($files = null)</em>: このメソッドは、
                    指定したファイルがユーザによってアップロードされたものなのかどうかを調べます。
                    これは、複数のファイルを任意でアップロードできるようにする場合などに便利です。
                    ファイル名を省略した場合はすべてのファイルをチェックします。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">isReceived($files = null)</em>: このメソッドは、
                    指定したファイルがすでに受信済みであるかどうかを調べます。
                    ファイル名を省略した場合はすべてのファイルをチェックします。
                </p>
            </li>
        </ul>

        <div class="example"><div class="info"><p><b>Example #2 ファイルのチェック</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべての既知の内部ファイル情報を返します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$files</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getFileInfo</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$files</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$file</span> =&gt; <span style="color: #0000ff;">$info</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// アップロードされたファイルか ?</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>!<span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">isUploaded</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$file</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;ファイルをアップロードしてください&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">continue</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// バリデータを通過したか ?</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>!<span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">isValid</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$file</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;$file は不適切です&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">continue</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">receive</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>
    </div>

    <div class="section" id="zend.file.transfer.introduction.informations" name="zend.file.transfer.introduction.informations"><div class="info"><h1 class="title">さらなるファイル情報</h1></div>
        

        <p class="para">
            <span class="classname">Zend_File_Transfer</span> は、ファイルについてのさらなる情報を返すことができます。
            次のメソッドが使用可能です。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <em class="emphasis">getFileName($file = null, $path = true)</em>:
                    このメソッドは、転送されたファイルの実際のファイル名を返します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">getFileInfo($file = null)</em>:
                    このメソッドは、転送されたファイルのすべての内部情報を返します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">getFileSize($file = null)</em>:
                    このメソッドは、指定したaifるの実際のファイルサイズを返します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">getHash($hash = &#039;crc32&#039;, $files = null)</em>:
                    このメソッドは、転送されたファイルの内容のハッシュを返します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">getMimeType($files = null)</em>:
                    このメソッドは、転送されたファイルの mimetype を返します。
                </p>
            </li>
        </ul>

        <p class="para">
             <span class="methodname">getFileName()</span> の最初のパラメータには、
            要素の名前を渡すことができます。名前を省略した場合は、
            すべてのファイル名を配列で返します。
            multifile 形式であった場合も結果は配列となります。
            ファイルがひとつだけだった場合は結果を文字列で返します。
        </p>

        <p class="para">
            デフォルトでは、ファイル名はフルパス形式で返されます。
            パス抜きのファイル名だけがほしい場合は、2 番目のパラメータ
            <code class="code">$path</code> を設定します。これを <b><tt>FALSE</tt></b>
            にするとパスの部分を取り除いた結果を返します。
        </p>

        <div class="example"><div class="info"><p><b>Example #3 ファイル名の取得</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">receive</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべてのファイルのファイル名を返します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$names</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getFileName</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// フォームの 'foo' 要素のファイル名を返します。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$names</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getFileName</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>

        <blockquote><p><b class="note">Note</b>: 
            
                ファイルを受信する際にファイル名が変わることがあることに注意しましょう。
                これは、ファイルを受信した後ですべてのフィルタが適用されるからです。
                 <span class="methodname">getFileName()</span> をコールするのは、ファイルを受信してからでなければなりません。
            <br />
        </p></blockquote>

        <p class="para">
             <span class="methodname">getFileSize()</span> は、デフォルトではファイルサイズを SI 記法で返します。
            つまり、たとえば <em class="emphasis">2048</em> ではなく <em class="emphasis">2kB</em>
            のようになるということです。単にサイズだけが知りたい場合は、オプション
            <span class="property">useByteString</span> を <b><tt>FALSE</tt></b> に設定してください。
        </p>

        <div class="example"><div class="info"><p><b>Example #4 ファイルのサイズの取得</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">receive</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 複数のファイルがアップロードされた場合は、すべてのファイルのサイズを配列で返します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$size</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getFileSize</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// SI 記法を無効にし、数値のみを返すようにします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">setOption</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'useByteString'</span> =&gt; <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$size</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getFileSize</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>

        
        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Client given filesize</b><br /></span>
            

            
                Note that the filesize which is given by the client is not seen as save input.
                Therefor the real size of the file will be detected and returned instead of the
                filesize sent by the client.
            <br />
        </p></blockquote>

        <p class="para">
             <span class="methodname">getHash()</span> の最初のパラメータには、ハッシュアルゴリズムの名前を指定します。
            使用できるアルゴリズムについては
            <a href="http://php.net/hash_algos" class="link external">&raquo; PHP の hash_algos メソッド</a>
            を参照ください。アルゴリズムを省略した場合は
            <em class="emphasis">crc32</em> をデフォルトのアルゴリズムとして使用します。
        </p>

        <div class="example"><div class="info"><p><b>Example #5 ファイルのハッシュの取得</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">receive</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 複数のファイルがアップロードされた場合は、すべてのファイルのハッシュを配列で返します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$hash</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getHash</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'md5'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// フォームの 'foo' 要素のハッシュを返します。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$names</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getHash</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'crc32'</span>, <span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>返り値</b><br /></span>
            

            
                複数のファイルを指定した場合は、返される結果が配列となることに注意しましょう。
            <br />
        </p></blockquote>

        <p class="para">
             <span class="methodname">getMimeType()</span> はファイルの mimetype を返します。
            複数のファイルがアップロードされた場合は配列、そうでない場合は文字列を返します。
        </p>

        <div class="example"><div class="info"><p><b>Example #6 ファイルの mimetype の取得</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">receive</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mime</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getMimeType</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// フォーム要素 'foo' の mimetype を返します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$names</span> = <span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">getMimeType</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>

        
        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Client given mimetype</b><br /></span>
            

             
                Note that the mimetype which is given by the client is not seen as save input.
                Therefor the real mimetype of the file will be detected and returned instead of the
                mimetype sent by the client.
            <br />
        </p></blockquote>

        <div class="warning"><b class="warning">Warning</b><div class="info"><h1 class="title">ありえる例外</h1></div>
            

            <p class="para">
                このメソッドは、fileinfo 拡張モジュールが使用可能な場合はそれを使用することに注意しましょう。
                この拡張モジュールがみつからなかった場合は、mimemagic 拡張モジュールを使用します。
                それもみつからなかった場合は、例外を発生します。
            </p>
        </div>

        
        <div class="warning"><b class="warning">Warning</b><div class="info"><h1 class="title">Original data within $_FILES</h1></div>
            

            <p class="para">
                Due to security reasons also the original data within $_FILES will be overridden
                as soon as <span class="classname">Zend_File_Transfer</span> is initiated. When you want
                to omit this behaviour and have the original data simply set the
                <span class="property">detectInfos</span> option to <b><tt>FALSE</tt></b> at initiation.
            </p>

            <p class="para">
                This option will have no effect after you initiated
                <span class="classname">Zend_File_Transfer</span>.
            </p>
        </div>

    </div>

    <div class="section" id="zend.file.transfer.introduction.uploadprogress" name="zend.file.transfer.introduction.uploadprogress"><div class="info"><h1 class="title">ファイルアップロードの進捗</h1></div>
        

        <p class="para">
            <span class="classname">Zend_File_Transfer</span> では、ファイルアップロードの進捗状況を知ることができます。
            この機能を使用するには、<acronym class="acronym">APC</acronym> 拡張モジュール
            (ほとんどの <acronym class="acronym">PHP</acronym> 環境においてデフォルトで提供されています)
            あるいは <span class="classname">uploadprogress</span> 拡張モジュールが必要です。
            これらの拡張モジュールがインストールされていれば、自動検出してそれを使用します。
            進捗状況を取得するには、いくつかの事前条件があります。
        </p>

        <p class="para">
            まず、<acronym class="acronym">APC</acronym> あるいは <span class="classname">uploadprogress</span>
            のいずれかを有効にする必要があります。<acronym class="acronym">APC</acronym>
            の機能は <var class="filename">php.ini</var> で無効化できることに注意しましょう。
        </p>

        <p class="para">
            次に、ファイルを送信するフォームの中に適切な hidden
            フィールドを追加しなければなりません。<span class="classname">Zend_Form_Element_File</span>
            を使う場合は、この hidden フィールドは
            <span class="classname">Zend_Form</span> が自動的に追加します。
        </p>

        <p class="para">
            これらふたつの条件さえ満たせば、ファイルアップロードの進捗状況を
            <code class="code">getProgress</code> メソッドで取得できます。
            実際には、これを処理する公式な方法は 2 通りあります。
        </p>

        <div class="section" id="zend.file.transfer.introduction.uploadprogress.progressadapter" name="zend.file.transfer.introduction.uploadprogress.progressadapter"><div class="info"><h1 class="title">progressbar アダプタを使用する</h1></div>

            

            <p class="para">
                <em class="emphasis">Zend_ProgressBar</em> を使用して、
                実際の進捗状況を取得した上でそれをシンプルにユーザに見せることができます。
            </p>

            <p class="para">
                そのためには、 <span class="methodname">getProgress()</span> を最初にコールするときにお望みの
                <em class="emphasis">Zend_ProgressBar_Adapter</em> を追加しなければなりません。
                どのアダプタを使用すればいいのかについては
                <a href="zend.progressbar.introduction.html#zend.progressbar.adapters" class="link">Zend_ProgressBar の標準のアダプタ</a>
                の章を参照ください。
            </p>

            <div class="example"><div class="info"><p><b>Example #7 progressbar アダプタを使用した実際の状態の取得</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$adapter</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_ProgressBar_Adapter_Console<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>&nbsp; = Zend_File_Transfer_Adapter_Http::<span style="color: #006600;">getProgress</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$adapter</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">null</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">while</span> <span style="color: #66cc66;">&#40;</span>!<span style="color: #0000ff;">$upload</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'done'</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$upload</span> = Zend_File_Transfer_Adapter_Http:getProgress<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$upload</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


            </div>

            <p class="para">
                完全な処理は、バックグラウンドで  <span class="methodname">getProgress()</span> によって行われます。
            </p>

        </div>

        <div class="section" id="zend.file.transfer.introduction.uploadprogress.manually" name="zend.file.transfer.introduction.uploadprogress.manually"><div class="info"><h1 class="title">getProgress() を手動で使用する</h1></div>
            

            <p class="para">
                <span class="classname">Zend_ProgressBar</span> を使わずに手動で
                 <span class="methodname">getProgress()</span> を動作させることもできます。
            </p>

            <p class="para">
                 <span class="methodname">getProgress()</span> を何も設定なしでコールします。
                すると、いくつかのキーを含む配列が返されます。
                使用している <acronym class="acronym">PHP</acronym> 拡張モジュールによってその内容は異なります。
                しかし、次のキーは拡張モジュールにかかわらず返されます。
            </p>

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">id</em>:
                        このアップロードの ID。その拡張モジュール内でのアップロードを一意に識別します。
                        自動的に設定され、この値は決して変更することができません。
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">total</em>:
                        アップロードされたファイル全体のサイズをバイト単位で表した整数値。
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">current</em>:
                        現在までにアップロードされたファイルサイズをバイト単位で表した整数値。
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">rate</em>:
                        アップロードの平均速度を「バイト/秒」単位で表した整数値。
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">done</em>:
                        アップロードが終了したときは <b><tt>TRUE</tt></b> 、
                        そうでなければ <b><tt>FALSE</tt></b> を返します。
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">message</em>:
                        実際のメッセージ。進捗を <em class="emphasis">10kB / 200kB</em>
                        形式で表したテキストか、何か問題が起こった場合には有用なメッセージとなります。
                        「問題」とは、何もアップロード中でない場合や
                        進捗状況の取得に失敗した場合、あるいはアップロードがキャンセルされた場合を意味します。
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">progress</em>:
                        このオプションキーには <span class="classname">Zend_ProgressBar_Adapter</span> あるいは
                        Zend_ProgressBar のインスタンスが含まれ、
                        プログレスバー内から実際のアップロード状況を取得できるようになります。
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">session</em>:
                        このオプションキーには <span class="classname">Zend_ProgressBar</span>
                        内で使用するセッション名前空間の名前が含まれます。
                        このキーが与えられなかったときのデフォルトは
                        <span class="classname">Zend_File_Transfer_Adapter_Http_ProgressBar</span> です。
                    </p>
                </li>
            </ul>

            <p class="para">
                それ以外に返されるキーについては各拡張モジュールが直接返すものであり、
                チェックしていません。
            </p>

            <p class="para">
                次の例は、手動で使用する方法を示すものです。
            </p>

            <div class="example"><div class="info"><p><b>Example #8 手動での進捗状況表示の使用法</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>&nbsp; = Zend_File_Transfer_Adapter_Http::<span style="color: #006600;">getProgress</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">while</span> <span style="color: #66cc66;">&#40;</span>!<span style="color: #0000ff;">$upload</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'done'</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$upload</span> = Zend_File_Transfer_Adapter_Http:getProgress<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$upload</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>Actual progress:&quot;</span>.<span style="color: #0000ff;">$upload</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'message'</span><span style="color: #66cc66;">&#93;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// 何か必要な処理をします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


            </div>

            
            <blockquote><p><b class="note">Note</b>: <span class="info"><b>Knowing the file to get the progress from</b><br /></span>
                

                
                    The above example works when your upload identified is set to &#039;progress_key&#039;.
                    When you are using another identifier within your form you must give the used
                    identifier as first parameter to  <span class="methodname">getProgress()</span> on the
                    initial call.
                <br />
            </p></blockquote>
        </div>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.file.html">Zend_File</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.file.html">Zend_File</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.file.transfer.validators.html">Zend_File_Transfer 用のバリデータ</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.file.html">Zend_File</a></li>
  <li class="active"><a href="zend.file.transfer.introduction.html">Zend_File_Transfer(日本語)</a></li>
  <li><a href="zend.file.transfer.validators.html">Zend_File_Transfer 用のバリデータ</a></li>
  <li><a href="zend.file.transfer.filters.html">Filters for Zend_File_Transfer</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>