<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>導入 - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.locale.html">Zend_Locale</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.locale.html">Zend_Locale</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.locale.functions.html">Zend_Locale の使用法</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.locale.introduction" class="section"><div class="info"><h1 class="title">導入</h1></div>

    

    <p class="para">
        <span class="classname">Zend_Locale</span> は、
        &quot;ひとつのアプリケーションを世界中で使用するにはどうしたらいいでしょう?&quot;
        という質問に対するフレームワーク側からの回答です。たいていの人は
        &quot;かんたんじゃん。出力内容をいくつかの言語に翻訳すればいいんだよ。&quot;
        と言うでしょう。
        しかし、ただ単にフレーズを他の言語に置き換えるだけといった単純な翻訳テーブルでは不十分です。
        たとえば姓と名の順番や敬称、そして数値や日付、時刻、通貨などの書式は、
        地域によって異なります。
    </p>

    <p class="para">
        <a href="http://en.wikipedia.org/wiki/Internationalization_and_localization" class="link external">&raquo; 地域化だけでなく国際化</a>
        も必要となります。これらは、それぞれ <em class="emphasis">L10n</em> および <em class="emphasis">I18n</em>
        と略されることもあります。国際化とは、そのシステムを特定のユーザ集団の
        (言語、地域、数値書式、財務規約、日付時刻書式などの)
        ニーズにかかわらず使用できるようにすることを言います。
        地域化とは、特定の集団のニーズに対応するために、
        システムに明示的なサポートを追加することを言います。
        たとえば言語の翻訳や、各地域の規約 (複数形の扱い、日付、時刻、通貨、名前、
        記号、並び順など) が該当します。
        <em class="emphasis">L10n</em> と <em class="emphasis">I18n</em> は、お互い補完しあうものです。
        Zend Framework では、いくつかのコンポーネントを組み合わせることで
        これらのサポートを提供しています。たとえば <span class="classname">Zend_Locale</span>、<span class="classname">Zend_Date</span>、
        <span class="classname">Zend_Measure</span>、<span class="classname">Zend_Translate</span>、<span class="classname">Zend_Currency</span>
        そして <span class="classname">Zend_TimeSync</span> といったコンポーネントがあります。
    </p>

    <div class="tip"><b class="tip">Tip</b><div class="info"><h1 class="title">Zend_Locale と setLocale()</h1></div>
        
        <p class="para">
            <a href="http://php.net/setlocale" class="link external">&raquo; PHP のドキュメント</a>
            には、 <span class="methodname">setlocale()</span> はプロセス単位で動作するのでスレッドセーフではないと書かれています。
            つまり、マルチスレッド環境では「スクリプト内で一切ロケールを変更していないのに、
            勝手にロケールが変わってしまう」といった問題が発生する可能性があるということです。
            スクリプトで  <span class="methodname">setlocale()</span> を使用すると、予期せぬ挙動を引き起こすことがあります。
        </p>
        <p class="para">
            <span class="classname">Zend_Locale</span> にはこのような制限はありません。なぜなら
            <span class="classname">Zend_Locale</span> は <acronym class="acronym">PHP</acronym> の  <span class="methodname">setlocale()</span>
            を使用しているわけではないからです。
        </p>
    </div>

    <div class="section" id="zend.locale.whatislocalization" name="zend.locale.whatislocalization"><div class="info"><h1 class="title">地域化とは</h1></div>

        

        <p class="para">
            地域化とは、あるアプリケーション (あるいはホームページ)
            が、さまざまな言語を話すユーザによって使用することができるということです。
            しかし、ご存知のとおり、地域化とは単に文字列を翻訳するだけのことではありません。
            以下のような内容が含まれます。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <span class="classname">Zend_Locale</span> -
                    他の Zend Framework コンポーネントにおける地域化サポートで対応しているロケールのバックエンドとなります。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <span class="classname">Zend_Translate</span> - 文字列を翻訳します。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <span class="classname">Zend_Date</span> - 日付や時刻を地域化します。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <span class="classname">Zend_Calendar</span> -
                    カレンダーを地域化します (グレゴリオ暦以外の暦もサポートしています)。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <span class="classname">Zend_Currency</span> - 通貨を地域化します。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <span class="classname">Zend_Locale_Format</span> - 地域化された数値のパースおよび生成を行います。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <span class="classname">Zend_Locale_Data</span> -
                    国名や言語名、そして
                    <a href="http://unicode.org/cldr/" class="link external">&raquo; <acronym class="acronym">CLDR</acronym> にあるさまざまな内容</a>
                    について、各地域の標準文字列を取得します。
                </p>
            </li>
        </ul>

    </div>

    <div class="section" id="zend.locale.whatis" name="zend.locale.whatis"><div class="info"><h1 class="title">ロケールとは?</h1></div>

        

        <p class="para">
            コンピュータのユーザは皆、(気づいていないかもしれませんが) ロケールを使用しています。
            地域化をサポートしていないアプリケーションの場合は、
            通常は暗黙的に特定のロケール (そのアプリケーションの作者のロケール)
            を使用しています。
            クラスや関数が地域化されていることを、ここでは
            <em class="emphasis">ロケールに対応している</em>ということにします。
            そのユーザがどの地域にいるのかを、どうやってコードで知るのでしょうか?
        </p>

        <p class="para">
            ロケール文字列あるいはロケールを表すオブジェクトを使用して、
            <span class="classname">Zend_Locale</span> およびそのサブクラスはユーザが希望する言語および地域を知ります。
            この情報にもとづいて、正しい書式化や正規化、規約を適用します。
        </p>

    </div>

    <div class="section" id="zend.locale.representation" name="zend.locale.representation"><div class="info"><h1 class="title">ロケールの表現方法は?</h1></div>

        

        <p class="para">
            ロケール識別子に含まれる情報は、ユーザの言語と
            地理上の地域 (たとえば自宅あるいは勤務先の属する州など) です。
            Zend Framework が使用するロケール識別文字列は、
            国際的に定義されている言語と地域の略称で、
            <em class="emphasis">language_REGION</em> という形式です。
            言語および地域は、どちらも <acronym class="acronym">ASCII</acronym> 文字列となります。
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                大半の人の予想に反して、実はロケールは 2 文字とは限りません。
                言語についても地域についても、短縮形が 2 文字にならないものがあります。
                したがって、地域や言語の切り出しは自前では行わないようにしましょう。
                ロケール文字列から言語や地域を切り出したい場合は <span class="classname">Zend_Locale</span> を使用しましょう。
                自前で行ってしまうと、予期せぬ結果となってしまうことがあります。
            <br />
        </p></blockquote>

        <p class="para">
            アメリカのユーザの言語は英語で、地域は <b><tt>USA</tt></b> です。
            そこで、ロケール識別子は &quot;en_US&quot; となります。
            ドイツのユーザの言語はドイツ語で、地域はドイツです。そこで、ロケール識別子は &quot;de_DE&quot; となります。
            <a href="http://unicode.org/cldr/data/diff/supplemental/languages_and_territories.html" class="link external">&raquo; 
            ロケールおよび地域の組み合わせの定義済みの一覧</a>
            を参考に、Zend Framework で使用するロケールを選択しましょう。
        </p>

        <div class="example"><div class="info"><p><b>Example #1 特定のロケールの選択</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'de_DE'</span><span style="color: #66cc66;">&#41;</span>; <span style="color: #808080; font-style: italic;">// ドイツ語 _ ドイツ</span></div></li></ol></div></div></div>

        </div>

        <p class="para">
            アメリカに住むドイツ人は、言語はドイツ語で地域は <b><tt>USA</tt></b>
            としたいかも知れません。しかし、このような非標準の組み合わせは、
            &quot;ロケール&quot; としては直接サポートしていません。
            そのかわりに、もし無効な組み合わせが使用されると、
            自動的に地域コードが切り捨てられます。
            たとえば &quot;de_IS&quot; は &quot;de&quot; に切り捨てられ、&quot;xh_RU&quot; は &quot;xh&quot;
            に切り捨てられます。これらの組み合わせは無効だからです。
            さらに、言語コードがサポートされていない場合 (例 &quot;zz_US&quot;)
            や存在しない場合は、デフォルトの &quot;root&quot; ロケールを使用します。
            &quot;root&quot; ロケールではデフォルトとして、
            国際的に認知されている日付、時刻、数値、通過等を定義しています。
            この切捨て処理は、要求された情報の内容に依存します。
            言語と地域の組み合わせの中には、
            特定の型のデータ (たとえば日付) では有効だけれども
            別の型 (たとえば通貨) では無効だというものがあるからです。
        </p>

        <p class="para">
            過去の歴史には注意しましょう。Zend Framework コンポーネントは、
            これまでさまざまな場所で変更されてきた過去のタイムゾーンについては対応しません。
            たとえば
            <a href="http://www.statoids.com/tus.html" class="link external">&raquo; この一覧表</a>
            をご覧ください。特定の地域が夏時間を採用するかどうかや、
            どのタイムゾーンに属するかなどは、時の政府によって何度も変更されています。
            したがって、日付の計算をおこなう際には、
            Zend Framework コンポーネントはこれらの変更には対応しません。
            その代わりに、現時点の夏時間対応、現時点のタイムゾーンに対応した正しい時刻を使用します。
        </p>

    </div>

    <div class="section" id="zend.locale.selection" name="zend.locale.selection"><div class="info"><h1 class="title">正しいロケールの選択</h1></div>

        

        <p class="para">
            たいていの場合は、<strong class="command">new Zend_Locale()</strong>
            とすると自動的に正しいロケールを選択します。
            これはユーザのウェブブラウザから送られてきた情報をもとに判断します。
            しかし、<strong class="command">new Zend_Locale(Zend_Locale::ENVIRONMENT)</strong>
            を使用すると、以下に示すようにホストサーバの環境設定から情報を取得するようになります。
        </p>

        <div class="example"><div class="info"><p><b>Example #2 ロケールの自動選択</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale</span>&nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// デフォルトの挙動で、上と同じです</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale1</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span>Zend_Locale::<span style="color: #006600;">BROWSER</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ホストサーバ上の設定を使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale2</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span>Zend_Locale::<span style="color: #006600;">ENVIRONMENT</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// フレームワークアプリケーションのデフォルト設定を使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale3</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span>Zend_Locale::<span style="color: #006600;">FRAMEWORK</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            <span class="classname">Zend_Locale</span> がロケールの自動選択に使用する検索アルゴリズムは、
            三種類の情報をもとにしています。
            <ol type="1">
                <li class="listitem">
                    <p class="para">
                        const <b><tt>Zend_Locale::BROWSER</tt></b> -
                        ユーザのウェブブラウザは、リクエストの際に情報を送信します。これは、
                        <acronym class="acronym">PHP</acronym> のグローバル変数 <var class="varname">$_SERVER[&#039;HTTP_ACCEPT_LANGUAGE&#039;]</var> で取得できます。
                        対応するロケールが見つからない場合は <b><tt>ENVIRONMENT</tt></b>
                        による検索を行い、それでもだめなら最後は
                        <b><tt>FRAMEWORK</tt></b> を使用します。
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        const <b><tt>Zend_Locale::ENVIRONMENT</tt></b> -
                        <acronym class="acronym">PHP</acronym> は、ホストサーバのロケールを
                         <span class="methodname">setlocale()</span> 関数で取得します。
                        対応するロケールが見つからない場合は <b><tt>FRAMEWORK</tt></b> による検索を行い、
                        それでもだめなら最後は <b><tt>BROWSER</tt></b> を使用します。
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        const <b><tt>Zend_Locale::FRAMEWORK</tt></b> -
                        Zend Framework がコンポーネントのデフォルトを指定できる仕組みが定まったら
                        (予定されていますが、現在はまだありません)、
                        この定数を使用することでデフォルト設定を選択できるようになります。
                        対応するロケールが見つからない場合は <b><tt>ENVIRONMENT</tt></b>
                        による検索を行い、それでもだめなら最後は
                        <b><tt>BROWSER</tt></b> を使用します。
                    </p>
                </li>
            </ol>
        </p>

    </div>

    <div class="section" id="zend.locale.selection.automatic" name="zend.locale.selection.automatic"><div class="info"><h1 class="title">自動ロケールの使用法</h1></div>

        

        <p class="para">
            <span class="classname">Zend_Locale</span> では、さらに 3 つのロケールを用意しています。
            これらのロケールは、どこか特定の言語や地域を表すものではありません。
            これらは &quot;自動&quot; ロケール、つまり
             <span class="methodname">getDefault()</span> メソッドと同じような働きをするものです。
            しかし、インスタンスを作成したりといった余計な作業が不要になります。
            これらの &quot;自動&quot; ロケールは、標準のロケールを使用できるところなら
            どこででも使用可能で、文字列で指定することになります。
            これを使用することで、ブラウザが提供するロケール情報などをうまく利用できるようになります。
        </p>

        <p class="para">
            以下の 3 つのロケールは、それぞれ微妙に異なる働きをします。

            <ol type="1">
                <li class="listitem">
                    <p class="para">
                        &#039;<span class="property">browser</span>&#039; - <span class="classname">Zend_Locale</span>
                        は、ユーザが使用するウェブブラウザが提供する情報を使用します。
                        これは、<acronym class="acronym">PHP</acronym> のグローバル変数 <b><tt>$_SERVER[&#039;HTTP_ACCEPT_LANGUAGE&#039;]</tt></b>
                        で取得します。
                    </p>
                    <p class="para">
                        ブラウザが複数のロケールを指定している場合は、
                        <span class="classname">Zend_Locale</span> は最初に見つけたロケールを使用します。
                        ブラウザがロケールを指定していなかったり、
                        あるいはコマンドラインからスクリプトを実行したりした場合は、
                        代わりに自動ロケール &#039;<span class="property">environment</span>&#039;
                        を使用してその結果を返します。
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        &#039;<span class="property">environment</span>&#039; - <span class="classname">Zend_Locale</span> は、
                        サーバが提供する情報を使用します。これは、<acronym class="acronym">PHP</acronym> の内部関数
                         <span class="methodname">setlocale()</span> で取得します。
                    </p>
                    <p class="para">
                        複数のロケールを指定している場合は、
                        <span class="classname">Zend_Locale</span> は最初に見つけたロケールを使用します。
                        サーバがロケールを指定していない場合は、
                        代わりに自動ロケール &#039;<span class="property">browser</span>&#039;
                        を使用してその結果を返します。
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        &#039;<span class="property">auto</span>&#039; - <span class="classname">Zend_Locale</span> は、
                        可能な限りの方法でロケールを検出しようとします。
                        まず最初にユーザが指定するロケールを探し、
                        それに失敗するとホストのロケールを探します。
                    </p>
                    <p class="para">
                        ロケールの検出に失敗した場合は例外をスローし、
                        自動検出に失敗したことを通知します。
                    </p>
                </li>
            </ol>
        </p>

        <div class="example"><div class="info"><p><b>Example #3 自動ロケールの使用法</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 自動検出なし</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//$locale = new Zend_Locale(Zend_Locale::BROWSER);</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//$date = new Zend_Date($locale);</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 自動検出つき</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'auto'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

    </div>

    <div class="section" id="zend.locale.defaultlocale" name="zend.locale.defaultlocale"><div class="info"><h1 class="title">デフォルトのロケールの使用</h1></div>

        

        <p class="para">
            環境によっては、ロケールの自動検出ができないこともあります。
            コマンドラインからのリクエストを受け取った場合や
            リクエスト元のブラウザに言語が設定されていない場合、
            そしてサーバ上のロケールが &#039;C&#039;
            あるいはその他のプロプライエタリなロケールだったりする場合などです。
        </p>

        <p class="para">
            このような場合は、<span class="classname">Zend_Locale</span>
            は通常は例外をスローして自動検出に失敗したことを示します。
            このような状況への対応方法は二通りあります。
            新たなロケールを手動で設定するか、あるいはデフォルトのロケールを定義するかです。
        </p>

        <div class="example"><div class="info"><p><b>Example #4 ロケールの例外処理</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 起動ファイル内で</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">try <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$locale</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'auto'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span> catch <span style="color: #66cc66;">&#40;</span>Zend_Locale_Exception <span style="color: #0000ff;">$e</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$locale</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'de'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// モデル/コントローラ内で</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$locale</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            この方法には大きな問題点があります。<span class="classname">Zend_Locale</span>
            を使用するすべてのクラス内で、ロケールオブジェクトを設定することになるのです。
            複数のクラスを使用している場合など、これはとても面倒です。
        </p>

        <p class="para">
            Zend Framework リリース 1.5 以降では、もっとうまいやりかたが用意されています。
            デフォルトのロケールを、静的メソッド  <span class="methodname">setDefault()</span> で設定できるのです。
            もちろん、未知のロケールや不完全なロケールが指定された場合も例外をスローします。
             <span class="methodname">setDefault()</span> は、<span class="classname">Zend_Locale</span>
            を使用するクラスのインスタンスを作成する前に最初にコールする必要があります。
            詳細は、次の例を参照ください。
        </p>

        <div class="example"><div class="info"><p><b>Example #5 デフォルトのロケールの設定</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 起動ファイル内で</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Locale::<span style="color: #006600;">setDefault</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'de'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// モデル/コントローラ内で</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            ロケールが検出できなかった場合は、自動的にロケール
            <em class="emphasis">de</em> を使用します。
            見つかった場合は、そのロケールを使用します。
        </p>

    </div>

    <div class="section" id="zend.locale.interoperate" name="zend.locale.interoperate"><div class="info"><h1 class="title">ZF のロケール対応のクラス</h1></div>

        

        <p class="para">
            Zend Framework では、ロケール対応のクラスは <span class="classname">Zend_Locale</span>
            を使用しています。そして、上で説明したように自動的にロケールを選択します。
            たとえば、Zend Framework のウェブアプリケーションで <span class="classname">Zend_Date</span>
            を使用して日付を作成すると、何もロケールを指定しなくても
            ユーザのウェブブラウザの設定からロケール情報を取得してそれを使用します。
        </p>

        <div class="example"><div class="info"><p><b>Example #6 日付のデフォルトが、ウェブのユーザのロケールになる例</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'2006'</span>,Zend_Date::<span style="color: #006600;">YEAR</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            このデフォルトを上書きし、ロケール対応の Zend Framework
            コンポーネントでウェブサイトの訪問者の設定にかかわらず特定のロケールを指定するには、
            コンストラクタの三番目の引数でロケールを明示的に指定します。
        </p>

        <div class="example"><div class="info"><p><b>Example #7 デフォルトのロケール選択のオーバーライド</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$usLocale</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'en_US'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'2006'</span>,Zend_Date::<span style="color: #006600;">YEAR</span>, <span style="color: #0000ff;">$usLocale</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$temp</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Measure_Temperature<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'100,10'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Zend_Measure::<span style="color: #006600;">TEMPERATURE</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">$usLocale</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            多くのオブジェクトですべて同一のデフォルトロケールを使用することがわかっている場合は、
            それを明示的に指定すると、毎回デフォルトロケールを検索することによる
            オーバーヘッドを回避できます。
        </p>

        <div class="example"><div class="info"><p><b>Example #8 デフォルトのロケールを使用する際のパフォーマンスの最適化</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'2006'</span>, Zend_Date::<span style="color: #006600;">YEAR</span>, <span style="color: #0000ff;">$locale</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$temp</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Measure_Temperature<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'100,10'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Zend_Measure::<span style="color: #006600;">TEMPERATURE</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">$locale</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

    </div>

    <div class="section" id="zend.locale.frameworkwidelocale" name="zend.locale.frameworkwidelocale"><div class="info"><h1 class="title">アプリケーション単位のロケール</h1></div>

        

        <p class="para">
            Zend Framework ではアプリケーション単位でのロケールの使用も可能です。
            そのためには、<span class="classname">Zend_Locale</span> のインスタンスをレジストリに
            &#039;Zend_Locale&#039; というキーで登録します。すると、Zend Framework
            のロケール対応のクラスすべてがこのインスタンスを使うようになります。
            このようにして一度レジストリにロケールを設定してしまえば、
            あとでまた設定しなおす手間が省けます。
            他のすべてのクラスでも自動的にこれが用いられるようになります。
            具体的な使用法は、以下の例を参照ください。
        </p>

        <div class="example"><div class="info"><p><b>Example #9 アプリケーション単位のロケールの使用例</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 起動ファイルで</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$locale</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Locale<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'de_AT'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Registry::<span style="color: #006600;">set</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Zend_Locale'</span>, <span style="color: #0000ff;">$locale</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// モデルあるいはコントローラ内で</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// print $date-&gt;getLocale();</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getDate</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

    </div>

    <div class="section" id="zend.locale.formatoptions" name="zend.locale.formatoptions"><div class="info"><h1 class="title">Zend_Locale_Format::setOptions(array $options)</h1></div>

        

        <p class="para">
            オプション &#039;precision&#039; の値を使用して、桁数の切り詰めあるいは拡張を行います。
            &#039;-1&#039; を指定すると、値の小数部分の桁数を変更しないようにします。
            オプション &#039;locale&#039; は、数値や日付をパースする際の区切り文字や月名を判断するために使用します。
            オプション &#039;format_type&#039; では、<acronym class="acronym">CLDR</acronym>/ISO 日付書式指定トークンおよび <acronym class="acronym">PHP</acronym>
            の date() で使用するトークンのどちらを使用するかを選択します。
            オプション &#039;fix_date&#039; は、無効な形式の日付に対する自動修正処理を有効あるいは無効にします。
            オプション &#039;number_format&#039; は、 <span class="methodname">toNumber()</span>
            で使用するデフォルトの数値書式を指定します
            (詳細は <a href="zend.locale.parsing.html#zend.locale.number.localize" class="link">このセクション</a>を参照してください)。
        </p>

        <p class="para">
            &#039;date_format&#039; オプションでデフォルトの日付書式文字列を指定できます。
            しかし、setOptions() で &#039;date_format&#039; を指定した後で getDate() や
            checkdateFormat() そして getTime() を使用する際には十分注意しましょう。
            これらのメソッドをそのロケールのデフォルトの日付書式で使用するには
            array(&#039;date_format&#039; =&gt; null, &#039;locale&#039; =&gt; $locale) をメソッドのオプションで指定します。
        </p>

        <div class="example"><div class="info"><p><b>Example #10 日付のデフォルトを、ウェブユーザの正しいロケールに設定する</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Locale_Format::<span style="color: #006600;">setOptions</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'locale'</span> =&gt; <span style="color: #ff0000;">'en_US'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'fix_date'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'format_type'</span> =&gt; <span style="color: #ff0000;">'php'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            ロケールの標準の定義を使用する場合は、オプション <b><tt>Zend_Locale_Format::STANDARD</tt></b>
            を指定します。<span class="property">date_format</span> に <b><tt>Zend_Locale_Format::STANDARD</tt></b> を設定すると、
            実際に設定されているロケールの標準定義を使用します。
            これを <span class="property">number_format</span> に設定すると、このロケールの標準数値書式を使用します。
            また、locale に設定すると、この環境あるいはブラウザの標準のロケールを使用します。
        </p>

        <div class="example"><div class="info"><p><b>Example #11 setOptions() での STANDARD の使用</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Locale_Format::<span style="color: #006600;">setOptions</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'locale'</span> =&gt; <span style="color: #ff0000;">'en_US'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'date_format'</span> =&gt; <span style="color: #ff0000;">'dd.MMMM.YYYY'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// グローバル設定の日付書式をオーバーライドします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = Zend_Locale_Format::<a href="http://www.php.net/getdate"><span style="color: #000066;">getDate</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'2007-04-20'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'date_format'</span> =&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zend_Locale_Format::<span style="color: #006600;">STANDARD</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 標準ロケールのグローバル設定</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Locale_Format::<span style="color: #006600;">setOptions</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'locale'</span> =&gt; Zend_Locale_Format::<span style="color: #006600;">STANDARD</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'date_format'</span> =&gt; <span style="color: #ff0000;">'dd.MMMM.YYYY'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

    </div>

    <div class="section" id="zend.locale.cache" name="zend.locale.cache"><div class="info"><h1 class="title">Zend_Locale とそのサブクラスの高速化</h1></div>

        

        <p class="para">
            <span class="classname">Zend_Locale</span> およびそのサブクラスを高速化するには、
            <span class="classname">Zend_Cache</span> を使用します。<span class="classname">Zend_Locale</span>
            を使用している場合は、静的メソッド  <span class="methodname">Zend_Locale::setCache($cache)</span>
            を使用します。<span class="classname">Zend_Locale_Format</span> を高速化するには、
            オプション <span class="property">cache</span> を
            <span class="classname">Zend_Locale_Format::setOptions(array(&#039;cache&#039; =&gt; $adapter));</span>
            のように指定します。両方のクラスを使用している場合は <span class="classname">Zend_Locale</span>
            にのみキャッシュを設定します。そうしないと、
            後から設定したキャッシュがそれまでの内容を上書きしてしまうことになります。
            利便性を考慮して、静的メソッド
             <span class="methodname">getCache()</span>、 <span class="methodname">hasCache()</span>、
             <span class="methodname">clearCache()</span> および
             <span class="methodname">removeCache()</span> も用意されています。
        </p>

        <p class="para">
            キャッシュを設定しなかった場合は、<span class="classname">Zend_Locale</span>
            が自動的にキャッシュを設定します。
            時には、パフォーマンスが低下するのを承知のうえで
            敢えてキャッシュを設定しないようにしたいこともあるでしょう。
            そんな場合は、静的メソッド
             <span class="methodname">disableCache(true)</span> を使用します。
            このメソッドは、実際に設定されているキャッシュを無効にする
            (削除はしない) だけでなく、
            キャッシュの設定を省略した際に自動的にキャッシュが設定されてしまうことも防ぎます。
        </p>

    </div>

</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.locale.html">Zend_Locale</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.locale.html">Zend_Locale</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.locale.functions.html">Zend_Locale の使用法</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.locale.html">Zend_Locale</a></li>
  <li class="active"><a href="zend.locale.introduction.html">導入</a></li>
  <li><a href="zend.locale.functions.html">Zend_Locale の使用法</a></li>
  <li><a href="zend.locale.parsing.html">正規化および地域化</a></li>
  <li><a href="zend.locale.date.datesandtimes.html">日付および時刻の扱い</a></li>
  <li><a href="zend.locale.appendix.html">サポートするロケール</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>