<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>導入 - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.gdata.html">Zend_Gdata</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.gdata.html">Zend_Gdata</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.gdata.authsub.html">AuthSub による認証</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.gdata.introduction" class="section"><div class="info"><h1 class="title">導入</h1></div>
    
    <p class="para">
        Google Data <acronym class="acronym">API</acronym> は、Google のオンラインサービスに対するプログラマ向けのインターフェイスです。
        Google data Protocol は
        <a href="http://ietfreport.isoc.org/idref/draft-ietf-atompub-protocol/" class="link external">&raquo; Atom Publishing Protocol</a>
        に基づいており、クライアントアプリケーションからのデータの問い合わせ、
        データの投稿、更新、削除などを標準の <acronym class="acronym">HTTP</acronym>
        と Atom syndication formation で行います。

        <span class="classname">Zend_Gdata</span> コンポーネントは <acronym class="acronym">PHP</acronym> 5 用のインターフェイスで、Google Data
        に <acronym class="acronym">PHP</acronym> からアクセスするためのものです。
        <span class="classname">Zend_Gdata</span> コンポーネントは、Atom Publishing Protocol
        を実装したその他のサービスへのアクセスもサポートしています。
    </p>

    <p class="para">
        Google Data <acronym class="acronym">API</acronym> についての詳細な情報は
        <a href="http://code.google.com/apis/gdata/" class="link external">&raquo; http://code.google.com/apis/gdata/</a>
        を参照ください。
    </p>

    <p class="para">
        <span class="classname">Zend_Gdata</span> でアクセスできるサービスには次のようなものがあります。

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <a href="zend.gdata.calendar.html" class="link">Google Calendar</a>
                    は、オンラインカレンダーアプリケーションです。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <a href="zend.gdata.spreadsheets.html" class="link">Google Spreadsheets</a>
                    は、オンラインで共同作業を行えるスプレッドシートツールです。
                    アプリケーションで使用するデータの保存場所としても使用できます。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <a href="zend.gdata.docs.html" class="link">Google Documents List</a>
                    は、その Google アカウントに保存されているすべてのスプレッドシートやワープロ文書、
                    プレゼンテーションの一覧を取得します。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <a href="zend.gdata.gapps.html" class="link">Google Provisioning</a>
                    は、Google Apps がホストするドメイン上の
                    ユーザアカウントやニックネーム、グループ、そしてメーリングリストの
                    作成、取得、更新、削除を行うものです。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <a href="zend.gdata.gbase.html" class="link">Google Base</a>
                    は、Google Base のアイテムを取得したり
                    アイテムを投稿、更新、あるいは削除したりできます。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <a href="zend.gdata.youtube.html" class="link">YouTube</a>
                    は、動画やコメント、お気に入り、登録チャンネル、
                    ユーザのプロファイルといった情報を検索して取得できます。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <a href="zend.gdata.photos.html" class="link">Picasa Web Albums</a>
                    は、オンラインの写真共有アプリケーションです。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    <a href="http://code.google.com/apis/blogger/developers_guide_php.html" class="link external">&raquo; Google Blogger</a>
                    は、人気のあるインターネットプロバイダです。
                    &quot;ボタンひとつで簡単に&quot; 記事を配信できます。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    Google CodeSearch
                    を使用すると、さまざまなプロジェクトが公開しているソースコードを検索できます。
                </p>
            </li>
            <li class="listitem">
                <p class="para">
                    Google Notebook
                    は、メモ帳の内容を一般に公開できます。
                </p>
            </li>
        </ul>
    </p>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>サポートしていないサービス</b><br /></span>
        
        
            <span class="classname">Zend_Gdata</span> には、これら以外の Google のサービス
            (例えば検索、Gmail、翻訳、マップなど)
            に対するインターフェイスは含まれていません。
            Google Data <acronym class="acronym">API</acronym> をサポートしているサービスにのみ対応しています。
        <br />
    </p></blockquote>

    <div class="section" id="zend.gdata.introduction.structure" name="zend.gdata.introduction.structure"><div class="info"><h1 class="title">Zend_Gdata の構造</h1></div>
        
        <p class="para">
            <span class="classname">Zend_Gata</span> は、いくつかの型のクラスを組み合わせたものです。
            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        サービスクラス - これは <span class="classname">Zend_Gdata_App</span> を継承したものです。
                        <span class="classname">Zend_Gdata</span> や <span class="classname">Zend_Gdata_Spreadsheets</span>
                        といったその他のクラスもここに含まれます。
                        これらのクラスは APP や GData サービス とのやり取りを行うもので、
                        フィードを取得したりエントリを取得したり、
                        あるいはエントリを投稿したり更新したり削除したりといったことができます。
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        クエリクラス - これは <span class="classname">Zend_Gdata_Query</span> を継承したものです。
                        各サービス専用のクラス、たとえば <span class="classname">Zend_Gdata_Spreadsheets_ListQuery</span>
                        や <span class="classname">Zend_Gdata_Spreadsheets_CellQuery</span> もここに含まれます。
                        クエリクラスは、GData サービスからデータを取得するためのクエリを作成するものです。
                         <span class="methodname">setUpdatedMin()</span> や
                         <span class="methodname">setStartIndex()</span>、そして
                         <span class="methodname">getPublishedMin()</span> といったメソッドが存在します。
                        クエリクラスには、出来上がったクエリの <acronym class="acronym">URL</acronym> を生成するためのメソッド
                        <code class="code">getQueryUrl</code> もあります。
                        また、 <span class="methodname">getQueryString()</span>
                        メソッドを使用すると、<acronym class="acronym">URL</acronym> のクエリ文字列部分を取得できます。
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        フィードクラス - これは <span class="classname">Zend_Gdata_App_Feed</span> を継承したものです。
                        <span class="classname">Zend_Gdata_Feed</span> や
                        <span class="classname">Zend_Gdata_Spreadsheets_SpreadsheetFeed</span>、
                        <span class="classname">Zend_Gdata_Spreadsheets_ListFeed</span> といったその他のクラスもここに含まれます。
                        これらのクラスはサービスから取得したエントリのフィードを表すものです。
                        サービスから返されたデータを取得するために使用します。
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        エントリクラス - これは <span class="classname">Zend_Gdata_App_Entry</span> を継承したものです。
                        <span class="classname">Zend_Gdata_Entry</span> や <span class="classname">Zend_Gdata_Spreadsheets_ListEntry</span>
                        といったその他のクラスもここに含まれます。
                        これらのクラスは、サービスから取得したエントリを表すものです。また、
                        サービスに送信するデータを作成するためにも用います。
                        エントリのプロパティの値（たとえばスプレッドシートのセルの値など）
                        を設定できるだけでなく、このオブジェクトを使用して
                        既存エントリの更新や削除のリクエストを送信することもできます。
                        たとえば  <span class="methodname">$entry-&gt;save()</span>
                        をコールすると、変更した内容を元のエントリに書き戻します。また
                         <span class="methodname">$entry-&gt;delete()</span> はそのエントリをサーバから削除します。
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        その他のデータモデルクラス - これは
                        <span class="classname">Zend_Gdata_App_Extension</span> を継承したものです。ここには、
                        <span class="classname">Zend_Gdata_App_Extension_Title</span> (atom:title <acronym class="acronym">XML</acronym> 要素を表します)
                        や <span class="classname">Zend_Gdata_Extension_When</span> (GData Event &quot;Kind&quot; で使用する
                        gd:when <acronym class="acronym">XML</acronym> 要素を表します)、そして
                        <span class="classname">Zend_Gdata_Extension_Cell</span> (Google Spreadsheets で使用する
                        gs:cell <acronym class="acronym">XML</acronym> 要素を表します) といったクラスが含まれます。
                        これらのクラスは、サービスから取得したデータを保存したり
                        サービスに送信するデータを構築したりするために用いるものです。
                        プロパティへのアクセス用のメソッドが用意されています。たとえば
                         <span class="methodname">setText()</span> はその要素の子テキストノードの内容を設定し、
                         <span class="methodname">getText()</span> はその要素のテキストノードの内容を取得します。
                        また  <span class="methodname">getStartTime()</span> は When 要素の開始時刻属性を取得します。
                        そのほかにも同様のメソッドがあります。
                        データモデルクラスには、その他のメソッドもあります。
                         <span class="methodname">getDOM()</span> は、その要素とすべての子要素を
                        DOM 形式で表したものを返し、
                         <span class="methodname">transferFromDOM()</span> は
                        DOM ツリーをもとにしたデータモデルを作成します。
                    </p>
                </li>
            </ul>
        </p>
    </div>

    <div class="section" id="zend.gdata.introduction.services" name="zend.gdata.introduction.services"><div class="info"><h1 class="title">Google サービスの使用法</h1></div>
        
        <p class="para">
            Google データサービスは、Atom Publishing Protocol (APP)
            および Atom syndication format に基づいたサービスです。
            <span class="classname">Zend_Gdata</span> コンポーネントを用いて APP や Google
            サービスを扱うには、<span class="classname">Zend_Gdata_App</span> や <span class="classname">Zend_Gdata</span>
            そして <span class="classname">Zend_Gdata_Spreadsheets</span> などのサービスクラスを使用する必要があります。
            サービスクラスには、サービスからデータのフィードを取得したり
            新しいエントリをフィードに挿入したり
            既存のエントリを更新したり削除したりといったメソッドがあります。
        </p>

        <p class="para">
            注意: <span class="classname">Zend_Gdata</span> を用いた実際に動作するサンプルプログラムが
            <code class="code">demos/Zend/Gdata</code> ディレクトリにあります。
            このサンプルはコマンドラインで動かすように作られていますが、
            ウェブアプリケーション版にも簡単に書き換えられるでしょう。
        </p>
    </div>

    <div class="section" id="zend.gdata.introduction.magicfactory" name="zend.gdata.introduction.magicfactory"><div class="info"><h1 class="title">Zend_Gdata クラスのインスタンスの取得</h1></div>
        
        <p class="para">
            Zend Framework の命名規約では、すべてのクラスは
            その存在位置のディレクトリ構造に基づいた名前をつける必要があります。
            たとえば Spreadsheets に関する拡張クラスは
            <code class="code">Zend/Gdata/Spreadsheets/Extension/...</code> 配下に置かれ、
            その結果、クラス名は <span class="classname">Zend_Gdata_Spreadsheets_Extension_...</span>
            となります。ということは、スプレッドシートのセル要素のインスタンスを作成しようとしたら、
            恐ろしく長い名前をタイプすることになるということです!
        </p>
        <p class="para">
            ということで、すべてのサービスクラス
            (<span class="classname">Zend_Gdata_App</span>、<span class="classname">Zend_Gdata</span>、<span class="classname">Zend_Gdata_Spreadsheets</span> など)
            に特別なファクトリメソッドを用意するようにしました。
            これを用いることで、データモデルやクエリ、
            その他のクラスのインスタンスをより簡単に作成できるようになります。
            このファクトリメソッドは、マジックメソッド
            <code class="code">__call</code> を用いて実装しています。このメソッドで、
            <code class="code">$service-&gt;newXXX(arg1, arg2, ...)</code> というコールをすべて処理しています。
            XXX の値に基づいて、登録されているすべての &#039;パッケージ&#039; からクラスを探します。
            以下に例を示します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$ss</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata_Spreadsheets<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Zend_Gdata_App_Spreadsheets_CellEntry を作成します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$entry</span> = <span style="color: #0000ff;">$ss</span>-&gt;<span style="color: #006600;">newCellEntry</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Zend_Gdata_App_Spreadsheets_Extension_Cell を作成します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cell</span> = <span style="color: #0000ff;">$ss</span>-&gt;<span style="color: #006600;">newCell</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cell</span>-&gt;<span style="color: #006600;">setText</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'My cell value'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cell</span>-&gt;<span style="color: #006600;">setRow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'1'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cell</span>-&gt;<span style="color: #006600;">setColumn</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'3'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">cell</span> = <span style="color: #0000ff;">$cell</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ... $entry を使用して、Google Spreadsheet の内容を更新します</span></div></li></ol></div></div></div>


        <p class="para">
            継承ツリー内にある各サービス用クラス内で、
            適切な &#039;パッケージ&#039; (ディレクトリ) を登録します。
            ファクトリメソッドは、これを使用してクラスを探します。
        </p>
    </div>

    <div class="section" id="zend.gdata.introduction.authentication" name="zend.gdata.introduction.authentication"><div class="info"><h1 class="title">Google Data クライアント認証</h1></div>
        
        <p class="para">
            ほとんどの Google Data サービスは、
            個人データへのアクセスやデータの保存、削除の前に
            Google サーバに対する認証を要求します。
            Google Data の認証用に提供される実装は
            <a href="zend.gdata.authsub.html" class="link">AuthSub</a> および
            <a href="zend.gdata.clientlogin.html" class="link">ClientLogin</a>
            の二種類があります。
            <span class="classname">Zend_Gdata</span> ではこれら両方の方式に対するインターフェイスを用意しています。
        </p>

        <p class="para">
            Google Data サービスに対するその他大半の問い合わせは、
            認証を必要としません。
        </p>

    </div>

    <div class="section" id="zend.gdata.introduction.dependencies" name="zend.gdata.introduction.dependencies"><div class="info"><h1 class="title">依存性</h1></div>
        
        <p class="para">
            <span class="classname">Zend_Gdata</span> は
            <a href="zend.http.client.html" class="link">Zend_Http_Client</a>
            を用いてリクエストを google.com に送信し、結果を取得します。
            ほとんどの Google Data リクエストに対する応答は
            <span class="classname">Zend_Gdata_App_Feed</span> あるいは <span class="classname">Zend_Gdata_App_Entry</span>
            クラスのサブクラスで返されます。
        </p>

        <p class="para">
            <span class="classname">Zend_Gdata</span> は、<acronym class="acronym">PHP</acronym> アプリケーションの稼動しているホストが
            インターネットに直接つながっていることを想定しています。
            <span class="classname">Zend_Gdata</span> クライアントは Google Data サーバへの接続を行います。
        </p>

    </div>

    <div class="section" id="zend.gdata.introduction.creation" name="zend.gdata.introduction.creation"><div class="info"><h1 class="title">新しい Gdata クライアントの作成</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Gdata_App</span> クラス、<span class="classname">Zend_Gdata</span> クラス、
            あるいはそのサブクラスのひとつのオブジェクトを作成します。
            各サブクラスではサービス固有のヘルパーメソッドを提供します。
        </p>

        <p class="para">
            <span class="classname">Zend_Gdata_App</span> のコンストラクタに渡すオプションの引数は
            <a href="zend.http.client.html" class="link">Zend_Http_Client</a>
            のインスタンスです。このパラメータを渡さなかった場合は、
            <span class="classname">Zend_Gdata</span> はデフォルトの <span class="classname">Zend_Http_Client</span> オブジェクトを作成します。
            これには、プライベートフィードにアクセスするための認証データは設定されていません。
            <span class="classname">Zend_Http_Client</span> オブジェクトを自分で指定すると、
            クライアントオブジェクトに対する設定オプションを指定できます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$client</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Http_Client<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$client</span>-&gt;<span style="color: #006600;">setConfig</span><span style="color: #66cc66;">&#40;</span> ...オプション... <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$client</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Zend Framework 1.7 以降、プロトコルのバージョン管理のサポートが追加されました。
            これにより、クライアントおよびサーバで新機能をサポートしつつ、
            過去との互換性を保持できるようになります。
            ほとんどのサービスはバージョン管理を自前で行う必要はありませんが、
            <span class="classname">Zend_Gdata</span> のインスタンスを直接作成する場合 (サブクラスを使わない場合)
            は、必要なプロトコルのバージョンを指定してサーバの機能にアクセスする必要があります。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$client</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Http_Client<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$client</span>-&gt;<span style="color: #006600;">setConfig</span><span style="color: #66cc66;">&#40;</span> ...オプション... <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$client</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">setMajorProtocolVersion</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">setMinorProtocolVersion</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">null</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            認証済みの <span class="classname">Zend_Http_Client</span> オブジェクトを作成する方法については、
            認証のセクションも参照ください。
        </p>

    </div>

    <div class="section" id="zend.gdata.introduction.parameters" name="zend.gdata.introduction.parameters"><div class="info"><h1 class="title">共通のクエリパラメータ</h1></div>
        

        <p class="para">
            パラメータを指定することで、<span class="classname">Zend_Gdata</span>
            での問い合わせをカスタマイズできます。
            クエリのパラメータは、 <span class="classname">Zend_Gdata_Query</span>
            のサブクラスを使用して指定します。
            <span class="classname">Zend_Gdata_Query</span> クラスにはクエリパラメータを設定するメソッドが含まれ、
            これを用いて GData サービスにアクセスします。
            たとえば Spreadsheets のような個々のサービスでも
            クエリクラスを用意しており、そのサービスやフィードに合わせた独自のパラメータを定義しています。
            Spreadsheets の CellQuery クラスは Cell Feed
            に対する問い合わせを行い、ListQuery クラスは
            List Feed に対する問い合わせを行います。
            それぞれのフィードに対して別々のパラメータを指定できます。

            GData 全体で使用できるパラメータについて、
            以下で説明します。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">q</code> パラメータはテキストのクエリ文字列を指定します。
                    パラメータの値は文字列となります。
                </p>
                <p class="para">
                    このパラメータを設定するには  <span class="methodname">setQuery()</span>
                    関数を使用します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">alt</code> パラメータはフィードの形式を指定します。
                    このパラメータには
                    <code class="code">atom</code>、
                    <code class="code">rss</code>、
                    <code class="code">json</code>、
                    あるいは <code class="code">json-in-script</code> のいずれかを指定します。
                    このパラメータを指定しなかった場合、デフォルトのフィードの形式は
                    <code class="code">atom</code> となります。
                    注意: <span class="classname">Zend_Gdata</span> で処理できるのは、
                    atom フィード形式の出力だけであることに注意しましょう。
                    <span class="classname">Zend_Http_Client</span> を使用するとその他の形式のフィードも取得できます。
                    その際は、<span class="classname">Zend_Gdata_Query</span>
                    クラスやそのサブクラスが作成したクエリ <acronym class="acronym">URL</acronym> を使用します。
                </p>
                <p class="para">
                    このパラメータを設定するには  <span class="methodname">setAlt()</span>
                    関数を使用します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">maxResults</code> パラメータはフィード内のエントリ数を制限します。
                    整数値を指定します。返されるフィード内のエントリの数は、
                    この値を超えることはありません。
                </p>
                <p class="para">
                    このパラメータを設定するには  <span class="methodname">setMaxResults()</span>
                    関数を使用します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">startIndex</code> パラメータは、
                    フィードで返される最初のエントリの番号を指定します。
                    それ以前の番号のエントリは読み飛ばされます。
                </p>
                <p class="para">
                    このパラメータを設定するには  <span class="methodname">setStartIndex()</span>
                    関数を使用します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">updatedMin</code> パラメータおよび <code class="code">updatedMax</code>
                    パラメータは、エントリの日付の範囲を指定します。
                    <code class="code">updatedMin</code> を指定すると、
                    それより前に更新されたエントリはフィードに含まれません。
                    同様に、<code class="code">updatedMax</code>
                    で指定した日付より後で更新されたエントリもフィードに含まれません。
                </p>
                <p class="para">
                    これらのパラメータには、タイムスタンプを表す数値を指定します。
                    あるいは 日付/時刻 を表す文字列を指定することもできます。
                </p>
                <p class="para">
                    これらのパラメータを設定するには  <span class="methodname">setUpdatedMin()</span>
                    および  <span class="methodname">setUpdatedMax()</span> 関数を使用します。
                </p>
            </li>

        </ul>

        <p class="para">
            これらの <code class="code">set</code> 関数に対応する
            <code class="code">get</code> 関数もあります。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata_Query<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">setMaxResults</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">10</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">getMaxResults</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;&nbsp; &nbsp;<span style="color: #808080; font-style: italic;">// 10 を返します</span></div></li></ol></div></div></div>


        <p class="para">
            <span class="classname">Zend_Gdata</span> クラスでは、
            特別なゲッターメソッドおよびセッターメソッドも実装しています。
            つまり、パラメータの名前をクラスの仮想的なメンバとして扱うことができます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata_Query<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">maxResults</span> = <span style="color: #cc66cc;">10</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">maxResults</span>;&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// 10 を返します</span></div></li></ol></div></div></div>


        <p class="para">
            すべてのパラメータを消去するには  <span class="methodname">resetParameters()</span>
            を使用します。複数のクエリで <span class="classname">Zend_Gdata</span>
            を使いまわす場合などに便利です。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata_Query<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">maxResults</span> = <span style="color: #cc66cc;">10</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ...フィードを取得します...</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">resetParameters</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;&nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// すべてのパラメータを消去します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ...別のフィードを取得します...</span></div></li></ol></div></div></div>


    </div>

    <div class="section" id="zend.gdata.introduction.getfeed" name="zend.gdata.introduction.getfeed"><div class="info"><h1 class="title">フィードの取得</h1></div>
        

        <p class="para">
             <span class="methodname">getFeed()</span> を使用して、指定した <acronym class="acronym">URI</acronym> からフィードを取得します。
            この関数は、getFeed の二番目の引数で指定したクラスのインスタンスを返します。
            このクラスのデフォルトは <span class="classname">Zend_Gdata_Feed</span> です。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata_Query<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'http://www.blogger.com/feeds/blogID/posts/default'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">setMaxResults</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">10</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$feed</span> = <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">getFeed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            この後の節で、各 Google Data
            サービス用のヘルパークラス固有の関数について説明します。これらの関数により、
            対応するサービスにあわせた適切な <acronym class="acronym">URI</acronym> からフィードを取得できるようになります。
        </p>

    </div>

    <div class="section" id="zend.gdata.introduction.paging" name="zend.gdata.introduction.paging"><div class="info"><h1 class="title">複数ページのフィードの扱い方</h1></div>
        

        <p class="para">
            多くのエントリが含まれるフィードを取得した場合、
            そのフィードはいくつかの「ページ」に分かれていることがあるかもしれません。
            そのような場合には、各ページには次のページへのリンクが含まれることになります。
            このリンクにアクセスするには
             <span class="methodname">getLink(&#039;next&#039;)</span> を使用します。
            この例は、フィードの次のページを取得する方法を示すものです。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">function</span> getNextPage<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$feed</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$nextURL</span> = <span style="color: #0000ff;">$feed</span>-&gt;<span style="color: #006600;">getLink</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'next'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$nextURL</span> !== <span style="color: #000000; font-weight: bold;">null</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">return</span> <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">getFeed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$nextURL</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span> <span style="color: #b1b100;">else</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">return</span> <span style="color: #000000; font-weight: bold;">null</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
            もしこのようにページに分かれているのが気に入らない場合は、
            フィードの最初のページを
             <span class="methodname">Zend_Gdata_App::retrieveAllEntriesForFeed()</span>
            に渡しましょう。そうすると、
            すべてのエントリの内容をひとつのフィードにまとめてくれます。
            この関数の使用法を、次の例で示します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata_Query<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'http://www.blogger.com/feeds/blogID/posts/default'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$feed</span> = <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">retrieveAllEntriesForFeed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">getFeed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            大きなフィードに対してこの関数をコールすると、
            処理に時間がかかるということに注意しましょう。
             <span class="methodname">set_time_limit()</span>
            で <acronym class="acronym">PHP</acronym> の実行時間制限を拡大する必要があるかもしれません。
        </p>

    </div>

    <div class="section" id="zend.gdata.introduction.usefeedentry" name="zend.gdata.introduction.usefeedentry"><div class="info"><h1 class="title">フィードやエントリ内のデータの操作</h1></div>
        

        <p class="para">
            フィードを取得したら、次はそのデータを読み込んだり
            そこに含まれるエントリを読み込んだりする番です。
            これには各データモデルクラスのアクセス用メソッドを使用するか、
            あるいはマジックメソッドを使用します。以下に例を示します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$client</span> = Zend_Gdata_ClientLogin::<span style="color: #006600;">getHttpClient</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$user</span>, <span style="color: #0000ff;">$pass</span>, <span style="color: #0000ff;">$service</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$client</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata_Query<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'http://www.blogger.com/feeds/blogID/posts/default'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">setMaxResults</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">10</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$feed</span> = <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">getFeed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$feed</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$entry</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// マジックメソッドを使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #ff0000;">'Title: '</span> . <span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">title</span>-&gt;<span style="color: #006600;">text</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// 定義されているアクセス用メソッドを使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #ff0000;">'Content: '</span> . <span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">getContent</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>-&gt;<span style="color: #006600;">getText</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.gdata.introduction.updateentry" name="zend.gdata.introduction.updateentry"><div class="info"><h1 class="title">エントリの更新</h1></div>
        

        <p class="para">
            エントリを取得したら、それを更新してサーバに保存できます。以下に例を示します。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$client</span> = Zend_Gdata_ClientLogin::<span style="color: #006600;">getHttpClient</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$user</span>, <span style="color: #0000ff;">$pass</span>, <span style="color: #0000ff;">$service</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$client</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata_Query<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'http://www.blogger.com/feeds/blogID/posts/default'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">setMaxResults</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">10</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$feed</span> = <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">getFeed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$feed</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$entry</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// タイトルに 'NEW' を追加します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #ff0000;">'Old Title: '</span> . <span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">title</span>-&gt;<span style="color: #006600;">text</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">title</span>-&gt;<span style="color: #006600;">text</span> = <span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">title</span>-&gt;<span style="color: #006600;">text</span> . <span style="color: #ff0000;">' NEW'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// エントリの内容を更新します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$newEntry</span> = <span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">save</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #ff0000;">'New Title: '</span> . <span style="color: #0000ff;">$newEntry</span>-&gt;<span style="color: #006600;">title</span>-&gt;<span style="color: #006600;">text</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.gdata.introduction.post" name="zend.gdata.introduction.post"><div class="info"><h1 class="title">Google サーバへのエントリの送信</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Gdata</span> オブジェクトの関数  <span class="methodname">insertEntry()</span>
            にアップロードしたいデータを指定し、
            新しいエントリを Google Data サービスに保存します。
        </p>

        <p class="para">
            各サービス用のデータモデルクラスを使用して適切なエントリを作成し、
            Google のサービスに投稿できます。
             <span class="methodname">insertEntry()</span> 関数には、
            <span class="classname">Zend_Gdata_App_Entry</span> の子クラスに投稿内容を格納して渡します。
            このメソッドは <span class="classname">Zend_Gdata_App_Entry</span> の子クラスを返します。
            これは、サーバから返されたエントリの状態を表します。
        </p>

        <p class="para">
            もうひとつの方法として、そのエントリの内容を
            <acronym class="acronym">XML</acronym> 構造の文字列として作成して
             <span class="methodname">insertEntry()</span> 関数に渡すこともできます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$authenticatedHttpClient</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$entry</span> = <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">newEntry</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">title</span> = <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">newTitle</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Playing football at the park'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$content</span> =</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">newContent</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'We will visit the park and play football'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$content</span>-&gt;<span style="color: #006600;">setType</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'text'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$entry</span>-&gt;<span style="color: #006600;">content</span> = <span style="color: #0000ff;">$content</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$entryResult</span> = <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">insertEntry</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$entry</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'http://www.blogger.com/feeds/blogID/posts/default'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #ff0000;">'この結果のエントリの &lt;id&gt; は、'</span> . <span style="color: #0000ff;">$entryResult</span>-&gt;<span style="color: #006600;">id</span>-&gt;<span style="color: #006600;">text</span>;</div></li></ol></div></div></div>


        <p class="para">
            エントリを送信するには、認証済みの <span class="classname">Zend_Http_Client</span>
            を使用する必要があります。これは、
            <span class="classname">Zend_Gdata_AuthSub</span> クラスあるいは
            <span class="classname">Zend_Gdata_ClientLogin</span> クラスを使用して作成します。
        </p>

    </div>

    <div class="section" id="zend.gdata.introduction.delete" name="zend.gdata.introduction.delete"><div class="info"><h1 class="title">Google サーバからのデータの削除</h1></div>
        

        <p class="para">
            方法 1: <span class="classname">Zend_Gdata</span> オブジェクトの関数  <span class="methodname">delete()</span>
            に削除したいエントリを指定して、Google Data
            サービスからデータを削除します。
            フィードエントリの編集用 <acronym class="acronym">URL</acronym> を
             <span class="methodname">delete()</span> メソッドに渡します。
        </p>

        <p class="para">
            方法 2: あるいは、Google サービスから取得したエントリに対して
             <span class="methodname">$entry-&gt;delete()</span> をコールすることもできます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$gdata</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Gdata<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$authenticatedHttpClient</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Google Data のフィード</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$feedUri</span> = ...;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$feed</span> = <span style="color: #0000ff;">$gdata</span>-&gt;<span style="color: #006600;">getFeed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$feedUri</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$feed</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$feedEntry</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// 方法 1 - エントリを直接削除します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$feedEntry</span>-&gt;<span style="color: #006600;">delete</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// 方法 2 - 編集用 URL を $gdata-&gt;delete()</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// に渡してエントリを削除します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// $gdata-&gt;delete($feedEntry-&gt;getEditLink()-&gt;href);</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
            エントリを削除するには、認証済みの <span class="classname">Zend_Http_Client</span>
            を使用する必要があります。これは、
            <span class="classname">Zend_Gdata_AuthSub</span> クラスあるいは
            <span class="classname">Zend_Gdata_ClientLogin</span> クラスを使用して作成します。
        </p>

    </div>

</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.gdata.html">Zend_Gdata</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.gdata.html">Zend_Gdata</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.gdata.authsub.html">AuthSub による認証</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.gdata.html">Zend_Gdata</a></li>
  <li class="active"><a href="zend.gdata.introduction.html">導入</a></li>
  <li><a href="zend.gdata.authsub.html">AuthSub による認証</a></li>
  <li><a href="zend.gdata.books.html">Using the Book Search Data API</a></li>
  <li><a href="zend.gdata.clientlogin.html">ClientLogin による認証</a></li>
  <li><a href="zend.gdata.calendar.html">Google Calendar の使用法</a></li>
  <li><a href="zend.gdata.docs.html">Google Documents List Data API の使用法</a></li>
  <li><a href="zend.gdata.health.html">Using Google Health</a></li>
  <li><a href="zend.gdata.spreadsheets.html">Google Spreadsheets の使用法</a></li>
  <li><a href="zend.gdata.gapps.html">Google Apps Provisioning の使用法</a></li>
  <li><a href="zend.gdata.gbase.html">Google Base の使用法</a></li>
  <li><a href="zend.gdata.photos.html">Picasa Web Albums の使用法</a></li>
  <li><a href="zend.gdata.youtube.html">YouTube Data API の使用法</a></li>
  <li><a href="zend.gdata.exception.html">Gdata の例外処理</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>