<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_Cache のバックエンド - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.cache.frontends.html">Zend_Cache のフロントエンド</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.cache.html">Zend_Cache</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.cache.cache.manager.html">The Cache Manager</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.cache.backends" class="section"><div class="info"><h1 class="title"><span class="classname">Zend_Cache</span> のバックエンド</h1></div>
    
    <p class="para">
        バックエンドには、標準と拡張の 2 種類があります。
        もちろん、拡張バックエンドのほうがより高機能となります。
    </p>
    <div class="section" id="zend.cache.backends.file" name="zend.cache.backends.file"><div class="info"><h1 class="title">Zend_Cache_Backend_File</h1></div>
        
        <p class="para">
            この (拡張) バックエンドは、キャッシュレコードを
            (指定したディレクトリの) ファイルに保存します。
        </p>
        <p class="para">
            使用可能なオプションは次のとおりです。
        </p>
        <table class="doctable table"><div class="info"><caption><b>File バックエンドのオプション</b></caption></div>
            
            
                 <thead valign="middle">
                      <tr valign="middle">
                        <th>オプション</th>
                        <th>データ型</th>
                        <th>デフォルト値</th>
                        <th>説明</th>
                    </tr>

                 </thead>

                 <tbody valign="middle" class="tbody">
                      <tr valign="middle">
                          <td align="left"><em class="emphasis">cache_dir</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">[system temp dir]</td>
                          <td align="left">
                              キャッシュファイルを書き込むディレクトリ。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">file_locking</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>TRUE</tt></b></td>
                          <td align="left">
                            ファイルロックを有効/無効にします。
                            不慮の事故でキャッシュが破壊されることを防げますが、
                            マルチスレッドなウェブサーバ環境や <acronym class="acronym">NFS</acronym> ファイルシステム上では役に立ちません。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">read_control</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>TRUE</tt></b></td>
                          <td align="left">
                            読み込み制御を有効/無効にします。有効にすると
                            キャッシュファイルに制御キーが埋め込まれます。
                            キャッシュの読み込み後、計算した結果とキャッシュのキーを比較します。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">read_control_type</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">&#039;crc32&#039;</td>
                          <td align="left">
                            読み込み制御の方式 (読み込み制御が有効な場合にのみ使用します)。
                            使用可能な値は
                            &#039;md5&#039; (一番安全だが、最も遅い)、
                            &#039;crc32&#039; (安全性には劣るが、より高速。悪くない選択肢です)、
                            &#039;adler32&#039; (新たな選択肢。crc32 より高速です)、
                            &#039;strlen&#039; (最も高速。長さのみをチェックします)
                            のいずれかです。
                        </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">hashed_directory_level</em></td>
                          <td align="left"> <span class="type">Integer</span> </td>
                          <td align="left">0</td>
                          <td align="left">
                            ディレクトリ構造のレベルを指定します。0 は &quot;ディレクトリ階層を作らない&quot;、
                            1 は &quot;一段階のサブディレクトリを作る&quot;、2 は &quot;二段階の……&quot; を意味します。
                            何千ものキャッシュファイルを使用する場合にのみ、
                            このオプションによる高速化を実感できるでしょう。
                            適切な設定値を決めるには、実際にベンチマークを取得するしかありません。
                            たいていの場合は 1 または 2 でよいでしょう。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">hashed_directory_umask</em></td>
                          <td align="left"> <span class="type">Integer</span> </td>
                          <td align="left">0700</td>
                          <td align="left">
                              ディレクトリ構造の umask を指定します。
                        </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">file_name_prefix</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">&#039;zend_cache&#039;</td>
                          <td align="left">
                              キャッシュファイルのプレフィックスを設定します。
                              このオプションを設定する際には十分注意しましょう。
                              あまりにもありふれた値をシステムのキャッシュディレクトリ
                              (<var class="filename">/tmp</var> など) で使用すると、
                              キャッシュの削除の際に余計なものまで削除されてしまうはめになります。
                        </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">cache_file_umask</em></td>
                          <td align="left"> <span class="type">Integer</span> </td>
                          <td align="left">0600</td>
                          <td align="left">
                              キャッシュファイルの umask を設定します。
                          </td>
                      </tr>

                       <tr valign="middle">
                          <td align="left"><em class="emphasis">metatadatas_array_max_size</em></td>
                          <td align="left"> <span class="type">Integer</span> </td>
                          <td align="left">100</td>
                          <td align="left">
                              メタデータ配列の内部最大サイズを設定します
                              (よくわからない場合はこの値を変更してはいけません)。
                          </td>
                      </tr>

                  </tbody>
              
          </table>

    </div>
    <div class="section" id="zend.cache.backends.sqlite" name="zend.cache.backends.sqlite"><div class="info"><h1 class="title">Zend_Cache_Backend_Sqlite</h1></div>
        
        <p class="para">
            この (拡張) バックエンドは、キャッシュレコードを
            SQLite データベースに保存します。
        </p>
        <p class="para">
            使用可能なオプションは次のとおりです。
        </p>
        <table class="doctable table"><div class="info"><caption><b>Sqlite バックエンドのオプション</b></caption></div>
            
            
                 <thead valign="middle">
                      <tr valign="middle">
                        <th>オプション</th>
                        <th>データ型</th>
                        <th>デフォルト値</th>
                        <th>説明</th>
                    </tr>

                 </thead>

                 <tbody valign="middle" class="tbody">
                      <tr valign="middle">
                          <td align="left"><em class="emphasis">cache_db_complete_path (必須)</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left"><b><tt>NULL</tt></b></td>
                          <td align="left">
                              SQLite データベースへの (ファイル名も含めた) フルパス。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">automatic_vacuum_factor</em></td>
                          <td align="left"> <span class="type">Integer</span> </td>
                          <td align="left">10</td>
                          <td align="left">
                              自動バキューム処理の設定を行います。
                              自動バキューム処理とは、 <span class="methodname">clean()</span> や  <span class="methodname">delete()</span>
                              がコールされた際に自動的にデータベースの断片化解消を行う
                              (そしてサイズを縮小する) ことです。
                              0 を指定すると、自動バキュームを行いません。
                              1 を指定すると ( <span class="methodname">delete()</span> や  <span class="methodname">clean()</span>
                              がコールされると) そのたびにバキュームを行います。
                              x (1 より大きな整数) を指定すると、
                               <span class="methodname">clean()</span> や  <span class="methodname">delete()</span> が x 回コールされるたびに
                              一回の頻度でランダムに自動バキュームを行います。
                          </td>
                      </tr>

                  </tbody>
              
          </table>

    </div>
    <div class="section" id="zend.cache.backends.memcached" name="zend.cache.backends.memcached"><div class="info"><h1 class="title">Zend_Cache_Backend_Memcached</h1></div>
        
        <p class="para">
            この (拡張) バックエンドは、キャッシュレコードを memcached サーバに保存します。
            <a href="http://www.danga.com/memcached/" class="link external">&raquo; memcached</a> は、
            高性能な分散メモリオブジェクトキャッシュシステムです。このバックエンドを使用するには、
            memcached デーモンおよび
            <a href="http://pecl.php.net/package/memcache" class="link external">&raquo; memcache <acronym class="acronym">PECL</acronym> 拡張モジュール</a>
            が必要です。
        </p>
        <p class="para">
            注意: このバックエンドでは、今のところ &quot;タグ&quot; がサポートされていません。
            また、引数 &quot;doNotTestCacheValidity=true&quot; もサポートされていません。
        </p>
        <p class="para">
            使用可能なオプションは次のとおりです。
        </p>
        <table class="doctable table"><div class="info"><caption><b>Memcached バックエンドのオプション</b></caption></div>
            
            
                 <thead valign="middle">
                      <tr valign="middle">
                        <th>オプション</th>
                        <th>データ型</th>
                        <th>デフォルト値</th>
                        <th>説明</th>
                    </tr>

                 </thead>

                 <tbody valign="middle" class="tbody">
                      <tr valign="middle">
                          <td align="left"><em class="emphasis">servers</em></td>
                          <td align="left"> <span class="type">Array</span> </td>
                          <td align="left">
                              <strong class="command">array(array(&#039;host&#039; =&gt; &#039;localhost&#039;, &#039;port&#039; =&gt; 11211,
                                  &#039;persistent&#039; =&gt; true, &#039;weight&#039; =&gt; 1, &#039;timeout&#039; =&gt; 5,
                                  &#039;retry_interval&#039; =&gt; 15, &#039;status&#039; =&gt; true,
                                  &#039;failure_callback&#039; =&gt; &#039;&#039; ))</strong>
                          </td>
                          <td align="left">
                              memcached サーバの配列です。各 memcached サーバの情報は、
                              以下のような連想配列で指定します。
                              &#039;host&#039; =&gt; (string) : memcached サーバのサーバ名
                              &#039;port&#039; =&gt; (int) : memcached サーバのポート番号
                              &#039;persistent&#039; =&gt; (bool) : この memcached サーバに対して持続的な接続を使用するかどうか
                              &#039;weight&#039; =&gt; (int) : memcached サーバの重み付け
                              &#039;timeout&#039; =&gt; (int) : memcached サーバのタイムアウト
                              &#039;retry_interval&#039; =&gt; (int) : memcached サーバの再試行間隔
                              &#039;status&#039; =&gt; (bool) : memcached サーバのステータス
                              &#039;failure_callback&#039; =&gt; (callback) : memcached サーバのコールバック関数
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">compression</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>FALSE</tt></b></td>
                          <td align="left">
                             その場での圧縮処理を行いたい場合に <b><tt>TRUE</tt></b> を指定します。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">compatibility</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>FALSE</tt></b></td>
                          <td align="left">
                             古い memcache サーバ/拡張モジュールとの互換性モードを使用したい場合に
                             <b><tt>TRUE</tt></b> を指定します。
                          </td>
                      </tr>

                  </tbody>
              
          </table>

    </div>

    
    <div class="section" id="zend.cache.backends.libmemcached" name="zend.cache.backends.libmemcached"><div class="info"><h1 class="title">Zend_Cache_Backend_Libmemcached</h1></div>
        

        <p class="para">
            This (extended) backend stores cache records into a memcached server. <a href="http://www.danga.com/memcached/" class="link external">&raquo; memcached</a> is a high-performance,
            distributed memory object caching system. To use this backend, you need a memcached
            daemon and <a href="http://pecl.php.net/package/memcached" class="link external">&raquo; the memcached
                <acronym class="acronym">PECL</acronym> extension</a>.
        </p>

        <p class="para">
            Be careful : with this backend, &quot;tags&quot; are not supported for the moment as
            the &quot;doNotTestCacheValidity=true&quot; argument.
        </p>

        <p class="para">
            Available options are :
        </p>

        <table class="doctable table"><div class="info"><caption><b>Libmemcached Backend Options</b></caption></div>
            

            
                <thead valign="middle">
                    <tr valign="middle">
                        <th>Option</th>
                        <th>Data Type</th>
                        <th>Default Value</th>
                        <th>Description</th>
                    </tr>

                </thead>


                <tbody valign="middle" class="tbody">
                    <tr valign="middle">
                        <td align="left"><em class="emphasis">servers</em></td>
                        <td align="left"> <span class="type">Array</span> </td>

                        <td align="left">
                            <strong class="command">array(array(&#039;host&#039; =&gt; &#039;localhost&#039;, &#039;port&#039; =&gt; 11211,
                            &#039;weight&#039; =&gt; 1))</strong>
                        </td>

                        <td align="left">
                            An array of memcached servers ; each memcached server is described by
                            an associative array:
                            &#039;host&#039; =&gt; (string) : the name of the memcached server,
                            &#039;port&#039; =&gt; (int) : the port of the memcached server,
                            &#039;weight&#039; =&gt; (int) :the weight of the memcached server
                        </td>
                    </tr>

                    <tr valign="middle">
                        <td align="left"><em class="emphasis">client</em></td>
                        <td align="left"> <span class="type">Array</span> </td>

                        <td align="left">
                            <strong class="command">array(
                                Memcached::OPT_DISTRIBUTION =&gt; Memcached::DISTRIBUTION_CONSISTENT,
                                Memcached::OPT_HASH =&gt; Memcached::HASH_MD5,
                                Memcached::OPT_LIBKETAMA_COMPATIBLE =&gt; true
                            )</strong>
                        </td>

                        <td align="left">
                            An associative array of memcached client options ;
                            The array key can be the name of the memcached option constant
                            (without &#039;OPT_&#039;) or the integer value of it.
                            See <a href="http://php.net/manual/memcached.constants.php" class="link external">&raquo; 
                                Memcached constants on <acronym class="acronym">PHP</acronym> manual</a>
                        </td>
                    </tr>

                </tbody>
            
        </table>

    </div>

    <div class="section" id="zend.cache.backends.apc" name="zend.cache.backends.apc"><div class="info"><h1 class="title">Zend_Cache_Backend_Apc</h1></div>
        
        <p class="para">
            この (拡張) バックエンドは、キャッシュレコードを共有メモリに保存する際に
            <a href="http://pecl.php.net/package/APC" class="link external">&raquo; APC</a> (Alternative <acronym class="acronym">PHP</acronym> Cache)
            拡張モジュールを使用します
            (当然、このバックエンドを使用するにはこの拡張モジュールが必要です)。
        </p>
        <p class="para">
            注意: このバックエンドでは、今のところ &quot;タグ&quot; がサポートされていません。
            また、引数 &quot;doNotTestCacheValidity=true&quot; もサポートされていません。
        </p>
        <p class="para">
            このバックエンドではオプションを使用しません。
        </p>
    </div>
    <div class="section" id="zend.cache.backends.xcache" name="zend.cache.backends.xcache"><div class="info"><h1 class="title">Zend_Cache_Backend_Xcache</h1></div>
        
        <p class="para">
            このバックエンドは、キャッシュレコードを共有メモリに保存する際に
            <a href="http://xcache.lighttpd.net/" class="link external">&raquo; XCache</a>
            拡張モジュールを使用します
            (当然、このバックエンドを使うにはこの拡張モジュールが必要となります)。
        </p>
        <p class="para">
            注意: このバックエンドでは、今のところ &quot;タグ&quot; がサポートされていません。
            また、引数 &quot;doNotTestCacheValidity=true&quot; もサポートされていません。
        </p>
        <p class="para">
            使用可能なオプションは次のとおりです。
        </p>
        <table class="doctable table"><div class="info"><caption><b>Xcache バックエンドのオプション</b></caption></div>
            
            
                 <thead valign="middle">
                      <tr valign="middle">
                        <th>オプション</th>
                        <th>データ型</th>
                        <th>デフォルト値</th>
                        <th>説明</th>
                    </tr>

                 </thead>

                 <tbody valign="middle" class="tbody">
                      <tr valign="middle">
                          <td align="left"><em class="emphasis">user</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left"><b><tt>NULL</tt></b></td>
                          <td align="left">
                              <var class="filename">xcache.admin.user</var> です。
                               <span class="methodname">clean()</span> メソッドを使う際に必要です。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">password</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left"><b><tt>NULL</tt></b></td>
                          <td align="left">
                              <var class="filename">xcache.admin.pass</var> (<acronym class="acronym">MD5</acronym> ではない平文形式) です。
                               <span class="methodname">clean()</span> メソッドを使う際に必要です。
                          </td>
                      </tr>

                  </tbody>
              
          </table>

    </div>
    <div class="section" id="zend.cache.backends.platform" name="zend.cache.backends.platform"><div class="info"><h1 class="title">Zend_Cache_Backend_ZendPlatform</h1></div>
        
        <p class="para">
            このバックエンドは、<a href="http://www.zend.co.jp/product/zendplatform.html" class="link external">&raquo; Zend Platform</a>
            製品のコンテンツキャッシング <acronym class="acronym">API</acronym> を使用します。当然、このバックエンドを使用するには
            Zend Platform をインストールする必要があります。
        </p>
        <p class="para">
            このバックエンドはタグをサポートしています。しかし、
            クリーニングモード <b><tt>CLEANING_MODE_NOT_MATCHING_TAG</tt></b> はサポートしていません。
        </p>
        <p class="para">
             <span class="methodname">Zend_Cache::factory()</span> メソッドでこのバックエンドを指定する場合は、
            &#039;Zend&#039; と &#039;Platform&#039; の間に区切り文字を入れます。区切り文字としては
            &#039;-&#039;、&#039;.&#039;、&#039; &#039; あるいは &#039;_&#039; が使用できます。
        </p>
        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cache</span> = Zend_Cache::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Core'</span>, <span style="color: #ff0000;">'Zend Platform'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        <p class="para">
            このバックエンドではオプションを使用しません。
        </p>
    </div>
    <div class="section" id="zend.cache.backends.twolevels" name="zend.cache.backends.twolevels"><div class="info"><h1 class="title">Zend_Cache_Backend_TwoLevels</h1></div>
        
        <p class="para">
            この (拡張) バックエンドは複合型です。
            キャッシュレコードを、
            高速 (だが制限付き) な Apc、Memcache…… および &quot;低速&quot;
            な File、Sqlite…… の 2 種類の別々のバックエンドに格納します。
        </p>
        <p class="para">
            このバックエンドは priority パラメータを使用 (フロントエンドレベルで、記録開始時に指定)
            し、高速バックエンドの残りのスペースを用いてふたつのバックエンドの使用を最適化します。
        </p>
        <p class="para">
             <span class="methodname">Zend_Cache::factory()</span> メソッドでこのバックエンドを指定する場合は、
            &#039;Two&#039; と &#039;Levels&#039; の間に区切り文字を入れます。区切り文字としては
            &#039;-&#039;、&#039;.&#039;、&#039; &#039; あるいは &#039;_&#039; が使用できます。
        </p>
        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cache</span> = Zend_Cache::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Core'</span>, <span style="color: #ff0000;">'Two Levels'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        <p class="para">
            使用可能なオプションは次のとおりです。
        </p>
        <table class="doctable table"><div class="info"><caption><b>TwoLevels バックエンドのオプション</b></caption></div>
            
            
                 <thead valign="middle">
                      <tr valign="middle">
                        <th>オプション</th>
                        <th>データ型</th>
                        <th>デフォルト値</th>
                        <th>説明</th>
                    </tr>

                 </thead>

                 <tbody valign="middle" class="tbody">
                      <tr valign="middle">
                          <td align="left"><em class="emphasis">slow_backend</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">File</td>
                          <td align="left">
                              &quot;低速&quot; バックエンドの名前。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">fast_backend</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">Apc</td>
                          <td align="left">
                              &quot;高速&quot; バックエンドの名前。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">slow_backend_options</em></td>
                          <td align="left"> <span class="type">Array</span> </td>
                          <td align="left"> <span class="methodname">array()</span></td>
                          <td align="left">
                              &quot;低速&quot; バックエンドのオプション。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">fast_backend_options</em></td>
                          <td align="left"> <span class="type">Array</span> </td>
                          <td align="left"> <span class="methodname">array()</span></td>
                          <td align="left">
                              &quot;高速&quot; バックエンドのオプション。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">slow_backend_custom_naming</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>FALSE</tt></b></td>
                          <td align="left">
                              <b><tt>TRUE</tt></b> の場合は、引数 slow_backend を完全なクラス名として使用します。
                              <b><tt>FALSE</tt></b> の場合は、引数をクラス名 &quot;<span class="classname">Zend_Cache_Backend_</span>[...]&quot;
                              の最後の部分として使用します。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">fast_backend_custom_naming</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>FALSE</tt></b></td>
                          <td align="left">
                              <b><tt>TRUE</tt></b> の場合は、引数 fast_backend を完全なクラス名として使用します。
                              <b><tt>FALSE</tt></b> の場合は、引数をクラス名 &quot;<span class="classname">Zend_Cache_Backend_</span>[...]&quot;
                              の最後の部分として使用します。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">slow_backend_autoload</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>FALSE</tt></b></td>
                          <td align="left">
                              <b><tt>TRUE</tt></b> の場合は、低速バックエンドに対して require_once を行いません
                              (独自のバックエンドを使用する場合にのみ有用です)。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">fast_backend_autoload</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>FALSE</tt></b></td>
                          <td align="left">
                              <b><tt>TRUE</tt></b> の場合は、高速バックエンドに対して require_once を行いません
                              (独自のバックエンドを使用する場合にのみ有用です)。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">auto_refresh_fast_cache</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>TRUE</tt></b></td>
                          <td align="left">
                              <b><tt>TRUE</tt></b> の場合は、キャッシュレコードにヒットしたときに
                              高速キャッシュを自動的にリフレッシュします。
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">stats_update_factor</em></td>
                          <td align="left"> <span class="type">Integer</span> </td>
                          <td align="left">10</td>
                          <td align="left">
                              高速バックエンドを使用率の計算を無効化 / 効率化します
                              (レコードをキャッシュに書き込む際の
                              高速バックエンド使用率の計算は、
                              キャッシュ書き込み x 回につき 1 回の割合でランダムに行われます)。
                          </td>
                      </tr>

                  </tbody>
              
          </table>

    </div>
    <div class="section" id="zend.cache.backends.zendserver" name="zend.cache.backends.zendserver"><div class="info"><h1 class="title">Zend_Cache_Backend_ZendServer_Disk および Zend_Cache_Backend_ZendServer_ShMem</h1></div>
        
        <p class="para">
            これらのバックエンドは、キャッシュレコードの保存に
            <a href="http://www.zend.co.jp/product/zendserver.html" class="link external">&raquo; Zend Server</a>
            のキャッシュ機能を使用します。
        </p>
        <p class="para">
             注意: このバックエンドでは、今のところ &quot;タグ&quot; がサポートされていません。
             また、引数 &quot;doNotTestCacheValidity=true&quot; もサポートされていません。
        </p>
        <p class="para">
             これらのバックエンドが動作するのは、Zend Server 環境で
             <acronym class="acronym">HTTP</acronym> あるいは <acronym class="acronym">HTTPS</acronym>
             越しにページをリクエストした場合のみです。
             コマンドラインでスクリプトを実行した場合は動作しません。
        </p>
        <p class="para">
             <span class="methodname">Zend_Cache::factory()</span> メソッドでこのバックエンドを指定する場合は、
            パラメータ <em class="emphasis">customBackendNaming</em> を <b><tt>TRUE</tt></b> とします。
        </p>
        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$cache</span> = Zend_Cache::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Core'</span>, <span style="color: #ff0000;">'Zend_Cache_Backend_ZendServer_Disk'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">$frontendOptions</span>, <span style="color: #0000ff;">$backendOptions</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        <p class="para">
            このバックエンドにはオプションはありません。
        </p>
    </div>

    
    <div class="section" id="zend.cache.backends.static" name="zend.cache.backends.static"><div class="info"><h1 class="title">Zend_Cache_Backend_Static</h1></div>
        
        <p class="para">
            This backend works in concert with <span class="classname">
            Zend_Cache_Frontend_Capture</span> (the two must be used
            together) to save the output from requests as static files. This
            means the static files are served directly on subsequent requests
            without any involvement of PHP or the Zend Framework at all.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                <span class="classname">Zend_Cache_Frontend_Capture</span> operates
                by registering a callback function to be called
                when the output buffering it uses is cleaned. In order for this to operate
                correctly, it must be the final output buffer in the request. To guarantee
                this, the output buffering used by the Dispatcher <em class="emphasis">must</em> be
                disabled by calling <span class="classname">Zend_Controller_Front</span>&#039;s
                 <span class="methodname">setParam()</span> method, for example,
                <strong class="command">$front-&gt;setParam(&#039;disableOutputBuffering&#039;, true);</strong> or adding
                &quot;resources.frontcontroller.params.disableOutputBuffering = true&quot;
                to your bootstrap configuration file (assumed <acronym class="acronym">INI</acronym>) if using
                <span class="classname">Zend_Application</span>.
            <br />
        </p></blockquote>

        <p class="para">
            The benefits of this cache include a large throughput increase since
            all subsequent requests return the static file and don&#039;t need any
            dynamic processing. Of course this also has some disadvantages. The
            only way to retry the dynamic request is to purge the cached file
            from elsewhere in the application (or via a cronjob if timed). It
            is also restricted to single-server applications where only one
            filesystem is used. Nevertheless, it can be a powerful means of
            getting more performance without incurring the cost of a proxy on
            single machines.
        </p>
        <p class="para">
            Before describing its options, you should note this needs some
            changes to the default .htaccess file in order for requests to be
            directed to the static files if they exist. Here&#039;s an example of
            a simple application caching some content, including two specific
            feeds which need additional treatment to serve a correct
            Content-Type header:
        </p>
        <div class="programlisting text"><div class="textcode"><div class="text" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">AddType application/rss+xml .xml</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">AddType application/atom+xml .xml</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteEngine On</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{REQUEST_URI} feed/rss$</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{DOCUMENT_ROOT}/cached/%{REQUEST_URI}.xml -f</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteRule .* cached/%{REQUEST_URI}.xml [L,T=application/rss+xml]</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{REQUEST_URI} feed/atom$</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{DOCUMENT_ROOT}/cached/%{REQUEST_URI}.xml -f</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteRule .* cached/%{REQUEST_URI}.xml [L,T=application/atom+xml]</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{DOCUMENT_ROOT}/cached/index.html -f</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteRule ^/*$ cached/index.html [L]</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{DOCUMENT_ROOT}/cached/%{REQUEST_URI}.(html|xml|json|opml|svg) -f</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteRule .* cached/%{REQUEST_URI}.%1 [L]</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{REQUEST_FILENAME} -s [OR]</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{REQUEST_FILENAME} -l [OR]</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteCond %{REQUEST_FILENAME} -d</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteRule ^.*$ - [NC,L]</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">RewriteRule ^.*$ index.php [NC,L]</div></li></ol></div></div></div>

        <p class="para">
            The above assumes static files are cached to the directory ./public/cached.
            We&#039;ll cover the option setting this location, &quot;public_dir&quot;, below.
        </p>
        <p class="para">
            Due to the nature of static file caching, the backend class offers two
            additional methods:  <span class="methodname">remove()</span> and  <span class="methodname">
            removeRecursively()</span>. Both accept a request URI, which when
            mapped to the &quot;public_dir&quot; where static files are cached, and has a
            pre-stored extension appended, provides the name of either a static
            file to delete, or a directory path to delete recursively. Due to the
            restraints of <span class="classname">Zend_Cache_Backend_Interface</span>, all
            other methods such as <span class="classname">save()</span> accept an ID which
            is calculated by applying bin2hex() to a request URI.
        </p>
        <p class="para">
            Given the level at which static caching operates, static file caching
            is addressed for simpler use with the <span class="classname">
            Zend_Controller_Action_Helper_Cache</span> action helper. This helper
            assists in setting which actions of a controller to cache, with what tags,
            and with which extension. It also offers methods for purging the cache by
            request URI or tag. Static file caching is also assisted by <span class="classname">
            Zend_Cache_Manager</span> which includes pre-configured configuration
            templates for a static cache (as Zend_Cache_Manager::PAGECACHE or &quot;page&quot;).
            The defaults therein can be configured as needed to set up a &quot;public_dir&quot;
            location for caching, etc.
        </p>
        <blockquote><p><b class="note">Note</b>: 
            
                It should be noted that the static cache actually uses a secondary
                cache to store tags (obviously we can&#039;t store them elsewhere since
                a static cache does not invoke PHP if working correctly). This is
                just a standard Core cache, and should use a persistent backend such
                as File or TwoLevels (to take advantage of memory storage without
                sacrificing permanent persistance). The backend includes the option
                &quot;tag_cache&quot; to set this up (it is obligatory), or the  <span class="methodname">
                setInnerCache()</span> method.
            <br />
        </p></blockquote>
        <table class="doctable table"><div class="info"><caption><b>Static Backend Options</b></caption></div>
            
            
                 <thead valign="middle">
                      <tr valign="middle">
                        <th>Option</th>
                        <th>Data Type</th>
                        <th>Default Value</th>
                        <th>Description</th>
                    </tr>

                 </thead>

                 <tbody valign="middle" class="tbody">
                      <tr valign="middle">
                          <td align="left"><em class="emphasis">public_dir</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">NULL</td>
                          <td align="left">
                              Directory where to store static files. This must exist
                              in your public directory.
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">file_locking</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>TRUE</tt></b></td>
                          <td align="left">
                            Enable or disable file_locking : Can avoid cache corruption under
                            bad circumstances but it doesn&#039;t help on multithread webservers
                            or on <acronym class="acronym">NFS</acronym> filesystems...
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">read_control</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left"><b><tt>TRUE</tt></b></td>
                          <td align="left">
                            Enable / disable read control : if enabled, a control key is
                            embedded in the cache file and this key is compared with the
                            one calculated after the reading.
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">read_control_type</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">&#039;crc32&#039;</td>
                          <td align="left">
                            Type of read control (only if read control is enabled). Available values
                            are : &#039;md5&#039; (best but slowest), &#039;crc32&#039; (lightly less safe but faster,
                            better choice), &#039;adler32&#039; (new choice, faster than crc32),
                            &#039;strlen&#039; for a length only test (fastest).
                        </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">cache_file_umask</em></td>
                          <td align="left"> <span class="type">Integer</span> </td>
                          <td align="left">0600</td>
                          <td align="left">
                              umask for cached files.
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">cache_directory_umask</em></td>
                          <td align="left"> <span class="type">Integer</span> </td>
                          <td align="left">0700</td>
                          <td align="left">
                              Umask for directories created within public_dir.
                        </td>
                      </tr>


                      <tr valign="middle">
                          <td align="left"><em class="emphasis">file_extension</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">&#039;.html&#039;</td>
                          <td align="left">
                              Default file extension for static files created. This
                              can be configured on the fly, see  <span class="methodname">
                              Zend_Cache_Backend_Static::save()</span> though
                              generally it&#039;s recommended to rely on <span class="classname">
                              Zend_Controller_Action_Helper_Cache</span> when
                              doing so since it&#039;s simpler that way than messing with
                              arrays/serialization manually.
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">index_filename</em></td>
                          <td align="left"> <span class="type">String</span> </td>
                          <td align="left">&#039;index&#039;</td>
                          <td align="left">
                              If a request URI does not contain sufficient information
                              to construct a static file (usually this means an index
                              call, e.g. URI of &#039;/&#039;), the index_filename is used instead.
                              So &#039;&#039; or &#039;/&#039; would map to &#039;index.html&#039; (assuming the default
                              file_extension is &#039;.html&#039;).
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">tag_cache</em></td>
                          <td align="left"> <span class="type">Object</span> </td>
                          <td align="left">NULL</td>
                          <td align="left">
                              Used to set an &#039;inner&#039; cache utilised to store tags
                              and file extensions associated with static files. This
                              MUST be set or the static cache cannot be tracked and
                              managed.
                          </td>
                      </tr>

                      <tr valign="middle">
                          <td align="left"><em class="emphasis">disable_caching</em></td>
                          <td align="left"> <span class="type">Boolean</span> </td>
                          <td align="left">FALSE</td>
                          <td align="left">
                              If set to TRUE, static files will not be cached. This
                              will force all requests to be dynamic even if marked
                              to be cached in Controllers. Useful for debugging.
                          </td>
                      </tr>

                  </tbody>
              
          </table>

    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.cache.frontends.html">Zend_Cache のフロントエンド</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.cache.html">Zend_Cache</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.cache.cache.manager.html">The Cache Manager</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.cache.html">Zend_Cache</a></li>
  <li><a href="zend.cache.introduction.html">導入</a></li>
  <li><a href="zend.cache.theory.html">キャッシュの仕組み</a></li>
  <li><a href="zend.cache.frontends.html">Zend_Cache のフロントエンド</a></li>
  <li class="active"><a href="zend.cache.backends.html">Zend_Cache のバックエンド</a></li>
  <li><a href="zend.cache.cache.manager.html">The Cache Manager</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>