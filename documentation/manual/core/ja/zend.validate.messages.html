<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>検証メッセージ(一部日本語) - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.validate.writing_validators.html">バリデータの書き方</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.validate.html">Zend_Validate</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.version.html">Zend_Version</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.validate.messages" class="section"><div class="info"><h1 class="title">検証メッセージ(一部日本語)</h1></div>

    

    <p class="para">
        <span class="classname">Zend_Validate</span> を継承したバリデータには、
        検証に失敗したときに使用するメッセージが用意されています。
        
        You can use this information to set your own messages,
        or to translate existing messages which a validator could return to something different.
    </p>

    <p class="para">
        These validation messages are constants which can be found at top of each validator class.
        Let&#039;s look into <span class="classname">Zend_Validate_GreaterThan</span> for an descriptive example:
    </p>
 
    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">protected <span style="color: #0000ff;">$_messageTemplates</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; self::<span style="color: #006600;">NOT_GREATER</span> =&gt; <span style="color: #ff0000;">&quot;'%value%' is not greater than '%min%'&quot;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        As you can see the constant <b><tt>self::NOT_GREATER</tt></b> refers to the failure and
        is used as key, and the message itself is used as value of the message array.
    </p>

    <p class="para">
        You can retrieve all message templates from a validator by using the
         <span class="methodname">getMessageTemplates()</span> method. It returns you the above array which
        contains all messages a validator could return in the case of a failed validation.
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validator</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_GreaterThan<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$messages</span>&nbsp; = <span style="color: #0000ff;">$validator</span>-&gt;<span style="color: #006600;">getMessageTemplates</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Using the  <span class="methodname">setMessage()</span> method you can set another message to be
        returned in case of the specified failure.
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validator</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_GreaterThan<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validator</span>-&gt;<span style="color: #006600;">setMessage</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'Please enter a lower value'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; Zend_Validate_GreaterThan::<span style="color: #006600;">NOT_GREATER</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        The second parameter defines the failure which will be overridden. When you omit this
        parameter, then the given message will be set for all possible failures of this validator.
    </p>

    <div class="section" id="zend.validate.messages.pretranslated" name="zend.validate.messages.pretranslated"><div class="info"><h1 class="title">Using pre-translated validation messages</h1></div>
        

        <p class="para">
            Zend Framework is shipped with more than 45 different validators with more than 200
            failure messages. It can be a tedious task to translate all of these messages. But for
            your convenience Zend Framework comes with already pre-translated validation messages.
            You can find them within the path <var class="filename">/resources/languages</var> in your
            Zend Framework installation.
        </p>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Used path</b><br /></span>
            

            
                The resource files are outside of the library path because all of your translations
                should also be outside of this path.
            <br />
        </p></blockquote>

        <p class="para">
            So to translate all validation messages to German for example, all you have to do is to
            attach a translator to <span class="classname">Zend_Validate</span> using these resource files.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$translator</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Translate<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'adapter'</span> =&gt; <span style="color: #ff0000;">'array'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'content'</span> =&gt; <span style="color: #ff0000;">'/resources/languages'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'locale'</span>&nbsp; =&gt; <span style="color: #0000ff;">$language</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'scan'</span> =&gt; Zend_Translate::<span style="color: #006600;">LOCALE_DIRECTORY</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Validate_Abstract::<span style="color: #006600;">setDefaultTranslator</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$translator</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Used translation adapter</b><br /></span>
            

            
                As translation adapter Zend Framework chose the array adapter. It is simple to
                edit and created very fast.
            <br />
        </p></blockquote>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Supported languages</b><br /></span>
            

            
                This feature is very young, so the amount of supported languages may not be
                complete. New languages will be added with each release. Additionally feel free to
                use the existing resource files to make your own translations.
            <br />

            
                You could also use these resource files to rewrite existing translations. So you
                are not in need to create these files manually yourself.
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.validate.messages.limitation" name="zend.validate.messages.limitation"><div class="info"><h1 class="title">検証メッセージのサイズの制限</h1></div>
        

        <p class="para">
            検証メッセージの最大サイズを制限しなければならないこともあるでしょう。
            たとえば、1 行に 100 文字までしかレンダリングできないなどの制限がビューにある場合です。
            このような場合のため、<span class="classname">Zend_Validate</span>
            では自動的に検証メッセージの最大長を制限できるようになっています。
        </p>

        <p class="para">
            実際に設定されているサイズを取得するには
             <span class="methodname">Zend_Validate::getMessageLength()</span> を使用します。
            この結果が -1 の場合は、返されるメッセージが切り詰められることはありません。
            これがデフォルトの挙動です。
        </p>

        <p class="para">
            返されるメッセージのサイズを制限するには
             <span class="methodname">Zend_Validate::setMessageLength()</span> を使用します。
            必要に応じて任意の整数値を設定します。
            返されるメッセージのサイズがここで設定した長さを超えると、
            メッセージが切り詰められて最後に文字列 &#039;<em class="emphasis">...</em>&#039;
            が付加されます。
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Validate::<span style="color: #006600;">setMessageLength</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: <span class="info"><b>このパラメータはどこで使われますか？</b><br /></span>
            

            
                ここで設定したメッセージ長はすべてのバリデータで使われます。
                自前で定義したバリデータでさえも、それが <span class="classname">Zend_Validate_Abstract</span>
                を継承したものである限りは同じです。
            <br />
        </p></blockquote>
    </div>

</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.validate.writing_validators.html">バリデータの書き方</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.validate.html">Zend_Validate</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.version.html">Zend_Version</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.validate.html">Zend_Validate</a></li>
  <li><a href="zend.validate.introduction.html">導入</a></li>
  <li><a href="zend.validate.set.html">標準のバリデーションクラス群</a></li>
  <li><a href="zend.validate.validator_chains.html">バリデータチェイン</a></li>
  <li><a href="zend.validate.writing_validators.html">バリデータの書き方</a></li>
  <li class="active"><a href="zend.validate.messages.html">検証メッセージ(一部日本語)</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>