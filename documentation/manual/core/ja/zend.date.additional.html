<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>動作例 - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.date.constants.html">日付関数全般用の定数</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.date.html">Zend_Date</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.db.html">Zend_Db</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.date.additional" class="section"><div class="info"><h1 class="title">動作例</h1></div>
    

    <p class="para">
        この章では、<span class="classname">Zend_Date</span> で使用できるその他の関数について説明します。
        もちろん、ここで取り上げている関数については動作例を示すサンプルも提示しており、
        それを適切に使用するための <acronym class="acronym">API</acronym> についても説明しています。
    </p>

    <div class="section" id="zend.date.additional.checking" name="zend.date.additional.checking"><div class="info"><h1 class="title">日付の確認</h1></div>
        

        <p class="para">
            おそらく、入力として受け取る日付の大半は文字列形式でしょう。
            しかし、文字列で渡されると、それが本当に日付を表すものなのかがわかりません。
            そこで <span class="classname">Zend_Date</span> では、
            日付文字列を調べるために独自の静的関数を用意することにしました。
            <span class="classname">Zend_Locale</span> には  <span class="methodname">getDate($date, $locale);</span>
            という関数があり、これは日付を受け取って、適切に正規化された内容を返します。
            たとえば、月の名前が指定されていた場合もそれを適切に解釈し、
            数値に変換して返します。しかし、<span class="classname">Zend_Locale</span>
            は日付については何も知りません。なぜなら、
            このクラスは正規化および地域化を行うためのクラスだからです。
            そこで、日付を確認する関数  <span class="methodname">isDate($date);</span>
            と組み合わせて使用するようにします。
        </p>

        <p class="para">
             <span class="methodname">isDate($date, $format, $locale);</span> は最大で三つまでのパラメータを受け取ります。
            そのうちのひとつは必須です。そのひとつは、当然ながら調べたい日付となります。
            この日付は文字列で渡します。二番目のパラメータは日付の書式を表します。
            これを省略した場合は、そのロケールの書式を使用します。
            書式についての詳細は、<a href="zend.date.constants.html#zend.date.constants.selfdefinedformats" class="link">自分で定義する書式</a>
            の章を参照ください。
        </p>

        <p class="para">
            三番目のパラメータも、二番目のパラメータと同様に省略可能です。
            これはロケールを指定するものです。月名や曜日名を正規化するためにロケールが必要となります。
            この三番目のパラメータを指定することで、&#039;<strong class="command">01.Jänner.2000</strong>&#039; や
            &#039;<strong class="command">01.January.2000</strong>&#039;
            といった文字列をロケールに応じて適切に処理できるようになります。
        </p>

        <p class="para">
             <span class="methodname">isDate()</span> は、存在しない日付についての確認も行います。
            <span class="classname">Zend_Date</span> 自体は日付についての確認を行いません。
            つまり、たとえば &#039;<strong class="command">31.February.2000</strong>&#039;
            のような日付を <span class="classname">Zend_Date</span>
            で作成することもできます。この場合、<span class="classname">Zend_Date</span>
            は自動的に日付を適切な値に修正して返します。この例の場合なら
            &#039;<strong class="command">03.March.2000</strong>&#039; となります。一方  <span class="methodname">isDate()</span>
            は日付の確認を行い、&#039;<strong class="command">31.February.2000</strong>&#039;
            を渡すと <b><tt>FALSE</tt></b> を返します。
            というのもそんな日付はありえないということを知っているからです。
        </p>

        <div class="example"><div class="info"><p><b>Example #1 日付の確認</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 日付を確認します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #ff0000;">'01.03.2000'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>Zend_Date::<span style="color: #006600;">isDate</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$date</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;文字列 $date は日付です&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span> <span style="color: #b1b100;">else</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;文字列 $date は日付ではありません&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 地域化した日付を確認します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #ff0000;">'01 February 2000'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>Zend_Date::<span style="color: #006600;">isDate</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$date</span>,<span style="color: #ff0000;">'dd MMMM yyyy'</span>, <span style="color: #ff0000;">'en'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;文字列 $date は日付です&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span> <span style="color: #b1b100;">else</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;文字列 $date は日付ではありません&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ありえない日付を確認します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #ff0000;">'30 February 2000'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>Zend_Date::<span style="color: #006600;">isDate</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$date</span>,<span style="color: #ff0000;">'dd MMMM yyyy'</span>, <span style="color: #ff0000;">'en'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;文字列 $date は日付です&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span> <span style="color: #b1b100;">else</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;文字列 $date は日付ではありません&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.date.additional.sunrise-sunset" name="zend.date.additional.sunrise-sunset"><div class="info"><h1 class="title">日の出と日没</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Date</span> には、太陽の動きに関する情報を取得するための関数も組み込まれています。
            たとえば、指定した日の日の出時刻や日没時刻を取得する際に必要となります。
            <span class="classname">Zend_Date</span> を使用すると、指定した日の指定した場所における
            日の出時刻や日没時刻を簡単に取得できます。
        </p>

        <p class="para">
            ほとんどの人は、自分が住んでいる場所の位置データを知らないことでしょう。
            ということで、位置データを取得するヘルパークラスも用意しました。
            このクラスは、各国の首都や大都市など、世界中の約 250 の都市についての位置データを提供します。
            ほとんどの人は、これらの中に自分の住む場所の近所の都市を見つけられるでしょう。
            というのも、これらの都市は、お互い数秒 (訳注: 角度の単位) 間隔で配置されているからです。
        </p>

        <p class="para">
            リストボックスでどこかの都市を選ばせるには、関数
             <span class="methodname">Zend_Date_Cities::getCityList</span>
            を使用します。これは、ヘルパークラスで使用可能な定義済みの都市名の一覧を返します。
        </p>

        <div class="example"><div class="info"><p><b>Example #2 利用可能な都市の取得</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 利用可能な都市の一覧を出力します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print_r"><span style="color: #000066;">print_r</span></a> <span style="color: #66cc66;">&#40;</span>Zend_Date_Cities::<span style="color: #006600;">getCityList</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            位置データ自体を取得するには、関数
             <span class="methodname">Zend_Date_Cities::city()</span> を使用します。
            この関数に、 <span class="methodname">Zend_Date_Cities::getCityList()</span> が返す都市名を渡します。
            また、オプションの二番目のパラメータで、水平線の種類を設定します。
        </p>

        <p class="para">
            定義済みの水平線は四種類です。
            これらと位置情報を組み合わせることで、日の出や日没の正確な時刻を取得します。
            すべての関数について、オプションのパラメータとして &#039;<var class="varname">horizon</var>&#039; を指定できます。
            省略した場合は &#039;<var class="varname">effective</var>&#039; を使用します。
        </p>

        <table class="doctable table"><div class="info"><caption><b>日の出や日没のためにサポートしている水平線の形式</b></caption></div>
            

            
                <thead valign="middle">
                    <tr valign="middle">
                        <th>水平線</th>
                        <th>説明</th>
                        <th>使用例</th>
                    </tr>

                </thead>


                <tbody valign="middle" class="tbody">
                    <tr valign="middle">
                        <td align="left">effective</td>
                        <td align="left">標準の水平線</td>
                        
                        <td align="left">
                            世界が完全な球体であると仮定します。
                            何も指定しない場合には常にこれを使用します。
                        </td>
                    </tr>


                    <tr valign="middle">
                        <td align="left">civil</td>
                        <td align="left">一般的な水平線</td>
                        <td align="left">テレビやラジオなどのメディアで一般に使用します。</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left">nautic</td>
                        <td align="left">航海時の水平線</td>
                        <td align="left">航海時によく使用します。</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left">astronomic</td>
                        <td align="left">天文学上の水平線</td>
                        <td align="left">天体観測でよく使用します。</td>
                    </tr>

                </tbody>
            
        </table>


        <p class="para">
            もちろん、位置情報を自分で指定して計算することも可能です。
            その場合は &#039;<var class="varname">latitude</var>&#039; (緯度) と
            &#039;<var class="varname">longitude</var>&#039; (経度) を指定し、
            そしてオプションで &#039;<var class="varname">horizon</var>&#039;
            を指定します。
        </p>

        <div class="example"><div class="info"><p><b>Example #3 都市の位置の取得</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 定義済みの都市の位置を取得します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 水平線を指定していないので、effective horizon を使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print_r"><span style="color: #000066;">print_r</span></a> <span style="color: #66cc66;">&#40;</span>Zend_Date_Cities::<span style="color: #006600;">city</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Vienna'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// nautic horizon を使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print_r"><span style="color: #000066;">print_r</span></a> <span style="color: #66cc66;">&#40;</span>Zend_Date_Cities::<span style="color: #006600;">city</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Vienna'</span>, <span style="color: #ff0000;">'nautic'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 位置情報を指定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mylocation</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'latitude'</span> =&gt; <span style="color: #cc66cc;">41.5</span>, <span style="color: #ff0000;">'longitude'</span> =&gt; <span style="color: #cc66cc;">13.2446</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            これで、必要なデータがすべて設定できました。次に行うことは、
            日の出や日没に関する情報を取得したい日付を表す <span class="classname">Zend_Date</span>
            オブジェクトの作成です。算出用の関数は三つあります。
            日没情報を算出するのが &#039; <span class="methodname">getSunset()</span>&#039;、日の出の情報は &#039; <span class="methodname">getSunrise()</span>&#039;、
            そして太陽に関するすべての情報を取得するのが &#039; <span class="methodname">getSunInfo()</span>&#039; です。
            算出した結果は、その時刻を保持する <span class="classname">Zend_Date</span>
            オブジェクトとして返されます。
        </p>

        <div class="example"><div class="info"><p><b>Example #4 太陽の情報の算出</b></p></div>
            
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 定義済みの都市の位置を取得します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$city</span> = Zend_Date_Cities::<span style="color: #006600;">city</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Vienna'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 太陽の情報を算出したい日付についての date オブジェクトを作成します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'10.03.2007'</span>, Zend_Date::<span style="color: #006600;">ISO_8601</span>, <span style="color: #ff0000;">'de'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 日没時刻を算出します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sunset</span> = <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getSunset</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$city</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$sunset</span>-&gt;<span style="color: #006600;">get</span><span style="color: #66cc66;">&#40;</span>Zend_Date::<span style="color: #006600;">ISO_8601</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 太陽に関するすべての情報を算出します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$info</span> = <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getSunInfo</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$city</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$info</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$sun</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span> . <span style="color: #0000ff;">$sun</span>-&gt;<span style="color: #006600;">get</span><span style="color: #66cc66;">&#40;</span>Zend_Date::<span style="color: #006600;">ISO_8601</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.date.additional.timezones" name="zend.date.additional.timezones"><div class="info"><h1 class="title">タイムゾーン</h1></div>
        

        <p class="para">
            タイムゾーンは、日付そのものと同じくらい重要です。
            ユーザが住んでいる場所によって、さまざまなタイムゾーンがあります。
            つまり、日付を扱う際には適切なタイムゾーンを設定しなければならないということです。
            複雑な話のように聞こえるかも知れませんが、思ったほど複雑でもありません。
            <span class="classname">Zend_Date</span> の最初の章で既に説明したとおり、デフォルトのタイムゾーンは
            <var class="filename">php.ini</var> あるいは起動ファイル内で設定されています。
        </p>

        <p class="para">
            <span class="classname">Zend_Date</span> オブジェクトは、実際のタイムゾーンも保持しています。
            オブジェクトを作成した後でタイムゾーンを変更しても、元のタイムゾーンを覚えており、
            それを用いて作業を続けることができます。タイムゾーンを変更するのに、
            コード内で <acronym class="acronym">PHP</acronym> の関数を使用する必要はありません。
            <span class="classname">Zend_Date</span> には、タイムゾーンを処理するための
            ふたつの組み込み関数が用意されています。
        </p>

        <p class="para">
             <span class="methodname">getTimezone()</span> は <span class="classname">Zend_Date</span>
            オブジェクト内で実際に設定されているタイムゾーンを返します。
            <span class="classname">Zend_Date</span> は、<acronym class="acronym">PHP</acronym> の内部とは連携していないことを覚えておきましょう。
            つまり、返されるタイムゾーンは、<acronym class="acronym">PHP</acronym> スクリプトのタイムゾーンではなく
            そのオブジェクトのタイムゾーンとなるということです。
             <span class="methodname">setTimezone($zone)</span> がもうひとつの関数で、
            これは <span class="classname">Zend_Date</span> に新しいタイムゾーンを設定します。
            指定したタイムゾーンに対しては常にチェックが行われ、
            もしそのタイムゾーンが存在しない場合は例外がスローされます。
            スクリプトやシステムの実際のタイムゾーンをオブジェクトに設定するには、
            パラメータを指定せずに  <span class="methodname">setTimezone()</span> をコールします。
            date オブジェクトを作成する際には、自動的にこれが行われます。
        </p>

        <div class="example"><div class="info"><p><b>Example #5 タイムゾーンの処理</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// デフォルトのタイムゾーンを設定します。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// これは、起動ファイルか php.ini で設定します。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ここで設定しているのは、単体でサンプルとして完結させるためです。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">date_default_timezone_set<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Europe/Vienna'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// date オブジェクトを作成します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'10.03.2007'</span>, Zend_Date::<span style="color: #006600;">DATES</span>, <span style="color: #ff0000;">'de'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// date オブジェクトの内容を確認します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getIso</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// タイムゾーンの設定内容は ?</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getTimezone</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 別のタイムゾーンを設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">setTimezone</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'America/Chicago'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// タイムゾーンはどうなった ?</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getTimezone</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 変更された date オブジェクトの内容を確認します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getIso</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            サンプルの最初の行にあるように、
            <span class="classname">Zend_Date</span> は、オブジェクトの作成時には
            常に実際のタイムゾーンを受け取ります。
            作成したオブジェクト内のタイムゾーンを変更すると、日付自身にも影響を与えます。
            日付は常にタイムゾーンと関連します。
            <span class="classname">Zend_Date</span> オブジェクトのタイムゾーンを変更しても、
            <span class="classname">Zend_Date</span> の時刻は変わりません。
            内部での日付情報は、常にタイムスタンプ形式で <acronym class="acronym">GMT</acronym> で格納されることを覚えておきましょう。
            つまり、タイムゾーン情報が意味するのは、
            そのタイムゾーンや地域の時刻を得るために、何時間ぶん加算あるいは減算しなければならないのかということです。
        </p>

        <p class="para">
            <span class="classname">Zend_Date</span> 内でタイムゾーンを管理して使用することには、もうひとつ利点があります。
            さまざまなタイムゾーンをもつ複数の日付を扱うことができるようになるということです。
        </p>

        <div class="example"><div class="info"><p><b>Example #6 複数のタイムゾーン</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// デフォルトのタイムゾーンを設定します。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// これは、起動ファイルか php.ini で設定します。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ここで設定しているのは、単体でサンプルとして完結させるためです。</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">date_default_timezone_set<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Europe/Vienna'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// date オブジェクトを作成します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$date</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Date<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'10.03.2007 00:00:00'</span>, Zend_Date::<span style="color: #006600;">ISO_8601</span>, <span style="color: #ff0000;">'de'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// date オブジェクトの内容を確認します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getIso</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// タイムゾーンを変更しても、日付は変わらないままです</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">date_default_timezone_set<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'America/Chicago'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$date</span>-&gt;<span style="color: #006600;">getIso</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$otherdate</span> = clone <span style="color: #0000ff;">$date</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$otherdate</span>-&gt;<span style="color: #006600;">setTimezone</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Brazil/Acre'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// date オブジェクトの内容を確認します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$otherdate</span>-&gt;<span style="color: #006600;">getIso</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// システムの実際のタイムゾーンをオブジェクトに設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$lastdate</span> = clone <span style="color: #0000ff;">$date</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$lastdate</span>-&gt;<span style="color: #006600;">setTimezone</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// date オブジェクトの内容を確認します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #0000ff;">$lastdate</span>-&gt;<span style="color: #006600;">getIso</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.date.constants.html">日付関数全般用の定数</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.date.html">Zend_Date</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.db.html">Zend_Db</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.date.html">Zend_Date</a></li>
  <li><a href="zend.date.introduction.html">導入</a></li>
  <li><a href="zend.date.definition.theory.html">動作原理</a></li>
  <li><a href="zend.date.basic.html">基本メソッド</a></li>
  <li><a href="zend.date.overview.html">Zend_Date API の概要</a></li>
  <li><a href="zend.date.creation.html">日付の作成</a></li>
  <li><a href="zend.date.constants.html">日付関数全般用の定数</a></li>
  <li class="active"><a href="zend.date.additional.html">動作例</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>