<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_File_Transfer 用のバリデータ - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.file.transfer.introduction.html">Zend_File_Transfer(日本語)</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.file.html">Zend_File</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.file.transfer.filters.html">Filters for Zend_File_Transfer</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.file.transfer.validators" class="section"><div class="info"><h1 class="title">Zend_File_Transfer 用のバリデータ</h1></div>

    

    <p class="para">
        <span class="classname">Zend_File_Transfer</span> にはファイル関連のバリデータがいくつか同梱されています。
        これらを使用してセキュリティを向上させ、攻撃から身を守るようにしましょう。
        バリデータは、それを使ってこそ役に立つものなのですから。
        <span class="classname">Zend_File_Transfer</span> が提供するバリデータは
        <span class="classname">Zend_Validator</span> コンポーネントに含まれ、
        <span class="classname">Zend_Validate_File_*</span> という名前がついています。
        現在使用できるバリデータは次のとおりです。
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                <code class="code">Count</code>: このバリデータはファイルの数をチェックします。
                最小値と最大値を指定し、そのいずれかに違反した場合にエラーをスローします。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">Crc32</code>: このバリデータはファイルの内容の crc32 ハッシュ値をチェックします。
                <code class="code">Hash</code> バリデータをもとにしたもので、
                Crc32 のみをサポートする便利でシンプルなバリデータを提供します。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">ExcludeExtension</code>: このバリデータはファイルの拡張子をチェックします。
                渡されたファイルの拡張子が定義済みのものだった場合にエラーをスローします。
                これにより、特定の拡張子だけを除外できるようになります。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">ExcludeMimeType</code>: このバリデータはファイルの <acronym class="acronym">MIME</acronym> 型をチェックします。
                <acronym class="acronym">MIME</acronym> 型の種類を検証し、指定したファイルの <acronym class="acronym">MIME</acronym>
                型がそれと一致するときにエラーをスローします。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">Exists</code>: このバリデータはファイルの存在をチェックします。
                指定したファイルが存在しない場合にエラーをスローします。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">Extension</code>: このバリデータはファイルの拡張子をチェックします。
                渡されたファイルの拡張子が未定義のものだった場合にエラーをスローします。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">FilesSize</code>: このバリデータはすべてのファイルのサイズをチェックします。
                すべてのファイルのサイズを内部的に記憶し、
                その合計が制限値を超えた場合にエラーをスローします。
                サイズの最小値と最大値を指定できます。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">ImageSize</code>: このバリデータは画像のサイズをチェックします。
                幅と高さについて、最小値と最大値を検証できます。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">IsCompressed</code>: このバリデータはファイルが圧縮されているかどうかをチェックします。
                <code class="code">MimeType</code> バリデータにもとづいて、
                zip や arc といった圧縮アーカイブ形式かどうかを判断します。
                特定のアーカイブ形式のみに制限することもできます。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">IsImage</code>: このバリデータはファイルが画像であるかどうかをチェックします。
                <code class="code">MimeType</code> バリデータにもとづいて、
                jpg や gif といった画像ファイルであるかどうかを判断します。
                特定の画像形式のみに制限することもできます。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">Hash</code>: このバリデータはファイルの内容のハッシュ値をチェックします。
                複数のアルゴリズムをサポートしています。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">Md5</code>: このバリデータはファイルの内容の md5 ハッシュ値をチェックします。
                <code class="code">Hash</code> バリデータをもとにしたもので、
                Md5 のみをサポートする便利でシンプルなバリデータを提供します。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">MimeType</code>: このバリデータはファイルの <acronym class="acronym">MIME</acronym> 型をチェックします。
                <acronym class="acronym">MIME</acronym> 型の種類を検証し、指定したファイルの <acronym class="acronym">MIME</acronym>
                型がそれと一致しないときにエラーをスローします。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">NotExists</code>: このバリデータはファイルの存在をチェックします。
                指定したファイルが存在する場合にエラーをスローします。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">Sha1</code>: このバリデータはファイルの内容の sha1 ハッシュ値をチェックします。
                <code class="code">Hash</code> バリデータをもとにしたもので、
                sha1 のみをサポートする便利でシンプルなバリデータを提供します。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">Size</code>: このバリデータは各ファイルのサイズをチェックします。
                最小値と最大値を指定し、そのいずれかに違反した場合にエラーをスローします。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">Upload</code>: このバリデータは内部的に使用するもので、
                アップロード時に何らかの問題が発生していないかどうかをチェックします。
                自分でこれを設定してはいけません。これは、
                <span class="classname">Zend_File_Transfer</span> 自身が自動的に設定します。
                ですので、このバリデータのことは忘れてしまってもかまいません。
                ただ、そういうバリデータが存在することだけを覚えておきましょう。
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">WordCount</code>: このバリデータはファイル内の単語数をチェックします。
                最小値と最大値を指定し、そのいずれかに違反した場合にエラーをスローします。
            </p>
        </li>
    </ul>

    <div class="section" id="zend.file.transfer.validators.usage" name="zend.file.transfer.validators.usage"><div class="info"><h1 class="title">Zend_File_Transfer でのバリデータの使用法</h1></div>
        

        <p class="para">
            バリデータの使い方はきわめて簡単です。
            バリデータを追加したり操作したりするには、次のメソッドを使用します。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                     <span class="methodname">isValid($files = null)</span>:
                    指定したファイルがすべてのバリデータを使用したかどうかを調べます。
                    <code class="code">$files</code> には、実際のファイル名あるいは要素名、
                    またはテンポラリファイル名を指定します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">addValidator($validator, $breakChainOnFailure, $options = null, $files =
                    null)</code>: 指定したバリデータをバリデータスタックに追加します
                    (オプションで、指定したファイルにだけ追加することもできます)。
                    <code class="code">$validator</code> に指定するのは、
                    バリデータのインスタンスかあるいはバリデータの型の短い名前
                    (たとえば &#039;Count&#039;) です。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">addValidators(array $validators, $files =
                        null)</code>: 指定した複数のバリデータをバリデータスタックに追加します。
                    各エントリは、バリデータの型とオプションのペアか
                    あるいはキー &#039;validator&#039; を持つ配列となります
                    (配列の場合、バリデータのオプションはインスタンスの作成時に設定するものとします)。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">setValidators(array $validators, $files =
                        null)</code>: 既存のバリデータを、指定したバリデータで上書きします。
                    バリデータの指定方法は  <span class="methodname">addValidators()</span>
                    と同じです。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">hasValidator($name)</span>:
                    バリデータが登録されているかどうかを調べます。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getValidator($name)</span>:
                    前回登録されたバリデータを返します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getValidators($files = null)</span>:
                    登録されているバリデータを返します。<code class="code">$files</code>
                    を渡すと、そのファイルに関連するバリデータを返します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">removeValidator($name)</span>:
                    前回登録されたバリデータを削除します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">clearValidators()</span>:
                    登録されているすべてのバリデータを消去します。
                </p>
            </li>
        </ul>

        <div class="example"><div class="info"><p><b>Example #1 ファイル転送用のバリデータの追加</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイルサイズを 20000 バイトに設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Size'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">20000</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイルサイズの最小値を 20 バイト、最大値を 20000 バイトに設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Size'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'min'</span> =&gt; <span style="color: #cc66cc;">20</span>, <span style="color: #ff0000;">'max'</span> =&gt; <span style="color: #cc66cc;">20000</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイルサイズの最小値を 20 バイト、最大値を 20000 バイトに設定し、</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 同時にファイルの数も設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">setValidators</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'Size'</span>&nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'min'</span> =&gt; <span style="color: #cc66cc;">20</span>, <span style="color: #ff0000;">'max'</span> =&gt; <span style="color: #cc66cc;">20000</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'Count'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'min'</span> =&gt; <span style="color: #cc66cc;">1</span>, <span style="color: #ff0000;">'max'</span> =&gt; <span style="color: #cc66cc;">3</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <div class="example"><div class="info"><p><b>Example #2 特定のファイルに対してのみのバリデータの適用</b></p></div>
            

            <div class="example-contents"><p>
                 <span class="methodname">addValidator()</span>、 <span class="methodname">addValidators()</span> および
                 <span class="methodname">setValidators()</span> は、それぞれ最後の引数
                <code class="code">$files</code> を指定できます。
                この引数にはファイル名あるいはファイル名の配列を指定し、
                指定したファイルに対してのみバリデータを設定します。
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイルサイズを 20000 バイトとし、それを 'file2' にのみ適用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Size'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">20000</span>, <span style="color: #ff0000;">'file2'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            一般的には、単純に  <span class="methodname">addValidators()</span>
            メソッドをコールすることになるでしょう。
            これは何度でもコールできます。
        </p>

        <div class="example"><div class="info"><p><b>Example #3 複数のバリデータの追加</b></p></div>
            

            <div class="example-contents"><p>
                単に  <span class="methodname">addValidator()</span> を複数回コールするほうがシンプルに書けます。
                個々のバリデータごとにコールするというわけです。
                これはコードの可読性も向上させ、保守性もあがります。
                すべてのメソッドは流れるようなインターフェイスを提供しているので、
                複数回のコールは以下のように書くことができます。
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイルサイズを 20000 バイトに設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Size'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">20000</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Count'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Filessize'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">25000</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>

        <blockquote><p><b class="note">Note</b>: 
            
                同じバリデータを複数回設定することもできます。
                しかしそんなことをすると、
                同じバリデータに異なるオプションを設定したときにおかしなことになるので注意しましょう。
            <br />
        </p></blockquote>

        <p class="para">
            最後に、単純にファイルをチェックするには  <span class="methodname">isValid()</span> を使用します。
        </p>

        <div class="example"><div class="info"><p><b>Example #4 ファイルの検証</b></p></div>
            

            <div class="example-contents"><p>
                 <span class="methodname">isValid()</span> には、
                アップロードあるいはダウンロードされるファイル名だけでなく、
                テンポラリファイル名やフォーム要素の名前を指定することもできます。
                パラメータを省略したり null を指定したりした場合は、
                すべてのファイルが検証対象となります。
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイルサイズを 20000 バイトに設定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Size'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">20000</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Count'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Filessize'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">25000</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">isValid</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">&quot;検証に失敗&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        </div>

        <blockquote><p><b class="note">Note</b>: 
            
                 <span class="methodname">isValid()</span> は、
                ファイルを受け取った際にそれまでコールされていなければ自動的にコールされることに注意しましょう。
            <br />
        </p></blockquote>

        <p class="para">
            検証に失敗した場合は、何が問題だったのかについての情報を取得したくなることでしょう。
             <span class="methodname">getMessages()</span> を使うとすべての検証メッセージを配列で取得できます。
            また  <span class="methodname">getErrors()</span> はすべてのエラーコードを返し、
             <span class="methodname">hasErrors()</span> は検証エラーが見つかった時点で <b><tt>TRUE</tt></b> を返します。
        </p>

    </div>

    <div class="section" id="zend.file.transfer.validators.count" name="zend.file.transfer.validators.count"><div class="info"><h1 class="title">Count バリデータ</h1></div>
        

        <p class="para">
            <code class="code">Count</code> バリデータは、
            渡されたファイルの数をチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">min</code>: 転送するファイル数の最小値。
                </p>

                <blockquote><p><b class="note">Note</b>: 
                    
                        このオプションを使用する場合は、
                        このバリデータを最初にコールした際にファイル数の最小値を指定する必要があります。
                        そうしないとエラーが返されます。
                    <br />
                </p></blockquote>

                <p class="para">
                    このオプションで、受け取りたいファイル数の最小値を指定できます。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">max</code>: 転送するファイル数の最大値。
                </p>

                <p class="para">
                    このオプションで、受け取りたいファイル数を制限できます。
                    それだけでなく、フォームで定義されている以上の数のファイルを送られるなどの攻撃を防ぐこともできます。
                </p>
            </li>
        </ul>

        <p class="para">
            文字列あるいは整数値を指定してインスタンス化すると、その値は
            <code class="code">max</code> とみなされます。あるいは、後から  <span class="methodname">setMin()</span> や
             <span class="methodname">setMax()</span> でオプションを設定することもできますし、
             <span class="methodname">getMin()</span> や  <span class="methodname">getMax()</span>
            で設定内容を取得することもできます。
        </p>

        <div class="example"><div class="info"><p><b>Example #5 Count バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイルの数を最大 2 に制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Count'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 最大でも 5 個、少なくとも 1 つのファイルが返されるよう制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Count'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'min'</span> =&gt;<span style="color: #cc66cc;">1</span>, <span style="color: #ff0000;">'max'</span> =&gt; <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>
        <blockquote><p><b class="note">Note</b>: 
            
                このバリデータは、チェックしたファイルの数を内部に保存することに注意しましょう。
                最大値を超えたファイルはエラーを返します。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.crc32" name="zend.file.transfer.validators.crc32"><div class="info"><h1 class="title">Crc32 バリデータ</h1></div>
        

        <p class="para">
            <code class="code">Crc32</code> バリデータは、転送されたファイルの中身のハッシュをチェックします。
            このバリデータは、<acronym class="acronym">PHP</acronym> の hash 拡張モジュールの crc32 アルゴリズムを使用します。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を設定します。
                    この値を、検証対象のハッシュと比較します。
                </p>

                <p class="para">
                    異なるキーを使用して複数のハッシュを設定できます。
                    すべてのキーの内容をチェックし、
                    どれにも一致しなかった場合にのみ検証が失敗します。
                </p>
            </li>
        </ul>

        <div class="example"><div class="info"><p><b>Example #6 Crc32 バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アップロードされたファイルのハッシュが指定したものと一致するかどうかをチェックします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Crc32'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'3b3652f'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ふたつの異なるハッシュを指定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Crc32'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'3b3652f'</span>, <span style="color: #ff0000;">'e612b69'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.file.transfer.validators.excludeextension" name="zend.file.transfer.validators.excludeextension"><div class="info"><h1 class="title">ExcludeExtension バリデータ</h1></div>
        

        <p class="para">
            <code class="code">ExcludeExtension</code> バリデータは、
            渡されたファイルの拡張子をチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を指定します。
                    指定したファイルがこの拡張子を使用していないかどうかをチェックします。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">case</code>: 検証時に大文字小文字を区別するかどうかを設定します。
                    デフォルトでは大文字小文字を区別しません。
                    このオプションはすべての拡張子に対して適用されることに注意しましょう。
                </p>
            </li>
        </ul>

        <p class="para">
            このバリデータで複数の拡張子を指定するには、
            カンマ区切りの文字列あるいは配列を使用します。
             <span class="methodname">setExtension()</span>、 <span class="methodname">addExtension()</span> および
             <span class="methodname">getExtension()</span> といったメソッドで拡張子の設定や取得が可能です。
        </p>

        <p class="para">
            大文字小文字を区別したチェックが有用なこともあります。
            そのため、コンストラクタの 2 番目のパラメータ
            <code class="code">$case</code> を指定できるようになっています。これを <b><tt>TRUE</tt></b>
            に設定すると、大文字小文字を区別して拡張子を検証します。
        </p>

        <div class="example"><div class="info"><p><b>Example #7 ExcludeExtension バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 拡張子 php あるいは exe のファイルは許可しません</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ExcludeExtension'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'php,exe'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 拡張子 php あるいは exe のファイルを許可しない設定を配列記法で行います</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ExcludeExtension'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'php'</span>, <span style="color: #ff0000;">'exe'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;<span style="color: #808080; font-style: italic;">// 大文字小文字を区別するチェックを行います</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ExcludeExtension'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'php'</span>, <span style="color: #ff0000;">'exe'</span>, <span style="color: #ff0000;">'case'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ExcludeExtension'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'php'</span>, <span style="color: #ff0000;">'exe'</span>, <span style="color: #ff0000;">'case'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>
        <blockquote><p><b class="note">Note</b>: 
            
                このバリデータがチェックするのはファイルの拡張子のみであることに注意しましょう。
                実際の <acronym class="acronym">MIME</acronym> 型などはチェックしません。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.excludemimetype" name="zend.file.transfer.validators.excludemimetype"><div class="info"><h1 class="title">ExcludeMimeType バリデータ</h1></div>
        

        <p class="para">
            <code class="code">ExcludeMimeType</code> バリデータは、
            転送されるファイルの <acronym class="acronym">MIME</acronym> 型をチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキー、あるいは数値添字配列を指定します。
                    検証したい <acronym class="acronym">MIME</acronym> 型を設定します。
                </p>

                <p class="para">
                    このオプションで、許可したくないファイルの <acronym class="acronym">MIME</acronym> 型を定義できます。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">headerCheck</code>: <b><tt>TRUE</tt></b> に設定すると、
                    <em class="emphasis">fileInfo</em> あるいは <em class="emphasis">mimeMagic</em>
                    拡張モジュールがない場合にも <acronym class="acronym">HTTP</acronym>
                    情報からファイルタイプをチェックします。このオプションのデフォルト値は
                    <b><tt>FALSE</tt></b> です。
                </p>
            </li>
        </ul>

        <p class="para">
            このバリデータで複数の <acronym class="acronym">MIME</acronym> 型を指定するには、
            カンマ区切りの文字列あるいは配列を使用します。
             <span class="methodname">setMimeType()</span>、 <span class="methodname">addMimeType()</span> および
             <span class="methodname">getMimeType()</span> といったメソッドで <acronym class="acronym">MIME</acronym> 型の設定や取得が可能です。
        </p>

        <div class="example"><div class="info"><p><b>Example #8 ExcludeMimeType バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべてのファイルで gif 画像の MIME 型を許可しません</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ExcludeMimeType'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'image/gif'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべてのファイルで gif 画像および jpg 画像の MIME 型を許可しません</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ExcludeMimeType'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'image/gif'</span>, <span style="color: #ff0000;">'image/jpeg'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべてのファイルで画像を許可しません</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ExcludeMimeType'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'image'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            上の例で示したように、複数の <acronym class="acronym">MIME</acronym> 型をひとつのグループとして扱うこともできます。
            画像ファイルならすべて許可したいという場合は、<acronym class="acronym">MIME</acronym> 型に &#039;image&#039; と指定します。
            &#039;image&#039; 以外にも &#039;audio&#039;、&#039;video&#039;、&#039;text などが使用可能です。
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                <acronym class="acronym">MIME</acronym> 型のグループを拒否してしまうと、意図していないものも含めて
                そのグループのすべての形式のファイルを拒否してしまうことに注意しましょう。
                たとえば &#039;image&#039; を拒否したら &#039;image/jpeg&#039; や &#039;image/vasa&#039;
                などすべての画像形式を拒否することになります。
                すべての形式を拒否していいのかどうか不安な場合は、
                グループ指定ではなく個別の <acronym class="acronym">MIME</acronym> 型を指定するようにしましょう。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.exists" name="zend.file.transfer.validators.exists"><div class="info"><h1 class="title">Exists バリデータ</h1></div>
        

        <p class="para">
            <code class="code">Exists</code> バリデータは、
            指定したファイルの存在をチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を指定し、
                    ファイルが指定したディレクトリに存在するかどうかをチェックします。
                </p>
            </li>
        </ul>

        <p class="para">
            このバリデータで複数のディレクトリを指定するには、
            カンマ区切りの文字列あるいは配列を使用します。
             <span class="methodname">setDirectory()</span>、 <span class="methodname">addDirectory()</span> および
             <span class="methodname">getDirectory()</span> といったメソッドでディレクトリの設定や取得が可能です。
        </p>

        <div class="example"><div class="info"><p><b>Example #9 Exists バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// temp ディレクトリをチェック対象に追加します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Exists'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'<span style="color: #000099; font-weight: bold;">\t</span>emp'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ふたつのディレクトリを配列記法で追加します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Exists'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'<span style="color: #000099; font-weight: bold;">\h</span>ome<span style="color: #000099; font-weight: bold;">\i</span>mages'</span>, <span style="color: #ff0000;">'<span style="color: #000099; font-weight: bold;">\h</span>ome<span style="color: #000099; font-weight: bold;">\u</span>ploads'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>
        <blockquote><p><b class="note">Note</b>: 
            
                このバリデータは、ファイルが存在するかどうかをすべてのディレクトリでチェックすることに注意しましょう。
                指定したディレクトリのうちのどこかひとつでもファイルが存在しなかった場合に検証が失敗します。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.extension" name="zend.file.transfer.validators.extension"><div class="info"><h1 class="title">Extension バリデータ</h1></div>
        

        <p class="para">
            <code class="code">Extension</code> バリデータは、
            渡されたファイルの拡張子をチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を設定し、
                    指定したファイルがこの拡張子かどうかをチェックします。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">case</code>: チェックの際に大文字小文字を区別するかどうかを設定します。
                    デフォルトでは大文字小文字を区別しません。
                    このオプションは、すべての拡張子に対して適用されることに注意しましょう。
                </p>
            </li>
        </ul>

        <p class="para">
            このバリデータで複数の拡張子を指定するには、
            カンマ区切りの文字列あるいは配列を使用します。
             <span class="methodname">setExtension()</span>、 <span class="methodname">addExtension()</span> および
             <span class="methodname">getExtension()</span> といったメソッドで拡張子の設定や取得が可能です。
        </p>

        <p class="para">
            場合によっては大文字小文字を区別してチェックしたくなることもあるでしょう。
            そんなときのために、コンストラクタで 2 番目のパラメータ
            <code class="code">$case</code> を指定できます。これを <b><tt>TRUE</tt></b>
            にすると、大文字小文字を区別して拡張子のチェックを行います。
        </p>

        <div class="example"><div class="info"><p><b>Example #10 Extension バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 拡張子を jpg と png のみに制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Extension'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'jpg,png'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 配列形式で、拡張子を jpg と png のみに制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Extension'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'jpg'</span>, <span style="color: #ff0000;">'png'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 大文字小文字を区別したチェックを行います</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Extension'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'mo'</span>, <span style="color: #ff0000;">'png'</span>, <span style="color: #ff0000;">'case'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>!<span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">isValid</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'C:<span style="color: #000099; font-weight: bold;">\t</span>emp<span style="color: #000099; font-weight: bold;">\m</span>yfile.MO'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/print"><span style="color: #000066;">print</span></a> <span style="color: #ff0000;">'Not valid because MO and mo do not match with case sensitivity;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #ff0000;">}</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #ff0000;"</span></div></li></ol></div></div></div>


        </div>
        <blockquote><p><b class="note">Note</b>: 
            
                このバリデータがチェックするのはファイルの拡張子のみであることに注意しましょう。
                実際の <acronym class="acronym">MIME</acronym> 型などはチェックしません。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.filessize" name="zend.file.transfer.validators.filessize"><div class="info"><h1 class="title">FilesSize バリデータ</h1></div>
        

        <p class="para">
            <code class="code">FilesSize</code> バリデータは、
            すべてのファイルの合計サイズをチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">min</code>: ファイルサイズの総合計の最小値を設定します。
                    このオプションで、転送されるファイルの合計サイズの最小値を指定します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">max</code>: ファイルサイズの総合計の最大値を設定します。
                </p>

                <p class="para">
                    このオプションで、転送されるファイルの合計サイズの最大値を指定できます。
                    個別のファイルのサイズはチェックしません。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">bytestring</code>: 失敗したときに返す情報を、
                    人間が読みやすい形式にするかファイルサイズそのものにするかを設定します。
                </p>

                <p class="para">
                    このオプションで、ユーザが受け取る結果が &#039;10864&#039; あるいは &#039;10MB&#039;
                    のどちらの形式になるのかを指定できます。デフォルト値は
                    <b><tt>TRUE</tt></b> で、&#039;10MB&#039; 形式となります。
                </p>
            </li>
        </ul>

        <p class="para">
            文字列を指定してインスタンス化すると、その値は
            <code class="code">max</code> とみなされます。
            後から  <span class="methodname">setMin()</span> や
             <span class="methodname">setMax()</span> でオプションを設定することもできますし、
             <span class="methodname">getMin()</span> や  <span class="methodname">getMax()</span>
            で設定内容を取得することもできます。
        </p>

        <p class="para">
            サイズの指定には SI 記法も使えます。
            これは多くのオペレーティングシステムでもサポートされているものです。
            <em class="emphasis">20000 bytes</em>
            と書くかわりに、<em class="emphasis">20kB</em>
            とすることができるのです。すべての単位は、1024 単位に変換されます。
            使用できる単位は <code class="code">kB</code>、<code class="code">MB</code>、
            <code class="code">GB</code>、<code class="code">TB</code>、<code class="code">PB</code> および <code class="code">EB</code>
            です。先ほど説明したとおり、1kB は 1024 バイトであることに注意する必要があります。
        </p>

        <div class="example"><div class="info"><p><b>Example #11 FilesSize バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アップロードされるファイルサイズの合計を 40000 バイトまでに制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FilesSize'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">40000</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アップロードされるファイルサイズの合計を最大 4MB、最小 10kB に制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FilesSize'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'min'</span> =&gt; <span style="color: #ff0000;">'10kB'</span>, <span style="color: #ff0000;">'max'</span> =&gt; <span style="color: #ff0000;">'4MB'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// さきほどと同じですが、結果をプレーンなファイルサイズで返します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FilesSize'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'min'</span> =&gt; <span style="color: #ff0000;">'10kB'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'max'</span> =&gt; <span style="color: #ff0000;">'4MB'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'bytestring'</span> =&gt; <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>
        <blockquote><p><b class="note">Note</b>: 
            
                このバリデータは、チェックしたファイルのサイズを内部に保存することに注意しましょう。
                最大値を超えたファイルはエラーを返します。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.imagesize" name="zend.file.transfer.validators.imagesize"><div class="info"><h1 class="title">ImageSize バリデータ</h1></div>
        

        <p class="para">
            <code class="code">ImageSize</code> バリデータは、
            画像ファイルのサイズをチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">minheight</code>: 画像の高さの最小値を設定します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">maxheight</code>: 画像の高さの最大値を設定します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">minwidth</code>: 画像の幅の最小値を設定します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">maxwidth</code>: 画像の幅の最大値を設定します。
                </p>
            </li>
        </ul>

        <p class="para">
             <span class="methodname">setImageMin()</span> や  <span class="methodname">setImageMax()</span>
            で最小値・最大値を設定することもできますし、
             <span class="methodname">getMin()</span> や  <span class="methodname">getMax()</span>
            で設定内容を取得することもできます。
        </p>

        <p class="para">
            利便性を考慮して、 <span class="methodname">setImageWidth()</span> や  <span class="methodname">setImageHeight()</span>
            といったメソッドも用意されています。これは、幅や高さの最小値と最大値を設定します。
            もちろん、それに対応する  <span class="methodname">getImageWidth()</span> や  <span class="methodname">getImageHeight()</span>
            も使用可能です。
        </p>

        <p class="para">
            サイズの検証をしたくない場合は、その部分に値 <b><tt>NULL</tt></b> を設定します。
        </p>

        <div class="example"><div class="info"><p><b>Example #12 ImageSize バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 画像の高さを 100-200 ピクセル、幅を 40-80 ピクセルに制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'ImageSize'</span>, <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'minwidth'</span> =&gt; <span style="color: #cc66cc;">40</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'maxwidth'</span> =&gt; <span style="color: #cc66cc;">80</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'minheight'</span> =&gt; <span style="color: #cc66cc;">100</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'maxheight'</span> =&gt; <span style="color: #cc66cc;">200</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 検証用の幅をリセットします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">setImageWidth</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'minwidth'</span> =&gt; <span style="color: #cc66cc;">20</span>, <span style="color: #ff0000;">'maxwidth'</span> =&gt; <span style="color: #cc66cc;">200</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.file.transfer.validators.iscompressed" name="zend.file.transfer.validators.iscompressed"><div class="info"><h1 class="title">IsCompressed バリデータ</h1></div>
        

        <p class="para">
            <code class="code">IsCompressed</code> バリデータは、
            転送されたファイルが zip や arc のような圧縮アーカイブ形式であるかどうかをチェックします。
            このバリデータは <code class="code">MimeType</code> バリデータを使用しており、
            同じメソッドとオプションをサポートしています。
            このバリデータを特定の圧縮形式のみに制限するには、
            そのメソッドを使用します。
        </p>

        <div class="example"><div class="info"><p><b>Example #13 IsCompressed バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アップロードされたファイルが圧縮アーカイブであるかどうかチェックします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'IsCompressed'</span>, <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// zip ファイルのみを対象とするようこのバリデータを制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'IsCompressed'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'application/zip'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// よりシンプルな記法で、zip ファイルのみを対象とするようこのバリデータを制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'IsCompressed'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'zip'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <blockquote><p><b class="note">Note</b>: 
            
                指定した <acronym class="acronym">MIME</acronym>
                型がアーカイブ型であるかどうかのチェックは行われないことに注意しましょう。
                たとえば gif ファイルがこのバリデータを通過するように設定することも可能です。
                アーカイブ型かどうかのチェックには &#039;MimeType&#039;
                バリデータを使用したほうが読みやすいコードとなります。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.isimage" name="zend.file.transfer.validators.isimage"><div class="info"><h1 class="title">IsImage バリデータ</h1></div>
        

        <p class="para">
            <code class="code">IsImage</code> バリデータは、
            転送されたファイルが gif や jpeg のような画像ファイルであるかどうかをチェックします。
            このバリデータは <code class="code">MimeType</code> バリデータを使用しており、
            同じメソッドとオプションをサポートしています。
            このバリデータを特定の画像形式のみに制限するには、
            そのメソッドを使用します。
        </p>

        <div class="example"><div class="info"><p><b>Example #14 IsImage バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アップロードされたファイルが画像ファイルであるかどうかチェックします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'IsImage'</span>, <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// gif ファイルのみを対象とするようこのバリデータを制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'IsImage'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'application/gif'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// よりシンプルな記法で、gif ファイルのみを対象とするようこのバリデータを制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'IsImage'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'jpeg'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <blockquote><p><b class="note">Note</b>: 
            
                指定した <acronym class="acronym">MIME</acronym>
                型が image 型であるかどうかのチェックは行われないことに注意しましょう。
                たとえば gif ファイルがこのバリデータを通過するように設定することも可能です。
                image 型かどうかのチェックには &#039;MimeType&#039;
                バリデータを使用したほうが読みやすいコードとなります。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.hash" name="zend.file.transfer.validators.hash"><div class="info"><h1 class="title">Hash バリデータ</h1></div>
        

        <p class="para">
            <code class="code">Hash</code> バリデータは、転送されたファイルの中身のハッシュをチェックします。
            このバリデータは、<acronym class="acronym">PHP</acronym> の hash 拡張モジュールを使用します。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を設定します。
                    この値と、検証対象のハッシュとを比較します。
                </p>

                <p class="para">
                    配列形式で複数のハッシュを設定できます。
                    すべてのキーの内容をチェックし、
                    どれにも一致しなかった場合にのみ検証が失敗します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">algorithm</code>: ハッシュの取得に使用するアルゴリズムを設定します。
                </p>

                <p class="para">
                    複数のアルゴリズムを設定するには、 <span class="methodname">addHash()</span>
                    メソッドを複数回コールします。
                </p>
            </li>
        </ul>

        <div class="example"><div class="info"><p><b>Example #15 Hash バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アップロードされたファイルのハッシュが指定したものと一致するかどうかをチェックします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Hash'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'3b3652f'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ふたつの異なるハッシュを指定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Hash'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'3b3652f'</span>, <span style="color: #ff0000;">'e612b69'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 別のアルゴリズムでチェックを行います</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Hash'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'315b3cd8273d44912a7'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'algorithm'</span> =&gt; <span style="color: #ff0000;">'md5'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <blockquote><p><b class="note">Note</b>: 
            
                このバリデータは、役 34 のハッシュアルゴリズムをサポートしています。
                よく使われるものとしては &#039;crc32&#039; や &#039;md5&#039; そして &#039;sha1&#039; があります。
                サポートするアルゴリズムの一覧は、
                <a href="http://php.net" class="link external">&raquo; php.net</a> の
                <a href="http://php.net/hash_algos" class="link external">&raquo; hash_algos メソッド</a>
                を参照ください。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.md5" name="zend.file.transfer.validators.md5"><div class="info"><h1 class="title">Md5 バリデータ</h1></div>
        

        <p class="para">
            <code class="code">Md5</code> バリデータは、転送されたファイルの中身のハッシュをチェックします。
            このバリデータは、<acronym class="acronym">PHP</acronym> の hash 拡張モジュールの md5 アルゴリズムを使用します。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を設定します。
                </p>

                <p class="para">
                    配列形式で複数のハッシュを設定できます。
                    すべてのキーの内容をチェックし、
                    どれにも一致しなかった場合にのみ検証が失敗します。
                </p>
            </li>
        </ul>

        <div class="example"><div class="info"><p><b>Example #16 Md5 バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アップロードされたファイルのハッシュが指定したものと一致するかどうかをチェックします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Md5'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'3b3652f336522365223'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ふたつの異なるハッシュを指定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Md5'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'3b3652f336522365223'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'eb3365f3365ddc65365'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.file.transfer.validators.mimetype" name="zend.file.transfer.validators.mimetype"><div class="info"><h1 class="title">MimeType バリデータ</h1></div>
        

        <p class="para">
            <code class="code">MimeType</code> バリデータは、
            転送されるファイルの <acronym class="acronym">MIME</acronym> 型をチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を指定します。
                   検証したい <acronym class="acronym">MIME</acronym> 型を設定します。
                </p>

                <p class="para">
                    許可したいファイルの <acronym class="acronym">MIME</acronym> 型を定義します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">headerCheck</code>: <b><tt>TRUE</tt></b> に設定すると、
                    <em class="emphasis">fileInfo</em> あるいは <em class="emphasis">mimeMagic</em>
                    拡張モジュールがない場合にも <acronym class="acronym">HTTP</acronym>
                    情報からファイルタイプをチェックします。このオプションのデフォルト値は
                    <b><tt>FALSE</tt></b> です。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">magicfile</code>: 使用する magicfile。
                </p>

                <p class="para">
                    このオプションで、使用する magicfile を定義します。
                    指定しなかったり空だったりした場合は、定数 MAGIC
                    を使用します。このオプションは Zend Framework 1.7.1
                    以降で使用可能です。
                </p>
            </li>
        </ul>

        <p class="para">
            このバリデータで複数の <acronym class="acronym">MIME</acronym> 型を指定するには、
            カンマ区切りの文字列あるいは配列を使用します。
             <span class="methodname">setMimeType()</span>、 <span class="methodname">addMimeType()</span> および
             <span class="methodname">getMimeType()</span> といったメソッドで <acronym class="acronym">MIME</acronym> 型の設定や取得が可能です。
        </p>

        <p class="para">
            fileinfo が使用する magicfile を設定するには、オプション &#039;magicfile&#039; を使用します。
            さらに、 <span class="methodname">setMagicFile()</span> や  <span class="methodname">getMagicFile()</span>
            といったメソッドで後から magicfile の設定や取得が可能です。
            これらのメソッドは Zend Framework 1.7.1 以降で使用可能です。
        </p>

        <div class="example"><div class="info"><p><b>Example #17 MimeType バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// MIME 型を制限し、gif 画像のみを許可するようにします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'MimeType'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'image/gif'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべてのファイルが gif および jpeg 画像でなければならないように MIME 型を制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'MimeType'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'image/gif'</span>, <span style="color: #ff0000;">'image/jpeg'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// すべてのファイルが画像であるように MIME 型を制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'MimeType'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'image'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 別の magicfile を使用します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'MimeType'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'image'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'magicfile'</span> =&gt; <span style="color: #ff0000;">'/path/to/magicfile.mgx'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            上の例で示したように、複数の <acronym class="acronym">MIME</acronym> 型をひとつのグループとして扱うこともできます。
            画像ファイルならすべて許可したいという場合は、<acronym class="acronym">MIME</acronym> 型に &#039;image&#039; と指定します。
            &#039;image&#039; 以外にも &#039;audio&#039;、&#039;video&#039;、&#039;text などが使用可能です。
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                <acronym class="acronym">MIME</acronym> 型のグループを許可してしまうと、アプリケーション側で対応しているか否かにかかわらず
                そのグループのすべての形式のファイルを許可してしまうことに注意しましょう。
                たとえば &#039;image&#039; を許可したら &#039;image/xpixmap&#039; や &#039;image/vasa&#039;
                も受け付けることになりますが、おそらくこれは問題となるでしょう。
                アプリケーション側ですべての形式を処理できるかどうか不安なら、
                グループ指定ではなく個別の <acronym class="acronym">MIME</acronym> 型を指定するようにしましょう。
            <br />
        </p></blockquote>

        <blockquote><p><b class="note">Note</b>: 
            
                このコンポーネントは、もし <code class="code">fileinfo</code>
                拡張モジュールが使用可能ならそれを使用します。使用できない場合は
                <code class="code">mime_content_type</code> 関数を使用します。
                この関数コールが失敗した場合は、<acronym class="acronym">HTTP</acronym> で渡された <acronym class="acronym">MIME</acronym> 型を使用します。
            <br />

            
                <code class="code">fileinfo</code> も <code class="code">mime_content_type</code>
                も使えない場合は、セキュリティの問題に注意する必要があります。
                <acronym class="acronym">HTTP</acronym> から取得する <acronym class="acronym">MIME</acronym> 型はセキュアではなく、
                容易に改ざんできます。
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.file.transfer.validators.notexists" name="zend.file.transfer.validators.notexists"><div class="info"><h1 class="title">NotExists バリデータ</h1></div>
        

        <p class="para">
            <code class="code">NotExists</code> バリデータは、
            指定したファイルの存在をチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を設定し、
                    ファイルが指定したディレクトリに存在しないかどうかをチェックします。
                </p>
            </li>
        </ul>

        <p class="para">
            このバリデータで複数のディレクトリを指定するには、
            カンマ区切りの文字列あるいは配列を使用します。
             <span class="methodname">setDirectory()</span>、 <span class="methodname">addDirectory()</span> および
             <span class="methodname">getDirectory()</span> といったメソッドでディレクトリの設定や取得が可能です。
        </p>

        <div class="example"><div class="info"><p><b>Example #18 NotExists バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// temp ディレクトリをチェック対象に追加します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'NotExists'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'<span style="color: #000099; font-weight: bold;">\t</span>emp'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ふたつのディレクトリを配列記法で追加します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'NotExists'</span>, <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'<span style="color: #000099; font-weight: bold;">\h</span>ome<span style="color: #000099; font-weight: bold;">\i</span>mages'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'<span style="color: #000099; font-weight: bold;">\h</span>ome<span style="color: #000099; font-weight: bold;">\u</span>ploads'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>
        <blockquote><p><b class="note">Note</b>: 
            
                このバリデータは、ファイルが存在しないかどうかをすべてのディレクトリでチェックすることに注意しましょう。
                指定したディレクトリのうちのどこかひとつでもファイルが存在した場合に検証が失敗します。
            <br />
        </p></blockquote>
    </div>

<div class="section" id="zend.file.transfer.validators.sha1" name="zend.file.transfer.validators.sha1"><div class="info"><h1 class="title">Sha1 バリデータ</h1></div>
        

        <p class="para">
            <code class="code">Sha1</code> バリデータは、転送されたファイルの中身のハッシュをチェックします。
            このバリデータは、<acronym class="acronym">PHP</acronym> の hash 拡張モジュールの sha1 アルゴリズムを使用します。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">*</code>: 任意のキーあるいは数値添字配列を設定します。
                </p>

                <p class="para">
                    配列形式で複数のハッシュを設定できます。
                    すべてのキーの内容をチェックし、
                    どれにも一致しなかった場合にのみ検証が失敗します。
                </p>
            </li>
        </ul>

        <div class="example"><div class="info"><p><b>Example #19 sha1 バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// アップロードされたファイルのハッシュが指定したものと一致するかどうかをチェックします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'sha1'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #ff0000;">'3b3652f336522365223'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ふたつの異なるハッシュを指定します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Sha1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'3b3652f336522365223'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'eb3365f3365ddc65365'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.file.transfer.validators.size" name="zend.file.transfer.validators.size"><div class="info"><h1 class="title">Size バリデータ</h1></div>
        

        <p class="para">
            <code class="code">Size</code> バリデータは、
            個々のファイルのサイズをチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">Min</code>: ファイルサイズの最小値を設定します。
                </p>

                <p class="para">
                    このオプションで、転送されるファイルの個々のサイズの最小値を指定できます。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">Max</code>: ファイルサイズの最大値を設定します。
                </p>

                <p class="para">
                    このオプションで、転送されるファイルの個々のサイズを制限できます。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">bytestring</code>: 失敗したときに返す情報を、
                    人間が読みやすい形式にするかファイルサイズそのものにするかを設定します。
                </p>

                <p class="para">
                    このオプションで、ユーザが受け取る結果が &#039;10864&#039; あるいは &#039;10MB&#039;
                    のどちらの形式になるのかを指定できます。デフォルト値は
                    <b><tt>TRUE</tt></b> で、&#039;10MB&#039; 形式となります。
                </p>
            </li>
        </ul>

        <p class="para">
            文字列を指定してインスタンス化すると、その値は
            <code class="code">max</code> とみなされます。あるいは、後から  <span class="methodname">setMin()</span> や
             <span class="methodname">setMax()</span> でオプションを設定することもできますし、
             <span class="methodname">getMin()</span> や  <span class="methodname">getMax()</span>
            で設定内容を取得することもできます。
        </p>

        <p class="para">
            サイズの指定には SI 記法も使えます。
            これは多くのオペレーティングシステムでもサポートされているものです。
            <em class="emphasis">20000 bytes</em>
            と書くかわりに、<em class="emphasis">20kB</em>
            とすることができるのです。すべての単位は、1024 単位に変換されます。
            使用できる単位は <code class="code">kB</code>、<code class="code">MB</code>、
            <code class="code">GB</code>、<code class="code">TB</code>、<code class="code">PB</code> および <code class="code">EB</code>
            です。先ほど説明したとおり、1kB は 1024 バイトであることに注意する必要があります。
        </p>

        <div class="example"><div class="info"><p><b>Example #20 Size バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイルサイズを 40000 バイトまでに制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Size'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">40000</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 指定したファイルのサイズを最大 4MB、最小 10kB に制限し、</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// さらにエラー時に返す結果をユーザに優しい形式ではなく</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// プレーンな数値とします</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Size'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">false</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'min'</span> =&gt; <span style="color: #ff0000;">'10kB'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'max'</span> =&gt; <span style="color: #ff0000;">'4MB'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'bytestring'</span> =&gt; <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.file.transfer.validators.wordcount" name="zend.file.transfer.validators.wordcount"><div class="info"><h1 class="title">WordCount バリデータ</h1></div>
        

        <p class="para">
            <code class="code">WordCount</code> バリデータは、
            指定したファイル内の単語数をチェックします。
            次のオプションをサポートしています。
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <code class="code">min</code>: 見つかった単語数の最小値を設定します。
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <code class="code">max</code>: 見つかった単語数の最大値を設定します。
                </p>
            </li>
        </ul>

        <p class="para">
            文字列あるいは整数値を指定してインスタンス化すると、その値は
            <code class="code">max</code> とみなされます。あるいは、後から  <span class="methodname">setMin()</span> や
             <span class="methodname">setMax()</span> でオプションを設定することもできますし、
             <span class="methodname">getMin()</span> や  <span class="methodname">getMax()</span>
            で設定内容を取得することもできます。
        </p>

        <div class="example"><div class="info"><p><b>Example #21 WordCount バリデータの使用法</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_File_Transfer<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイル内の単語数を 2000 語までに制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'WordCount'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <span style="color: #cc66cc;">2000</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ファイル内の単語数を最大 5000 語、最小 1000 語に制限します</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$upload</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'WordCount'</span>, <span style="color: #000000; font-weight: bold;">false</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'min'</span> =&gt; <span style="color: #cc66cc;">1000</span>, <span style="color: #ff0000;">'max'</span> =&gt; <span style="color: #cc66cc;">5000</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        </div>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.file.transfer.introduction.html">Zend_File_Transfer(日本語)</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.file.html">Zend_File</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.file.transfer.filters.html">Filters for Zend_File_Transfer</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.file.html">Zend_File</a></li>
  <li><a href="zend.file.transfer.introduction.html">Zend_File_Transfer(日本語)</a></li>
  <li class="active"><a href="zend.file.transfer.validators.html">Zend_File_Transfer 用のバリデータ</a></li>
  <li><a href="zend.file.transfer.filters.html">Filters for Zend_File_Transfer</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>