<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_ProgressBar - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.progressbar.html">Zend_ProgressBar</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.progressbar.html">Zend_ProgressBar</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.queue.html">Zend_Queue</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.progressbar.introduction" class="section"><div class="info"><h1 class="title">Zend_ProgressBar</h1></div>
    

    <div class="section" id="zend.progressbar.whatisit" name="zend.progressbar.whatisit"><div class="info"><h1 class="title">Einführung</h1></div>
        

        <p class="para">
            <span class="classname">Zend_ProgressBar</span> ist eine Komponente um Fortschrittsbalken in
            verschiedenen Umgebungen zu erstellen und zu aktualisieren. Sie besteht aus einem
            einzelnen Backend, welches des Fortschritt durch eines der verschiedenen Backends
            ausgibt. Bei jedem Update nimmt es einen absoluten Wert und optional eine Statusmeldung
            und ruft dann den Adapter mit einigen vorkalkulierten Werten, wie Prozentwerte und
            voraussichtliche Restzeit, auf.
        </p>
    </div>

    <div class="section" id="zend.progressbar.basic" name="zend.progressbar.basic"><div class="info"><h1 class="title">Grundsätzliche Verwendung von Zend_Progressbar</h1></div>
        

        <p class="para">
            <span class="classname">Zend_ProgressBar</span> ist sehr einfach in seiner Verwendung. Man
            erstellt einfach eine neue Instanz von <span class="classname">Zend_Progressbar</span>,
            definiert einen minimalen und einen maximalan Wert, und wählt den Adapter der die Daten
            ausgibt. Wenn man die Datei ausführen will, muß man etwas ähnliches wie folgt machen:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$progressBar</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_ProgressBar<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$adapter</span>, <span style="color: #cc66cc;">0</span>, <span style="color: #0000ff;">$fileSize</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">while</span> <span style="color: #66cc66;">&#40;</span>!<a href="http://www.php.net/feof"><span style="color: #000066;">feof</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$fp</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// Mach was</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$progressBar</span>-&gt;<span style="color: #006600;">update</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$currentByteCount</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$progressBar</span>-&gt;<span style="color: #006600;">finish</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Im ersten Schritt, wird eine Instanz von <span class="classname">Zend_ProgressBar</span>
            erstellt, mit einem speziellen Adapter, einem minimalen Wert von 0 und einem maximalen
            Wert der kompletten Dateigröße. Dann wird die Datei ausgeführt und bei jeder Schleife
            wird der Fortschrittsbalken mit der aktuellen Byteanzahl aktualisiert. Am Ende der
            Schleife, wird der Status des Fortschrittsbalken auf fertig gestellt.
        </p>

        <p class="para">
            Man kann auch die  <span class="methodname">update()</span> Methode von
            <span class="classname">Zend_ProgressBar</span> ohne Argumente aufrufen, das die ETA einfach neu
            berechnet und den Adapter aktualisiert. Das ist nützlich wenn kein Update der Daten war,
            man aber den Fortschrittsbalken aktualisieren will.
        </p>
    </div>

    <div class="section" id="zend.progressbar.persistent" name="zend.progressbar.persistent"><div class="info"><h1 class="title">Persistenter Fortschritt</h1></div>
        

        <p class="para">
            Wenn man den Fortschrittsbalken über mehrere Aufrufe hinweg persistent haben will, kann
            man den Namen eines Session Namespaces als viertes Argument an den Constructor angeben.
            In diesem Fall wird der Fortschrittsbalken den Adapter nicht im Constructor
            benachrichtigen, sondern nur wenn man  <span class="methodname">update()</span> oder
             <span class="methodname">finish()</span> aufruft. Auch der aktuelle Wert, der Statustext und
            die Startzeit für die ETA Kalkulation werden im nächsten Ablauf erneut geholt.
        </p>
    </div>

    <div class="section" id="zend.progressbar.adapters" name="zend.progressbar.adapters"><div class="info"><h1 class="title">Standard Adapter</h1></div>
        

        <p class="para">
            <span class="classname">Zend_ProgressBar</span> kommt mit den folgenden zwei Adaptern:

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        <a href="zend.progressbar.introduction.html#zend.progressbar.adapter.console" class="link">Zend_ProgressBar_Adapter_Console</a>
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <a href="zend.progressbar.introduction.html#zend.progressbar.adapter.jspush" class="link">Zend_ProgressBar_Adapter_JsPush</a>
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <a href="zend.progressbar.introduction.html#zend.progressbar.adapter.jspull" class="link">Zend_ProgressBar_Adapter_JsPull</a>
                    </p>
                </li>
            </ul>
        </p>

        <div class="section" id="zend.progressbar.adapter.console" name="zend.progressbar.adapter.console"><div class="info"><h1 class="title">Zend_ProgressBar_Adapter_Console</h1></div>
    

    <p class="para">
        <span class="classname">Zend_ProgressBar_Adapter_Console</span> ist ein Textbasierter Adater für
        Terminals. Er kann automatisch die Terminalbreite erkennen unterstützt aber auch eigene
        Breiten. Kann kann definieren welche Elemente mit dem Fortschrittsbalken angezeigt werden
        und auch deren Reihenfolge ändern. Man kann auch den Stil des Fortschrittsbalkens selbst
        definieren.
    </p>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>Automatische Breitenerkennung der Konsole</b><br /></span>
        

        
            <code class="code">shell_exec</code> wird benötigt damit dieses Feature auf *nix basierenden Systemen
            funktioniert. Auf Windows, ist die Terminalbreite immer auf 80 Zeichen begrenzt, sodas
            dort keine Erkennung notwendig ist.
        <br />
    </p></blockquote>

    <p class="para">
        Man kann auch die Optionen des Adapters entweder über die <code class="code">set*</code> Methoden oder
        durch die Übergabe eines Arrays, oder einer Instanz von <span class="classname">Zend_Config</span>,
        an den Constructor mit dem Optionen als ersten Parameter. Die möglichen Optionen sind:
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                <code class="code">outputStream</code>: Ein anderer Ausgabe-Stream wenn man nicht auf STDOUT
                streamen will. Kann jeder andere Stream wie <code class="code">php://stderr</code> oder ein Pfad
                zu einer Datei sein.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">width</code>: Entweder ein Integer oder die Konstante
                <b><tt>AUTO</tt></b> von <span class="classname">Zend_Console_ProgressBar</span>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">elements</code>: Entweder <b><tt>NULL</tt></b> für Standard oder ein
                Array mit zumindest einer der folgenden Konstanten von
                <span class="classname">Zend_Console_ProgressBar</span> als Wert:
            </p>

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        <b><tt>ELEMENT_PERCENT</tt></b>: Der aktuelle Wert in Prozent.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <b><tt>ELEMENT_BAR</tt></b>: Die sichtbare Begrenzung welche den
                        Prozentwert anzeigt.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <b><tt>ELEMENT_ETA</tt></b>: Die automatisch berechnete ETA. Das
                        Element wird zuerst nach fünf Sekunden angezeigt, weil es wärend dieser Zeit
                        nicht möglich ist korrekte Ergebnisse zu berechnen.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <b><tt>ELEMENT_TEXT</tt></b>: Eine optionale Statusmeldung über den
                        aktuelle Fortschritt.
                    </p>
                </li>
            </ul>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">textWidth</code>: Breite in Zeichen des <b><tt>ELEMENT_TEXT</tt></b>
                Elements. Standard ist 20.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">charset</code>: Zeichensatz des
                <b><tt>ELEMENT_TEXT</tt></b> Elements. Standardwert ist utf-8.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">barLeftChar</code>: Ein String der auf der linken Seite des Zeigers des
                Fortschrittsbalkens verwendet wird.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">barRightChar</code>: Ein String der auf der rechten Seite des Zeigers des
                Fortschrittsbalkens verwendet wird.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">barIndicatorChar</code>: Ein String der für den Zeiger des Fortschrittsbalkens
                verwendet wird. Er kann auch leer sein.
            </p>
        </li>
    </ul>
</div>
        <div class="section" id="zend.progressbar.adapter.jspush" name="zend.progressbar.adapter.jspush"><div class="info"><h1 class="title">Zend_ProgressBar_Adapter_JsPush</h1></div>
    

    <p class="para">
        <span class="classname">Zend_ProgressBar_Adapter_JsPush</span> ist ein Adapter der es erlaubt den
        Fortschrittsbalken in einem Browser über Javascript Push zu aktualisieren. Das bedeutet das
        keine zweite Verbindung benötigt wird um den Status über den aktuell laufenden Prozess zu
        erhalten, sondern das der Prozess selbst seinen Status direkt an den Browser schickt.
    </p>

    <p class="para">
        Man kann auch die Optionen des Adapters entweder über die <code class="code">set*</code> Methoden oder
        durch die Übergabe eines Arrays, oder einer Instanz von <span class="classname">Zend_Config</span>,
        an den Constructor mit dem Optionen als ersten Parameter. Die möglichen Optionen sind:
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                <code class="code">updateMethodName</code>: Die Javascript Methode die bei jeder Aktualisierung
                aufgerufen werden soll. Standardwert ist
                <span class="classname">Zend_ProgressBar_Update</span>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <code class="code">finishMethodName</code>: Die Javascript Methode die aufgerufen werden soll
                wenn der Beendet-Status gesetzt wurde. Der Standardwert ist
                <b><tt>NULL</tt></b>, was bedeutet das nichts passiert.
            </p>
        </li>
    </ul>

    <p class="para">
        Die Verwendung dieses Adapters ist recht einfach. Zuerst wird ein Fortschrittsbalken im
        Browser erstellt, entweder mit JavaScript oder mit vorher erstelltem reinen
        <acronym class="acronym">HTML</acronym>. Dann definiert man die Update Methode und optional die Finish
        Methode in JavaScript, die beide ein Json Objekt als einziges Argument nehmen. Das wird die
        Webseite mit einem lange laufenden Prozess, in einem versteckten <code class="code">iframe</code> oder
        <code class="code">object</code> Tag, aufgerufen. Wärend der Prozess läuft wird der Adapter die Update
        Methode bei jedem Update mit einem Json Objekt aufgerufen, das die folgenden Parameter
        enthält:
    </p>

    <ul class="itemizedlist">
        <li class="listitem"><p class="para"><code class="code">current</code>: Der aktuelle absolute Wert</p></li>
        <li class="listitem"><p class="para"><code class="code">max</code>: Der maximale absolute Wert</p></li>
        <li class="listitem"><p class="para"><code class="code">percent</code>: Der berechnete Prozentwert</p></li>

        <li class="listitem">
            <p class="para"><code class="code">timeTaken</code>: Die Zeit die der Prozess bis jetzt gelaufen ist</p>
        </li>

        <li class="listitem">
            <p class="para"><code class="code">timeRemaining</code>: Die erwartete Zeit bis der Prozess beendet ist</p>
        </li>

        <li class="listitem">
            <p class="para"><code class="code">text</code>: Die optionale Statusmeldung, wenn angegeben</p>
        </li>
    </ul>

    <div class="example"><div class="info"><p><b>Example #1 Grundsätzliches Beispiel für den Client-seitigen Teil</b></p></div>
        

        <div class="example-contents"><p>
            Dieses Beispiel zeigt ein grundsätzliches Setup von <acronym class="acronym">HTML</acronym>,
            <acronym class="acronym">CSS</acronym> und JavaScript für den JsPush Adapter
        </p></div>

        <div class="programlisting html"><div class="htmlcode"><div style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;div id=&quot;zend-progressbar-container&quot;&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &lt;div id=&quot;zend-progressbar-done&quot;&gt;&lt;/div&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;/div&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&lt;iframe src=&quot;long-running-process.php&quot; id=&quot;long-running-process&quot;&gt;&lt;/iframe&gt;</div></li></ol></div></div></div>


        <div class="programlisting css"><div class="csscode"><div class="css" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #cc00cc;">#long-running-process</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">position</span>: <span style="color: #993333;">absolute</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">left</span>: -<span style="color: #933;">100px</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">top</span>: -<span style="color: #933;">100px</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">width</span>: <span style="color: #933;">1px</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">height</span>: <span style="color: #933;">1px</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #cc00cc;">#zend-progressbar-container</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">width</span>: <span style="color: #933;">100px</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">height</span>: <span style="color: #933;">30px</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">border</span>: <span style="color: #933;">1px</span> <span style="color: #993333;">solid</span> <span style="color: #cc00cc;">#<span style="color: #933;">000000</span></span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">background-color</span>: <span style="color: #cc00cc;">#ffffff</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #cc00cc;">#zend-progressbar-done</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">width</span>: <span style="color: #933;">0</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">height</span>: <span style="color: #933;">30px</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">background-color</span>: <span style="color: #cc00cc;">#<span style="color: #933;">000000</span></span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <div class="programlisting javascript"><div class="javascriptcode"><div class="javascript" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #003366; font-weight: bold;">function</span> Zend_ProgressBar_Update<span style="color: #66cc66;">&#40;</span>data<span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; document.<span style="color: #006600;">getElementById</span><span style="color: #66cc66;">&#40;</span><span style="color: #3366CC;">'zend-progressbar-done'</span><span style="color: #66cc66;">&#41;</span>.<span style="color: #006600;">style</span>.<span style="color: #006600;">width</span> =</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; data.<span style="color: #006600;">percent</span> + <span style="color: #3366CC;">'%'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <div class="example-contents"><p>
            Das erstellt einen einfachen Container mit einem schwarzen Rand und einem Block der den
            aktuellen Prozess anzeigt. Man sollte den <code class="code">iframe</code> oder <code class="code">object</code>
            nicht mit <code class="code">display: none;</code> verstecken, da einige Browser wie Safari 2 den
            aktuellen Inhalt dann nicht laden.
        </p></div>

        <div class="example-contents"><p>
            Statt einen eigenen Fortschrittsbalken zu erstellen, kann es gewünscht sein einen von
            einer vorhandenen Bibliothek wir Dojo, jQuery usw zu verwenden. Es gibt zum Beispiel:
        </p></div>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    Dojo: <tt class="uri">http://dojotoolkit.org/reference-guide/dijit/ProgressBar.html</tt>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    jQuery: <tt class="uri">http://t.wits.sg/2008/06/20/jquery-progress-bar-11/</tt>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    MooTools: <tt class="uri">http://davidwalsh.name/dw-content/progress-bar.php</tt>
                </p>
            </li>

            <li class="listitem">
                <p class="para">Prototype: <tt class="uri">http://livepipe.net/control/progressbar</tt></p>
            </li>
        </ul>
    </div>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>Intervall der Updates</b><br /></span>
        

        
            Man sollte davon Abstand nehmen zuviele Updates zu senden, da jedes Update eine
            Mindestgröße von 1kb hat. Das ist eine Notwendigkeit für den Safari Browser um den
            Funktionsaufruf darzustellen und auszuführen. Der Internet Explorer hat eine ähnliche
            Einschränkung von 256 Bytes.
        <br />
    </p></blockquote>
</div>
        <div class="section" id="zend.progressbar.adapter.jspull" name="zend.progressbar.adapter.jspull"><div class="info"><h1 class="title">Zend_ProgressBar_Adapter_JsPull</h1></div>
    

    <p class="para">
        <span class="classname">Zend_ProgressBar_Adapter_JsPull</span> ist das Gegenteil von jsPush, da es
        ein Holen für neue Updates benötigt, statt die Updates zum Browser zu schicken. Generell
        sollte man den Adapter mit der Persistenz Option auf <span class="classname">Zend_ProgressBar</span>
        verwenden. Bei der Benachrichtigung sendet der Adapter einen <acronym class="acronym">JSON</acronym> String
        zum Browser, der exakt wie der JSON String aussieht der vom jsPush Adapter gesendet wird.
        Der einzige Unterschied ist, das er einen zusätzlichen Parameter
        <span class="property">finished</span> enthält, der entweder <b><tt>FALSE</tt></b> ist, wenn
         <span class="methodname">update()</span> aufgerufen wurde, oder <b><tt>TRUE</tt></b> wenn
         <span class="methodname">finish()</span> aufgerufen wurde.
    </p>

    <p class="para">
        Die Adapteroptionen kann man entweder über die  <span class="methodname">set*()</span> Methoden oder
        durch die Übergabe eines Arrays oder einer Instanz von <span class="classname">Zend_Config</span>
        mit den Optionen als ersten Parameter an den Constructor setzen. Die vorhandenen Optionen
        sind:
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                <span class="property">exitAfterSend</span>: Beendet die aktuelle Anfrage nachdem die Daten
                an den Browser gesendet wurden. Der Standardwert ist <b><tt>TRUE</tt></b>.
            </p>
        </li>
    </ul>
</div>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.progressbar.html">Zend_ProgressBar</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.progressbar.html">Zend_ProgressBar</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.queue.html">Zend_Queue</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.progressbar.html">Zend_ProgressBar</a></li>
  <li class="active"><a href="zend.progressbar.introduction.html">Zend_ProgressBar</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>