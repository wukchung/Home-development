<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Writer - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.log.overview.html">&Uuml;bersicht</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.log.html">Zend_Log</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.log.formatters.html">Formatter</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.log.writers" class="section"><div class="info"><h1 class="title">Writer</h1></div>
    

    <p class="para">
        Ein Writer ist ein Objekt das von <span class="classname">Zend_Log_Writer_Abstract</span> abstammt.
        Die Aufgabe eines Writer&#039;s ist es Log Daten in ein Speicher-Backend aufzunehmen.
    </p>

    <div class="section" id="zend.log.writers.stream" name="zend.log.writers.stream"><div class="info"><h1 class="title">In Streams schreiben</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Log_Writer_Stream</span> sendet Log Daten in einen
            <a href="http://www.php.net/stream" class="link external">&raquo; PHP Stream</a>.
        </p>

        <p class="para">
            Um Log Daten in den <acronym class="acronym">PHP</acronym> Ausgabebuffer zu schreiben, muß die URL
            <var class="filename">php://output</var> verwendet werden. Alternativ können Log Daten direkt
            an einen Stream wie z.B. <b><tt>STDERR</tt></b> (<var class="filename">php://stderr</var>)
            gesendet werden.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'php://output'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Informational message'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Um Daten in eine Datei zu schreiben, muß eine der
            <a href="http://www.php.net/manual/de/wrappers.php#wrappers.file" class="link external">&raquo; Dateisystem
            URLs</a> verwendet werden:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/path/to/logfile'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Informative Nachricht'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Standardmäßig wird der Stream im Anhänge-Modus geöffnet (&quot;a&quot;). Um Ihn in
            einem anderen Modus zu öffnen, akzeptiert der
            <span class="classname">Zend_Log_Writer_Stream</span> Konstruktor einen optionalen zweiten
            Parameter für den Modus.
        </p>

        <p class="para">
            Der Konstruktor von <span class="classname">Zend_Log_Writer_Stream</span> akzeptiert auch eine
            existierende Stream Ressource:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$stream</span> = @<a href="http://www.php.net/fopen"><span style="color: #000066;">fopen</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/path/to/logfile'</span>, <span style="color: #ff0000;">'a'</span>, <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>! <span style="color: #0000ff;">$stream</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; throw <span style="color: #000000; font-weight: bold;">new</span> Exception<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Stream konnte nicht geöffnet werden'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$stream</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Informative Nachricht'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Der Modus kann für existierende Stream Ressourcen nicht definiert werden. Wenn das
            gemacht versucht wird, wird eine <span class="classname">Zend_Log_Exception</span> geworfen.
        </p>
    </div>

    <div class="section" id="zend.log.writers.database" name="zend.log.writers.database"><div class="info"><h1 class="title">In Datenbanken schreiben</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Log_Writer_Db</span> schreibt Log Informationen in eine Datenbank
            Tabelle wobei <span class="classname">Zend_Db</span> verwendet wird. Der Konstrukor von
            <span class="classname">Zend_Log_Writer_Db</span> benötigt eine
            <span class="classname">Zend_Db_Adapter</span> Instanz, einen Tabellennamen, und ein Abbild der
            Datenbankspalten zu den Elementen der Eventdaten:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$params</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a> <span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'username'</span> =&gt; <span style="color: #ff0000;">'malory'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'password'</span> =&gt; <span style="color: #ff0000;">'******'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'camelot'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'PDO_MYSQL'</span>, <span style="color: #0000ff;">$params</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$columnMapping</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'lvl'</span> =&gt; <span style="color: #ff0000;">'priority'</span>, <span style="color: #ff0000;">'msg'</span> =&gt; <span style="color: #ff0000;">'message'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Db<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$db</span>, <span style="color: #ff0000;">'log_table_name'</span>, <span style="color: #0000ff;">$columnMapping</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Informative Nachricht'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Das obige Beispiel schreibt eine einzelne Zeile von Log Daten in einem Datenbanktabelle
            welche &#039;log_table_name&#039; Tabelle benannt wird. Die Datenbankspalte welche &#039;lvl&#039; benannt
            ist empfängt die Nummer der Priorität und die Spalte welche &#039;msg&#039; benannt ist empfängt
            die Log Nachricht.
        </p>
    </div>

    <div class="section" id="zend.log.writers.firebug" name="zend.log.writers.firebug"><div class="info"><h1 class="title">An Firebug schreiben</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Log_Writer_Firebug</span> sendet Logdaten an die
        <a href="http://www.getfirebug.com/" class="link external">&raquo; Firebug</a>
        <a href="http://getfirebug.com/logging.html" class="link external">&raquo; Console</a>.
    </p>

    <p class="para">
        <div class="inlinemediaobject"><div class="imageobject"><img src="images/d481d625821a97b9a5eb2cec99dca50e-zend.wildfire.firebug.console.png" alt="zend.wildfire.firebug.console.png" width="310" height="151" /></div></div>
    </p>

    <p class="para">
        Alle Daten werden über die <span class="classname">Zend_Wildfire_Channel_HttpHeaders</span>
        Komponente gesendet welche <acronym class="acronym">HTTP</acronym> Header verwendet um sicherzustellen das
        der Seiteninhalt nicht verändert wird. Das Debuggen von <acronym class="acronym">AJAX</acronym> Anfragen die
        klare <acronym class="acronym">JSON</acronym> und <acronym class="acronym">XML</acronym> Antworten benötigen ist mit diesem
        Vorgehen möglich.
    </p>

    <p class="para">
        Notwendigkeiten:
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                Ein Firefox Browser idealerweise Version 3 aber auch Version 2 wird unterstützt.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                Die Firebug Firefox Erweiterung welche unter <a href="https://addons.mozilla.org/en-US/firefox/addon/1843" class="link external">&raquo; https://addons.mozilla.org/en-US/firefox/addon/1843</a>
                heruntergeladen werden kann.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                Die FirePHP Filefox Erweiterung welche unter <a href="https://addons.mozilla.org/en-US/firefox/addon/6149" class="link external">&raquo; https://addons.mozilla.org/en-US/firefox/addon/6149</a>
                heruntergeladen werden kann.
            </p>
        </li>
    </ul>

    <div class="example"><div class="info"><p><b>Example #1 Loggen mit Zend_Controller_Front</b></p></div>
        

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// In der Bootstrap Datei platzieren bevor der Frontcontroller ausgeführt wird</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Firebug<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Verwende das in den Modell, View, und Controller Dateien</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">log</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Das ist eine Lognachricht!'</span>, Zend_Log::<span style="color: #006600;">INFO</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="example"><div class="info"><p><b>Example #2 Loggen ohne Zend_Controller_Front</b></p></div>
        

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Firebug<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$request</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Controller_Request_Http<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Controller_Response_Http<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$channel</span> = Zend_Wildfire_Channel_HttpHeaders::<span style="color: #006600;">getInstance</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$channel</span>-&gt;<span style="color: #006600;">setRequest</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$request</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$channel</span>-&gt;<span style="color: #006600;">setResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$response</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Ausgabe buffering starten</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/ob_start"><span style="color: #000066;">ob_start</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Jetzt können Aufrufe an den Logger durchgeführt werden</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">log</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Das ist eine Lognachricht!'</span>, Zend_Log::<span style="color: #006600;">INFO</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Logdaten an den Browser senden</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$channel</span>-&gt;<span style="color: #006600;">flush</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">sendHeaders</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.log.writers.firebug.priority-styles" name="zend.log.writers.firebug.priority-styles"><div class="info"><h1 class="title">Setzen von Stilen für Prioritäten</h1></div>
        

        <p class="para">
            Eingebaute und Benutzerdefinierte Prioritäten können mit der
             <span class="methodname">setPriorityStyle()</span> Methode angepasst werden.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">addPriority</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FOO'</span>, <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setPriorityStyle</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">8</span>, <span style="color: #ff0000;">'TRACE'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">foo</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Foo Nachricht'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Der Standardstil für Benutzerdefinierte Prioritäten kann mit der
             <span class="methodname">setDefaultPriorityStyle()</span> Methode gesetzt werden.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setDefaultPriorityStyle</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'TRACE'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Die unterstützten Stile sind wie folgt:

            <table class="doctable table"><div class="info"><caption><b>Firebug Logging Stile</b></caption></div>
                

                
                    <thead valign="middle">
                        <tr valign="middle">
                            <th>Stil</th>
                            <th>Beschreibung</th>
                        </tr>

                    </thead>


                    <tbody valign="middle" class="tbody">
                        <tr valign="middle">
                            <td align="left"><b><tt>LOG</tt></b></td>
                            <td align="left">Zeigt eine reine Lognachricht an</td>
                        </tr>


                        <tr valign="middle">
                            <td align="left"><b><tt>INFO</tt></b></td>
                            <td align="left">Zeigt eine Info Lognachricht an</td>
                        </tr>


                        <tr valign="middle">
                            <td align="left"><b><tt>WARN</tt></b></td>
                            <td align="left">Zeigt eine Warnungs Lognachricht an</td>
                        </tr>


                        <tr valign="middle">
                            <td align="left"><b><tt>ERROR</tt></b></td>

                            <td align="left">
                                Zeigt eine Fehler Lognachricht an die den Fehlerzählen von Firebug
                                erhöht
                            </td>
                        </tr>


                        <tr valign="middle">
                            <td align="left"><b><tt>TRACE</tt></b></td>

                            <td align="left">
                                Zeigt eine Lognachricht mit einem erweiterbaren Stack Trace an
                            </td>
                        </tr>


                        <tr valign="middle">
                            <td align="left"><b><tt>EXCEPTION</tt></b></td>

                            <td align="left">
                                Zeigt eine lange Fehlernachicht mit erweiterbarem Stack Trace an
                            </td>
                        </tr>


                        <tr valign="middle">
                            <td align="left"><b><tt>TABLE</tt></b></td>
                            <td align="left">Zeigt eine Lognachricht mit erweiterbarer Tabelle an</td>
                        </tr>

                    </tbody>
                
            </table>

        </p>
    </div>

    <div class="section" id="zend.log.writers.firebug.preparing-data" name="zend.log.writers.firebug.preparing-data"><div class="info"><h1 class="title">Daten für das Loggen vorbereiten</h1></div>
        

        <p class="para">
            Wärend jede <acronym class="acronym">PHP</acronym> Variable mit den eingebauten Prioritäten geloggt
            werden kann, ist eine etwas spezielle Formatierung notwendig wenn einige der
            spezialisierteren Logstile verwendet werden.
        </p>

        <p class="para">
            Die <b><tt>LOG</tt></b>, <b><tt>INFO</tt></b>, <b><tt>WARN</tt></b>,
            <b><tt>ERROR</tt></b> und <b><tt>TRACE</tt></b> Stile benötigen keine
            spezielle Formatierung.
        </p>
    </div>

    <div class="section" id="zend.log.writers.firebug.preparing-data.exception" name="zend.log.writers.firebug.preparing-data.exception"><div class="info"><h1 class="title">Loggen von Ausnahmen</h1></div>

      

      <p class="para">
          Um eine <span class="classname">Zend_Exception</span> zu loggen muß einfach das Exceptionobjekt an
          den Logger übergeben werden. Es ist egal welche Priorität oder welcher Stil gesetzt wurde,
          da die Ausnahme automatisch erkannt wird.
      </p>

      <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$exception</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Exception<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Test Ausnahme'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">err</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$exception</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.log.writers.firebug.preparing-data.table" name="zend.log.writers.firebug.preparing-data.table"><div class="info"><h1 class="title">Tabellen loggen</h1></div>
      

      <p class="para">
          Man kann auch Daten loggen und diese in einem Table Stil formatieren. Spalten werden
          automatisch erkannt und die erste Zeile der Daten wird automatisch der Header.
      </p>

      <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setPriorityStyle</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">8</span>, <span style="color: #ff0000;">'TABLE'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">addPriority</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'TABLE'</span>, <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$table</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Summary line for the table'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Spalte 1'</span>, <span style="color: #ff0000;">'Spalte 2'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Zeile 1 c 1'</span>,<span style="color: #ff0000;">'Zeile 1 c 2'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Zeile 2 c 1'</span>,<span style="color: #ff0000;">' Zeile 2 c 2'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">table</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$table</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>
</div>
    <div class="section" id="zend.log.writers.mail" name="zend.log.writers.mail"><div class="info"><h1 class="title">In Emails schreiben</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Log_Writer_Mail</span> schreibt Logeinträge in eine Email Nachricht
        indem es <span class="classname">Zend_Mail</span> verwendet. Der Konstruktor von
        <span class="classname">Zend_Log_Writer_Mail</span> nimmt ein <span class="classname">Zend_Mail</span>
        Objekt und ein optionales <span class="classname">Zend_Layout</span> Objekt entgegen.
    </p>

    <p class="para">
        Der primäre Verwendungszweck für <span class="classname">Zend_Log_Writer_Mail</span> ist es
        Entwickler, System Administratoren, oder jede benötigte Partei über Fehler zu
        benachrichtigen die mit <acronym class="acronym">PHP</acronym>-basierenden Skripten auftreten können.
        <span class="classname">Zend_Log_Writer_Mail</span> wurde aus der Idee geboren das, wenn irgendetwas
        fehlschlägt, ein Mensch sofort darüber alarmiert werden muß um korrigierende Maßnahmen
        durchzuführen.
    </p>

    <p class="para">
        Die grundsätzliche Verwendung wird anbei gezeigt:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mail</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">setFrom</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'errors@example.org'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addTo</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'project_developers@example.org'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Mail<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mail</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Setzt den Subjekt-Text der verwendet wird; Zusammenfassung der Anzahl der</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Fehler wird der Subjektzeile angefügt bevor die Nachricht gesendet wird.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setSubjectPrependText</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Errors with script foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Nur Einträge vom Level Warnung und höher schicken</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">addFilter</span><span style="color: #66cc66;">&#40;</span>Zend_Log::<span style="color: #006600;">WARN</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">addWriter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Irgendetwas schlechtes findet statt!</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">error</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Kann nicht zur datenbank verbinden'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Wenn der Writer heruntergefahren wird, wird Zend_Mail::send()</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// getriggert um ein Email mit allen Logeinträgen zu senden die</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// auf oder über dem Filterlevel von Zend_Log liegen</span></div></li></ol></div></div></div>


    <p class="para">
        <span class="classname">Zend_Log_Writer_Mail</span> stellt den Email Body standardmäßig
        als reinen Text dar.
    </p>

    <p class="para">
        Es wird eine Email gesendet die alle Logeinträge enthält die auf oder
        über dem Filterlevel sind. Wenn zum Beispiel, Einträge mit Warnungs-Level
        gesendet werden sollen, und zwei Warnungen und fünf Fehler stattfinden,
        wird das Email in Summe sieben Logeinträge enthalten.
    </p>

    <div class="section" id="zend.log.writers.mail.layoutusage" name="zend.log.writers.mail.layoutusage"><div class="info"><h1 class="title">Zend_Layout Verwendung</h1></div>
        

        <p class="para">
            Eine <span class="classname">Zend_Layout</span> Instanz kann verwendet werden um den
            <acronym class="acronym">HTML</acronym> Anteil einer Multipart Email zu erstellen. Wenn eine
            <span class="classname">Zend_Layout</span> Instanz in Verwendung ist, nimmt
            <span class="classname">Zend_Log_Writer_Mail</span> an das sie verwendet wird um
            <acronym class="acronym">HTML</acronym> darzustellen und setzt den Body <acronym class="acronym">HTML</acronym> für die
            Nachricht als den <span class="classname">Zend_Layout</span>-darstellenden Wert.
        </p>

        <p class="para">
            Wenn <span class="classname">Zend_Log_Writer_Mail</span> mit einer
            <span class="classname">Zend_Layout</span> Instanz verwendet wird, hat man die Option eine
            eigene Formatierung zu setzen indem die  <span class="methodname">setLayoutFormatter()</span>
            Methode verwendet wird. Wenn kein <span class="classname">Zend_Layout</span>-spezifischer
            formatierungs-Eintrag spezifiziert wurde, wird der aktuell in Verwendung befindliche
            Formatierer verwendet. Die vollständige Verwendung von
            <span class="classname">Zend_Layout</span> mit einem eigenen Formatierer wird anbei gezeigt.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mail</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">setFrom</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'errors@example.org'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addTo</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'project_developers@example.org'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Beachte das die Subjektzeile nicht auf der Zend_Mail</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Instanz gesetzt wird!</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Verwende eine einfache Zend_Layout Instanz mit seinen Standardwerten</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Layout<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Erstelle einen Formatierer der den Eintrag in ein Listitem Tag umhüllt</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layoutFormatter</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Formatter_Simple<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'&lt;li&gt;'</span> . Zend_Log_Formatter_Simple::<span style="color: #006600;">DEFAULT_FORMAT</span> . <span style="color: #ff0000;">'&lt;/li&gt;'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Mail<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mail</span>, <span style="color: #0000ff;">$layout</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Füge den Formatierer für die Einträge hinzu die mit Zend_Layout</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// dargestellt werden</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setLayoutFormatter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$layoutFormatter</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setSubjectPrependText</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Fehler im Skript foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">addFilter</span><span style="color: #66cc66;">&#40;</span>Zend_Log::<span style="color: #006600;">WARN</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">addWriter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Irgendetwas schlechtes hat stattgefunden!</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">error</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'unable to connect to database'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Wenn der Writer heruntergefahren wird, wird Zend_Mail::send()</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// getriggert um ein Email mit allen Logeinträgen zu senden die</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// auf oder über dem Filterlevel von Zend_Log liegen</span></div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.log.writers.mail.dynamicsubjectline" name="zend.log.writers.mail.dynamicsubjectline"><div class="info"><h1 class="title">Zusammenfassung der Fehlerlevel in der Subjektzeile</h1></div>
        

        <p class="para">
            Die  <span class="methodname">setSubjectPrependText()</span> Methode kann statt
             <span class="methodname">Zend_Mail::setSubject()</span> verwendet werden um die Subjektzeile
            dynamisch zu schreiben bevor die Email gesendet wird. Wenn, zum Beispiel,
            der dem Subjekt vorangestellte Text &quot;Fehler des Skriptes&quot; heißt, würde das Subjekt
            des Emails das von <span class="classname">Zend_Log_Writer_Mail</span> mit zwei Warnungen
            und fünf Fehlern erstellt wird &quot;Fehler des Skriptes (warn = 2; error = 5)&quot; sein.
            Wenn kein Subjekttext mit <span class="classname">Zend_Log_Writer_Mail</span> vorangestellt
            wird, wird die <span class="classname">Zend_Mail</span> Subjektzeile verwendet, wenn vorhanden.
        </p>
    </div>

    <div class="section" id="zend.log.writers.mail.caveats" name="zend.log.writers.mail.caveats"><div class="info"><h1 class="title">Vorbehalte</h1></div>
        

        <p class="para">
            Das Senden von Logeinträgen über Emails kann gefährlich sein. Wenn Fehlerzustände
            vom eigenen Skript falsch behandelt werden, oder man die Fehlerlevel falsch verwendet,
            kann man sich selbst in einer Situation finden in der man Hunderte oder Tausende von
            Emails zu den Empfängern sendet abhängig von der Frequenz der eigenen Fehler.
        </p>

        <p class="para">
            Bis dato bietet <span class="classname">Zend_Log_Writer_Mail</span> keinen Mechanismus für die
            Limitierung oder andernfalls die Dosierung der Nachrichten. Solche Funktionalitäten,
            können vom Konsumenten, wenn benötigt, selbst implementiert werden.
        </p>

        <p class="para">
            Nochmals, <span class="classname">Zend_Log_Writer_Mail</span>&#039;s primäres Ziel ist es proaktiv
            Menschen über Fehlerzustände zu benachrichtigen. Wenn diese Fehler zeitgerecht behandelt
            werden, und Sicherheitsmaßnahmen platziert werden um diese Vorbehalte in Zukunft zu
            verhindern, dann kann die Email-basierende Benachtichtigung von Fehlern ein
            nützliches Tool sein.
        </p>
    </div>
</div>
    <div class="section" id="zend.log.writers.syslog" name="zend.log.writers.syslog"><div class="info"><h1 class="title">In das Systemlog schreiben</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Log_Writer_Syslog</span> schreibt Logeinträge in das Systemlog
        (syslog). Intern werden <acronym class="acronym">PHP</acronym>&#039;s  <span class="methodname">openlog()</span>,
         <span class="methodname">closelog()</span>, und  <span class="methodname">syslog()</span> Funktionen
        aufgerufen.
    </p>

    <p class="para">
        Ein nützlicher Fall für <span class="classname">Zend_Log_Writer_Syslog</span> ist das
        zusammenführen von Logs von geclusterted Maschinen über die Funktionalität vom Systemlog.
        Viele Systeme erlauben das entfernte Loggen von Systemevents, das es Systemadministratoren
        erlaubt einen Cluster von Maschinen von einer einzelnen Logdatei aus zu monitoren.
    </p>

    <p class="para">
        Standardmäßig wird allen erzeugen Syslog Nachrichten der String &quot;Zend_Log&quot; vorangestellt.
        Man kann einen anderen &quot;application&quot; Namen spezifizieren durch den solche Logmeldungen
        identifiziert werden können, entweder durch die Angabe des Anwendungsnamens an den
        Constructor oder dem Accessor der Anwendung:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Bei der Instanziierung den &quot;application&quot; Schlüssel in den Optionen übergeben:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Syslog<span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'application'</span> =&gt; <span style="color: #ff0000;">'FooBar'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Zu jeder anderen Zeit:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setApplicationName</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'BarBaz'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Das Systemlog erlaubt es auch die &quot;facility&quot;, oder den Anwendungstyp zu identifizieren, der
        die Nachricht loggt; viele Systemlogger erzeugen in Wirklichkeit unterschiedliche
        Logdateien pro Facility, welche wiederum die Aktivitäten von Administratoren unterstützen
        die Server monitoren wollen.
    </p>

    <p class="para">
        Man kann die Log Facility entweder über den Constructor oder über einen Accessor
        spezifizieren. Das sollte eine der  <span class="methodname">openlog()</span> Konstanten sein die
        in der <a href="http://php.net/openlog" class="link external">&raquo; openlog() Dokumentations Seite</a>
        definiert sind.
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Bei der Instanziierung den &quot;facility&quot; Schlüssel in den Optionen übergeben:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Syslog<span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'facility'</span> =&gt; LOG_AUTH<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Zu jeder anderen Zeit:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setFacility</span><span style="color: #66cc66;">&#40;</span>LOG_USER<span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Beim Loggen kann man weiterhin die standardmäßigen <span class="classname">Zend_Log</span>
        Prioritäts Konstanten verwenden; intern entsprechen diese den Prioritäts Konstanten von
         <span class="methodname">syslog()</span>.
    </p>
</div>
    <div class="section" id="zend.log.writers.zendmonitor" name="zend.log.writers.zendmonitor"><div class="info"><h1 class="title">Auf den Zend Server Montior schreiben</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Log_Writer_ZendMonitor</span> erlaubt es Events über Zend Server&#039;s
        Monitor <acronym class="acronym">API</acronym> zu loggen. Das erlaubt es die Log Nachrichten für die
        Umgebung einer komplette Anwendung an einem einzelnen Ort zu sammeln. Intern verwendet es
        einfach die  <span class="methodname">monitor_custom_event()</span> Funktion der Zend Monitor
        <acronym class="acronym">API</acronym>.
    </p>

    <p class="para">
        Ein relativ nützlichen Feature der Monitor <acronym class="acronym">API</acronym> ist das Sie es erlaubt
        beliebige eigene Informationen zusammen mit der Log Nachricht zu spezifizieren. Wenn man zum
        Beispiel eine Exception loggen will, kann man nicht nur die Exception Nachricht loggen,
        sondern auch das komplette Exception Objekt an die Funktion übergeben, und das Objekt dann
        im Zend Server Event Monitor inspizieren.
    </p>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>Zend Monitor muss installiert und aktiviert sein</b><br /></span>
        

        
            Um diesen Log Writer zu verwenden muss Zend Monitor sowohl installiert als auch
            aktiviert sein. Trotzdem ist er so designt dass, wenn Zend Monitor nicht gefunden wurde,
            er einfach als <b><tt>NULL</tt></b> Logger agiert.
        <br />
    </p></blockquote>

    <p class="para">
        Die Instanzierung des <span class="classname">ZendMonitor</span> Log Writers ist trivial:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_ZendMonitor<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>&nbsp; &nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Dann können Nachrichten einfach wie gewohnt geloggt werden:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Das ist eine Nachricht'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Wenn man zusätzliche Informationen spezifizieren will, die mit dem Event geloggt werden
        sollen, können diese Informationen in einem zweiten Parameter übergeben werden:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Exception gefunden'</span>, <span style="color: #0000ff;">$e</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Der zweite Parameter kann ein Skalar, Objekt oder ein Array sein; wenn man mehrere Teile an
        Informationen übergeben will, ist der beste Weg diese als assoziatives Array zu übergeben.
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Exception gefunden'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'request'</span>&nbsp; &nbsp;=&gt; <span style="color: #0000ff;">$request</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'exception'</span> =&gt; <span style="color: #0000ff;">$e</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Im Zend Server wird das Event als &quot;eigenes Event&quot; (custom) geloggt. Vom &quot;Monitor&quot; Tab muss
        das &quot;Events&quot; Sub-Element ausgewählt werden und dann der Filter aus &quot;Custom&quot; um eigene Events
        zu sehen.
    </p>

    <p class="para">
        <div class="inlinemediaobject"><div class="imageobject"><a href="images/d481d625821a97b9a5eb2cec99dca50e-zend.log.writers.zendmonitor-events.png"><img src="images/d481d625821a97b9a5eb2cec99dca50e-zend.log.writers.zendmonitor-events.png" alt="zend.log.writers.zendmonitor-events.png" width="450" height="298" /></a></div></div>
    </p>

    <p class="para">
        Events im Dashboard von Zend Server&#039;s Monitor
    </p>

    <p class="para">
        In diesem Screenshot sind die ersten zwei angeführten Events eigene Events die über den
        <span class="classname">ZendMonitor</span> Log Writer geloggt wurden. Man kann anschließend auf ein
        Event klicken um alle Ihr zugehörigen Informationen zu sehen.
    </p>

    <p class="para">
        <div class="inlinemediaobject"><div class="imageobject"><a href="images/d481d625821a97b9a5eb2cec99dca50e-zend.log.writers.zendmonitor-event.png"><img src="images/d481d625821a97b9a5eb2cec99dca50e-zend.log.writers.zendmonitor-event.png" alt="zend.log.writers.zendmonitor-event.png" width="450" height="298" /></a></div></div>
    </p>

    <p class="para">
        Event Detail in Zend Server&#039;s Monitor
    </p>

    <p class="para">
        Wenn auf das Sub-Tab &quot;Custom&quot; geklickt wird, werden alle extra Informationen angezeigt die
        durch die Übergabe des zweiten Arguments an die Logging Methode geloggt wurden. Diese
        Informationen werden als <var class="varname">info</var> Unterschlüssel geloggt; man kann sehen das
        in diesem Beispiel das Request Objekt geloggt wurde.
    </p>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>Integration mit Zend_Application</b><br /></span>
        

        
            Standardmäßig fügen die Kommandos <strong class="command">zf.sh</strong> und <strong class="command">zf.bat</strong>
            die Konfguration für die <a href="zend.application.available-resources.html#zend.application.available-resources.log" class="link"><span class="classname">Zend_Application</span>
                Log Ressource</a> hinzu, welcher die Konfiguration für den
            <span class="classname">ZendMonitor</span> Log Writer enthält. Zusätzlich verwendet der
            <span class="classname">ErrorController</span> den konfigurierten Logger um Exceptions der
            Anwendung zu loggen -- und bietet deshalb standardmäßig die Integration für Events im
            Zend Monitor.
        <br />

        
            Wie vorher erwähnt fungiert der Logger, wenn die Monitor <acronym class="acronym">API</acronym> in der
            eigenen <acronym class="acronym">PHP</acronym> Anwendung nicht erkannt wurde, als
            <b><tt>NULL</tt></b> Logger.
        <br />
    </p></blockquote>
</div>

    <div class="section" id="zend.log.writers.null" name="zend.log.writers.null"><div class="info"><h1 class="title">Einen Writer abstumpfen</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Log_Writer_Null</span> ist ein Stumpf der keine Log Daten
            irgendwohin schreibt. Er ist nützlich um die Protokollierung auszuschalten oder wärend
            Tests abzustumpfen:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Null;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// geht nirgendwohin</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Informative Nachricht'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.log.writers.mock" name="zend.log.writers.mock"><div class="info"><h1 class="title">Mit der Attrappe testen</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Log_Writer_Mock</span> ist ein sehr einfacher Writer der die rohen
            Daten die er empfängt aufnimmt und in einem Array als öffentliche Eigenschaft zur
            Verfügung stellt.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mock</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Mock;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mock</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Informative Nachricht'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/var_dump"><span style="color: #000066;">var_dump</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mock</span>-&gt;<span style="color: #006600;">events</span><span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Array</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// (</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; &nbsp; [timestamp] =&gt; 2007-04-06T07:16:37-07:00</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; &nbsp; [message] =&gt; Informative Nachricht</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; &nbsp; [priority] =&gt; 6</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; &nbsp; [priorityName] =&gt; INFO</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// )</span></div></li></ol></div></div></div>


        <p class="para">
            Um die Events die von der Attrappe protokolliert wurden zu entfernen, muß einfach
            <strong class="command">$mock-&gt;events = array()</strong> gesetzt werden.
        </p>
    </div>

    <div class="section" id="zend.log.writers.compositing" name="zend.log.writers.compositing"><div class="info"><h1 class="title">Gemischte Writer</h1></div>
        

        <p class="para">
            Es gibt kein gemischtes Writer Objekt. Trotzdem kann eine Log Instanz in jede beliebige
            Anzahl von Writern schreiben. Um das zu tun, muß die
             <span class="methodname">addWriter()</span> Methode verwendet werden:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer1</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/path/to/first/logfile'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer2</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/path/to/second/logfile'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">addWriter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer1</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">addWriter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer2</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Geht zu beiden Writern</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Informative Nachricht'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.log.overview.html">&Uuml;bersicht</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.log.html">Zend_Log</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.log.formatters.html">Formatter</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.log.html">Zend_Log</a></li>
  <li><a href="zend.log.overview.html">&Uuml;bersicht</a></li>
  <li class="active"><a href="zend.log.writers.html">Writer</a></li>
  <li><a href="zend.log.formatters.html">Formatter</a></li>
  <li><a href="zend.log.filters.html">Filter</a></li>
  <li><a href="zend.log.factory.html">Die Factory verwenden um ein Log zu erstellen</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>