<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Indizierung - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="learning.lucene.index-opening.html">Indezes &ouml;ffnen und erstellen</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="learning.lucene.html">Getting Started with Zend_Search_Lucene</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="learning.lucene.searching.html">Suchen</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="learning.lucene.indexing" class="section"><div class="info"><h1 class="title">Indizierung</h1></div>
    

    <p class="para">
        Indizierung wird durch das Hinzufügen eines neuen Dokuments zu einem bestehenden oder neuen
        Index durchgeführt:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">addDocument</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$doc</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Es gibt zwei Wege Dokument Objekte zu erstellen. Der erste ist es manuell zu tun.
    </p>

    <div class="example"><div class="info"><p><b>Example #1 Manuelle Dokument Erstellung</b></p></div>
        

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Search_Lucene_Document<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span>-&gt;<span style="color: #006600;">addField</span><span style="color: #66cc66;">&#40;</span>Zend_Search_Lucene_Field::<span style="color: #006600;">Text</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'url'</span>, <span style="color: #0000ff;">$docUrl</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span>-&gt;<span style="color: #006600;">addField</span><span style="color: #66cc66;">&#40;</span>Zend_Search_Lucene_Field::<span style="color: #006600;">Text</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'title'</span>, <span style="color: #0000ff;">$docTitle</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span>-&gt;<span style="color: #006600;">addField</span><span style="color: #66cc66;">&#40;</span>Zend_Search_Lucene_Field::<span style="color: #006600;">unStored</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'contents'</span>, <span style="color: #0000ff;">$docBody</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span>-&gt;<span style="color: #006600;">addField</span><span style="color: #66cc66;">&#40;</span>Zend_Search_Lucene_Field::<span style="color: #006600;">binary</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'avatar'</span>, <span style="color: #0000ff;">$avatarData</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <p class="para">
        Die zweite Methode ist das Laden von <acronym class="acronym">HTML</acronym> oder von Microsoft Office 2007
        Dateien:
    </p>

    <div class="example"><div class="info"><p><b>Example #2 Laden vom Dokument</b></p></div>
        

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span> = Zend_Search_Lucene_Document_Html::<span style="color: #006600;">loadHTML</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$htmlString</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span> = Zend_Search_Lucene_Document_Docx::<span style="color: #006600;">loadDocxFile</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$path</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span> = Zend_Search_Lucene_Document_Pptx::<span style="color: #006600;">loadPptFile</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$path</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$doc</span> = Zend_Search_Lucene_Document_Xlsx::<span style="color: #006600;">loadXlsxFile</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$path</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <p class="para">
        Wenn ein Dokument von einem der unterstützten Formate geladen wird, kann es trotzdem noch
        manuell mit einem neuen benutzerdefinierten Feld erweitert werden.
    </p>

    <div class="section" id="learning.lucene.indexing.policy" name="learning.lucene.indexing.policy"><div class="info"><h1 class="title">Indizierungs Policy</h1></div>
        

        <p class="para">
            Man sollte eine Indizierungs Policy im Architektur Design der eigenen Anwendung
            definieren.
        </p>

        <p class="para">
            Man könnte eine auf-Wunsch Index Konfiguration benötigen (etwas wie ein
            <acronym class="acronym">OLTP</acronym> System). In solchen Systemen wird pro Benutzeranfrage
            normalerweise ein Dokument hinzugefügt. Daher beeinflusst die
            <em class="emphasis">MaxBufferedDocs</em> Option das System nicht. Auf der anderen Seite ist
            <em class="emphasis">MaxMergeDocs</em> wirklich nützlich da es erlaubt die maximale
            Ausführungszeit des Skripts zu begrenzen. <em class="emphasis">MergeFactor</em> sollte auf
            einen Wert gesetzt werden der die Balance zwischen der durchschnittlichen
            Indizierungszeit (sie beeinflusst auch die durchschnittliche automatische
            Optimierungszeit) und der Geschwindigkeit der Suche hält (Das Level der Index
            Optimierung ist abhängig von der Anzahl der Segmente).
        </p>

        <p class="para">
            Wenn man primär Batch Indexaktualisierungen durchführt sollte die eigene Konfiguration
            eine <em class="emphasis">MaxBufferedDocs</em> Option setzen welche auf den maximalen Wert
            gesetzt wird der vom vorhandenen Speicherplatz unterstützt wird.
            <em class="emphasis">MaxMergeDocs</em> und <em class="emphasis">MergeFactor</em> müssen auf Werte
            gesetzt werden welche die Einflussnahme durch automatische Optimierung so stark wie
            möglich reduziert <a href="#fnid1" name="fn1"><sup>[1]</sup></a>. Die komplette Indexoptimierung sollte nach der
            Indizierung durchgeführt werden.
        </p>

        <div class="example"><div class="info"><p><b>Example #3 Index Optimierung</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">optimize</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            In einigen Konfigurationen ist es effizienter Indexaktualisierungen zu serialisieren
            indem Updateanfragen in einer Queue organisiert werden und verschiedene Updateanfragen
            in einer einzelnen Skriptausführung bearbeitet werden. Das reduziert den Overhead des
            öffnens vom Index und erlaubt die Verwendung von Buffern für die Index Dokumente.
        </p>
    </div>
<div class="footnote"><a name="fnid1" href="#fn1"><sup>[1]</sup></a><span class="para footnote">Ein zusätzliches Limit sind die maximal vom
                Betriebssystem unterstützten Dateihandler für gleichzeitig geöffnete
                Operationen</span></div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="learning.lucene.index-opening.html">Indezes &ouml;ffnen und erstellen</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="learning.lucene.html">Getting Started with Zend_Search_Lucene</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="learning.lucene.searching.html">Suchen</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="learning.html">Learning Zend Framework</a></li>
  <li class="header up"><a href="learning.lucene.html">Getting Started with Zend_Search_Lucene</a></li>
  <li><a href="learning.lucene.intro.html">Einf&uuml;hrung in Zend_Search_Lucene</a></li>
  <li><a href="learning.lucene.index-structure.html">Lucene Index Struktur</a></li>
  <li><a href="learning.lucene.index-opening.html">Indezes &ouml;ffnen und erstellen</a></li>
  <li class="active"><a href="learning.lucene.indexing.html">Indizierung</a></li>
  <li><a href="learning.lucene.searching.html">Suchen</a></li>
  <li><a href="learning.lucene.queries.html">Unterst&uuml;tzte Abfragen</a></li>
  <li><a href="learning.lucene.pagination.html">Seitendarstellung von Suchergebnissen</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>