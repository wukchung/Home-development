<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_Db_Table Relationships - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.db.table.rowset.html">Zend_Db_Table_Rowset</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.db.html">Zend_Db</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.db.table.definition.html">Zend_Db_Table_Definition</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.db.table.relationships" class="section"><div class="info"><h1 class="title">Zend_Db_Table Relationships</h1></div>
    

    <div class="section" id="zend.db.table.relationships.introduction" name="zend.db.table.relationships.introduction"><div class="info"><h1 class="title">Einführung</h1></div>
        

        <p class="para">
            In einer relationalen Datenbank haben Tabellen Relationen zueinander. Eine Entität in
            einer Tabelle kann zu einer oder mehrerer Entitäten in einer anderen Tabelle, durch
            Verwendung von referentiellen Integritätsverknüpfungen die im Datenbank Schema
            definiert sind, verknüpft werden.
        </p>

        <p class="para">
            Die <span class="classname">Zend_Db_Table_Row</span> Klasse besitzt Methoden für die Abfrage von
            verknüpften Zeilen in anderen Tabellen.
        </p>
    </div>

    <div class="section" id="zend.db.table.relationships.defining" name="zend.db.table.relationships.defining"><div class="info"><h1 class="title">Verknüpfungen definieren</h1></div>
        

        <p class="para">
            Die Klassen für jede eigene Tabelle müssen durch das Erweitern der abstrakten Klasse
            <span class="classname">Zend_Db_Table_Abstract</span>, wie in <a href="zend.db.table.html#zend.db.table.defining" class="link">diesem Kapitel</a> beschrieben, definiert
            werden. Siehe auch in <a href="zend.db.adapter.html#zend.db.adapter.example-database" class="link">diesem
                Kapitel</a> für die Beschreibung einer Beispieldatenbank für welche der folgende
            Beispielcode designed wurde.
        </p>

        <p class="para">
            Anbei sind die <acronym class="acronym">PHP</acronym> Klassendefinitionen für diese Tabellen:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> Accounts <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_name</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #ff0000;">'accounts'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_dependentTables</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Bugs'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> Products <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_name</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #ff0000;">'products'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_dependentTables</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'BugsProducts'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> Bugs <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_name</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span style="color: #ff0000;">'bugs'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_dependentTables</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'BugsProducts'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_referenceMap</span>&nbsp; &nbsp; = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Reporter'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'reported_by'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Accounts'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'account_name'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Engineer'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'assigned_to'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Accounts'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'account_name'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Verifier'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'verified_by'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Accounts'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'account_name'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> BugsProducts <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_name</span> = <span style="color: #ff0000;">'bugs_products'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_referenceMap</span>&nbsp; &nbsp; = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Bug'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_id'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Bugs'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_id'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Product'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'product_id'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Products'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'product_id'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
            Wenn <span class="classname">Zend_Db_Table</span> verwendet wird um kaskadierende
            <b><tt>UPDATE</tt></b> und <b><tt>DELETE</tt></b> Operationen zu emulieren,
            muß das <var class="varname">$_dependentTables</var> Array in der Klasse für die Eltern-Tabelle
            definiert werden. Der Klassenname muß für jede abhängige Komponente aufgelistet werden.
            Hierbei muß der Klassenname und nicht der physikalische Name der <acronym class="acronym">SQL</acronym>
            Tabelle verwendet werden.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Die Deklaration von <var class="varname">$_dependentTables</var> sollte übergangen werden
                wenn referentielle Integritätsverknüpfungen im <acronym class="acronym">RDBMS</acronym> Server
                verwendet werden um kaskadierende Operationen zu implementieren. Siehe
                <a href="zend.db.table.relationships.html#zend.db.table.relationships.cascading" class="link">dieses Kapitel</a> für
                weitere Informationen.
            <br />
        </p></blockquote>

        <p class="para">
            Das <var class="varname">$_referenceMap</var> Array muß in der Klasse für jede abhängige
            Tabelle deklariert werden. Das ist ein assoziatives Array von Referenz-&quot;Regeln&quot;. Eine
            Referenzregel identifiziert welche Tabelle in der Relation die Elterntabelle ist, und
            listet auch welche Spalten in der abhängigen Tabelle welche Spalten in der
            Elterntabelle referenzieren.
        </p>

        <p class="para">
            Der Schlüssel der Regel ist ein String der als Index zum
            <var class="varname">$_referenceMap</var> Array verwendet wird. Dieser Regelschlüssel wird
            verwendet um jede Referenzen von Abhängigkeiten zu idenzifizieren. Es sollte ein
            sprechender Name für diesen Regelschlüssel ausgewählt werden. Deshalb ist es das beste
            einen String zu verwendet welcher Teil eines <acronym class="acronym">PHP</acronym> Methodennamens sein
            kann, wie man später sieht.
        </p>

        <p class="para">
            Im Beispiel <acronym class="acronym">PHP</acronym> Code von oben, sind die Regelschlüssel in der Bugs
            Tabelle folgende: <strong class="command">&#039;Reporter&#039;</strong>, <strong class="command">&#039;Engineer&#039;</strong>,
            <strong class="command">&#039;Verifier&#039;</strong>, und <strong class="command">&#039;Product&#039;</strong>.
        </p>

        <p class="para">
            Die Werte von jedem Regeleintrag im <var class="varname">$_referenceMap</var> Array sind auch
            ein assoziatives Array. Die Elemente dieses Regeleintrages werden im folgenden
            beschrieben:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <em class="emphasis">columns</em> =&gt; Ein String oder ein Array von
                    Strings welche die Namen der entfernten Schlüsselspalte der abhängigen Tabelle
                    benennen.
                </p>

                <p class="para">
                    Es ist üblich das dies eine einzelne Spalte ist, aber einige Tabellen haben
                    mehr-spaltige Schlüssel.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">refTableClass</em> =&gt; Der Klassenname der
                    Elterntabelle. Es sollte der Klassenname und nicht der physikalische Name der
                    <acronym class="acronym">SQL</acronym> Tabelle verwendet werden.
                </p>

                <p class="para">
                    Es ist für eine abhängige Tabelle üblich eine eigene Referenz zu Ihrer
                    Elterntabelle zu haben, aber einige Tabellen haben mehrfache Referenzen zu der
                    gleichen Elterntabelle. In der Beispieldatenbank gibt es eine Referenz von der
                    <strong class="command">bugs</strong> Tabelle zu der <strong class="command">products</strong> Tabelle, aber
                    drei Referenzen von der <strong class="command">bugs</strong> Tabelle zur
                    <strong class="command">accounts</strong> Tabelle. Jede Referenz sollte in einen separaten
                    Eintrag im <var class="varname">$_referenceMap</var> Array gegeben werden.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">refColumns</em> =&gt; Ein String oder ein Array von
                    Strings die den Spaltennamen des primären Schlüssels in der Elterntabelle
                    benennen.
                </p>

                <p class="para">
                    Es ist üblich das dies eine einzelne Spalte ist, aber einige Tabellen haben
                    mehr-spaltige Schlüssel. Wenn die Referenz einen mehr-spaltigen Schlüssel
                    verwendet, muß die Reihenfolge der Spalten im <strong class="command">&#039;columns&#039;</strong>
                    Eintrag der Reihenfolge der Spalten im <strong class="command">&#039;refColumns&#039;</strong> Eintrag
                    entsprechen.
                </p>

                <p class="para">
                    Dieses Element kann optional spezifiziert werden. Wenn
                    <span class="property">refColumns</span> nicht spezifiziert wird, werden standardmäßig
                    die Spalten verwendet, die als primäre Schlüsselspalten in der Elterntabelle
                    bekannt sind.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">onDelete</em> =&gt; Eine Regel für eine Aktion die
                    ausgeführt wird wenn eine Zeile in der Elterntabelle gelöscht wird. Siehe auch
                    <a href="zend.db.table.relationships.html#zend.db.table.relationships.cascading" class="link">dieses Kapitel</a> für
                    weitere Informationen.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">onUpdate</em> =&gt; Eine Regel für eine Aktion die
                    ausgeführt wird wenn Werte in der primären Schlüsselspalte der Elterntabelle
                    aktualisiert werden. Siehe auch
                    <a href="zend.db.table.relationships.html#zend.db.table.relationships.cascading" class="link">dieses Kapitel</a> für
                    weitere Informationen.
                </p>
            </li>
        </ul>
    </div>

    <div class="section" id="zend.db.table.relationships.fetching.dependent" name="zend.db.table.relationships.fetching.dependent"><div class="info"><h1 class="title">Eine abhängige Zeile holen</h1></div>
        

        <p class="para">
            Wenn man ein Zeilen Objekt als Ergebnis einer Abfrage auf einer Elterntabelle hat,
            können Zeilen der abhängigen Tabellen geholt werden, welche die aktuelle Zeile
            referenzieren. Hierbei kann die folgende Methode verwendet werden:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$row</span>-&gt;<span style="color: #006600;">findDependentRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$table</span>, <span style="color: #66cc66;">&#91;</span><span style="color: #0000ff;">$rule</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Diese Methode gibt ein <span class="classname">Zend_Db_Table_Rowset_Abstract</span> Objekt
            zurück, welche ein Set von Zeilen der abhängigen Tabelle <var class="varname">$table</var>
            enthält die die Zeile referenzieren die durch das <var class="varname">$row</var> Objekt
            identifiziert werden.
        </p>

        <p class="para">
            Das erste Argument <var class="varname">$table</var> kann ein String sein, der die abhängige
            Tabelle durch Ihren Klassennamen spezifiziert. Man kann die abhängige Tabelle auch durch
            Verwendung eines Objekts dieser Tabellenklasse spezifizieren.
        </p>

        <div class="example"><div class="info"><p><b>Example #1 Eine abhängige Zeile holen</b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wie man ein Zeilenobjekt von der Tabelle
                <strong class="command">Accounts</strong> erhält und die <strong class="command">Bugs</strong> findet die durch
                diesen Account mitgeteilt wurden.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Accounts<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsRowset</span> = <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$user1234</span> = <span style="color: #0000ff;">$accountsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsReportedByUser</span> = <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findDependentRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Bugs'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Das zweite Argument <var class="varname">$rule</var> ist optional. Es ist ein String der den
            Regelschlüssel im <var class="varname">$_referenceMap</var> Array der abhängigen Tebellenklasse
            benennt. Wenn keine Regel spezifiziert wird, wird die erste Regel im Array verwendet
            welche die Elterntabelle referenziert. Wenn eine andere Regel als die erste verwendet
            werden soll, muß der Schlüssel spezifiziert werden.
        </p>

        <p class="para">
            Im obigen Beispiel wird der Regelschlüssel nicht spezifiziert, sodas standardmäßig die
            Regel verwendet wird die als erste der Elterntabelle entspricht. Das ist die Regel
            <strong class="command">&#039;Reporter&#039;</strong>.
        </p>

        <div class="example"><div class="info"><p><b>Example #2 Eine anhängige Zeile durch eine spezifische Regel erhalten</b></p></div>
            

            <div class="example-contents"><p>
                Das Beispiel zeigt wie ein Zeilenobjekt von der <strong class="command">Accounts</strong> Tabelle
                erhalten werden kann, und die zugeordneten <strong class="command">Bugs</strong> die vom Benutzer
                dieses Accounts bereits gefixed wurden, gefunden werden können. Der String des
                Regelschlüssels der zu dieser Referenziellen Abhängigkeit in dem Beispiel
                korrespondiert ist <strong class="command">&#039;Engineer&#039;</strong>.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Accounts<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsRowset</span> = <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$user1234</span> = <span style="color: #0000ff;">$accountsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsAssignedToUser</span> = <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findDependentRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Bugs'</span>, <span style="color: #ff0000;">'Engineer'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Es können auch Kriterien, Sortierungen und Limits zur Relation hinzugefügt werden indem
            das Select Objekt der Elternzeilen verwendet wird.
        </p>

        <div class="example"><div class="info"><p><b>Example #3 
                Ein anhängiges Zeilenset erhalten indem Zend_Db_Table_Select verwendet wird
            </b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wir ein Zeilenobjekt von der Tabelle
                <strong class="command">Accounts</strong> empfangen werden kann, und die zugeordneten
                <strong class="command">Bugs</strong> die vom Benutzer dieses Zugangs zu beheben sind, gefunden
                werden können, beschränkt auf 3 Zeilen und nach Name sortiert.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Accounts<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsRowset</span> = <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$user1234</span> = <span style="color: #0000ff;">$accountsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$select</span> = <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">select</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>-&gt;<span style="color: #006600;">order</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'name ASC'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;<span style="color: #006600;">limit</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsAssignedToUser</span> = <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findDependentRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Bugs'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'Engineer'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">$select</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Alternativ können Zeilen von einer abhängigen Tabelle abgefragt werden indem ein
            spezieller Mechanismus verwendet wird der &quot;magische Methode&quot; genannt wird.
            <span class="classname">Zend_Db_Table_Row_Abstract</span> ruft die Methode:
             <span class="methodname">findDependentRowset(&#039;&lt;TabellenKlasse&gt;&#039;, &#039;&lt;Regel&gt;&#039;)</span>
            auf wenn eine Methode am Zeilenobjekt aufgerufen wird die einem der folgenden Patterns
            entspricht:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <strong class="command">$row-&gt;find&lt;TabellenKlasse&gt;()</strong>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <strong class="command">$row-&gt;find&lt;TabellenKlasse&gt;By&lt;Regel&gt;()</strong>
                </p>
            </li>
        </ul>

        <p class="para">
            In den obigen Patterns, sind <strong class="command">&lt;TabellenKlasse&gt;</strong> und
            <strong class="command">&lt;Regel&gt;</strong> Strings die mit dem Klassennamen der abhängigen Tabelle
            korrespondieren, und der Regelschlüssel der abhängigen Tabelle der die Enterntabelle
            referenziert.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Einige Applikationsframeworks, wie Ruby on Rails, verwenden einen Mechanismus der
                &quot;inflection&quot; genannt wird um die Änderung der Schreibweise von Identifizierern
                abhängig von der Verwendung zu erlauben. Der Einfachheit halber, bietet
                <span class="classname">Zend_Db_Table_Row</span> keinen Inflection Mechanismus an. Die
                Identität der Tabelle und der Regelschlüssel die im Methodenaufruf genannt werden
                müssen der Schreibweise der Klasse und des Regelschlüssels exakt entsprechen.
            <br />
        </p></blockquote>

        <div class="example"><div class="info"><p><b>Example #4 Holen von abhängigen Zeilen durch Verwendung der magischen Methode</b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wie abhängige Zeilen gefunden werden, entsprechend des
                vorherigen Beispiel. In diesem Fall, verwendet die Anwendung den magischen
                Methodenaufruf anstatt die Tabelle und Regel als String zu spezifizieren.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Accounts<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$accountsRowset</span> = <span style="color: #0000ff;">$accountsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$user1234</span> = <span style="color: #0000ff;">$accountsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Verwendung der standard Referenzregel</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsReportedBy</span> = <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findBugs</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Eine Referenzregel spezifizieren</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsAssignedTo</span> = <span style="color: #0000ff;">$user1234</span>-&gt;<span style="color: #006600;">findBugsByEngineer</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.db.table.relationships.fetching.parent" name="zend.db.table.relationships.fetching.parent"><div class="info"><h1 class="title">Eine Elternzeile holen</h1></div>
        

        <p class="para">
            Wenn man ein Zeilenobjekt als Ergebnis einer Abfrage auf eine abhängige Tabelle hat,
            kann man die Zeile vom Elternteil zu der die abhängige Zeile referenziert holen.
            Hierbei verwendet man die Methode:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$row</span>-&gt;<span style="color: #006600;">findParentRow</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$table</span>, <span style="color: #66cc66;">&#91;</span><span style="color: #0000ff;">$rule</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Es sollte immer exakt eine Zeile in der Elterntabelle durch eine abhängige Zeile
            referenziert sein, deshalb gibt diese Methode ein Zeilen Objekt und kein Zeilenset
            Objekt zurück.
        </p>

        <p class="para">
            Das erste Argument <var class="varname">$table</var> kann ein String sein der die Elterntabelle
            durch Ihren Klassennamen spezifiziert. Man kann die Elterntabelle auch durch Verwendung
            eines Objektes dieser Tabellenklasse spezifizieren.
        </p>

        <div class="example"><div class="info"><p><b>Example #5 Eine Elternzeile holen</b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wie ein Zeilen Objekt von der Tabelle <strong class="command">Bugs</strong>
                geholt werden kann (zum Beispiel einer dieser Fehler mit Status &#039;NEW&#039;), und die
                Zeile in der <strong class="command">Accounts</strong> Tabelle für diesen Benutzer, der den Fehler
                gemeldet hat, gefunden werden kann.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span> = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">fetchAll</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_status = ?'</span> =&gt; <span style="color: #ff0000;">'NEW'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1</span> = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$reporter</span> = <span style="color: #0000ff;">$bug1</span>-&gt;<span style="color: #006600;">findParentRow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Accounts'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Das zweite Argument <var class="varname">$rule</var> ist optional. Es ist ein Strung der den
            Regelschlüssel im <var class="varname">$_referenceMap</var> Array der abhängigen Tabellenklasse
            benennt. Wenn diese Regel nicht spezifiziert wird, wird die erste Regel im Array
            genommen das die Elterntabelle referenziert. Wenn eine andere Regel als der erste
            genommen werden muß, dann muß der Schlüssel spezifiziert werden.
        </p>

        <p class="para">
            Im obigen Beispiel wird der Regelschlüssel nicht spezifiziert, sodas standardmäßig die
            Regel verwendet wird die als erste der Elterntabelle entspricht. Das ist die Regel
            <strong class="command">&#039;Reporter&#039;</strong>.
        </p>

        <div class="example"><div class="info"><p><b>Example #6 Eine Elternzeile durch eine spezifizierte Regel holen</b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wie ein Zeilenobjekt von der Tabelle <strong class="command">Bugs</strong>
                geholt werden kann, und der Account für den Ingenieur der zugeordnet wurde, diesen
                Fehler zu beheben, gefunden werden kann. Der Regelschlüssel der in diesem Beispiel
                der referenzierten Abhängigkeit entspricht ist <strong class="command">&#039;Engineer&#039;</strong>.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span> = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">fetchAll</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_status = ?'</span>, <span style="color: #ff0000;">'NEW'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1</span> = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$engineer</span> = <span style="color: #0000ff;">$bug1</span>-&gt;<span style="color: #006600;">findParentRow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Accounts'</span>, <span style="color: #ff0000;">'Engineer'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Alternativ, können Zeilen von der Elterntabelle abgefragt werden indem eine
            &quot;magische Methode&quot; verwendet wird. <span class="classname">Zend_Db_Table_Row_Abstract</span>
            ruft die Methode:
             <span class="methodname">findParentRow(&#039;&lt;TableClass&gt;&#039;, &#039;&lt;Rule&gt;&#039;)</span> auf
            wenn eine Methode auf dem Zeilenobjekt aufgerufen wird die einer der folgenden Pattern
            entspricht:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <strong class="command">$row-&gt;findParent&lt;TabellenKlasse&gt;([Zend_Db_Table_Select
                        $select])</strong>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <strong class="command">$row-&gt;findParent&lt;TabellenKlasse&gt;By&lt;Regel&gt;(
                        [Zend_Db_Table_Select $select])</strong>
                </p>
            </li>
        </ul>

        <p class="para">
            In den obigen Pattern sind, <strong class="command">&lt;TabellenKlasse&gt;</strong> und
            <strong class="command">&lt;Regel&gt;</strong> Strings die dem Klassennamen der Elterntabelle
            entsprechen, und der Regelname der abhängigen Tabelle der die Elterntabelle
            referenziert.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Die Identität der Tabelle und des Regelschlüssels die im Aufruf der Methode genannt
                werden, müssen der Schreibweise der Klasse und des Regelschlüssels exakt
                entsprechen.
            <br />
        </p></blockquote>

        <div class="example"><div class="info"><p><b>Example #7 Die Elternzeile durch verwenden der magischen Methode holen</b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wie Elternzeilen gefunden werden, ähnlich dem vorherigen
                Beispiel. In diesem Fall verwendet die Anwendung den Aufruf der magischen Methode
                statt der Spezifizierung von Tabelle und Regel als Strings.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span> = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">fetchAll</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bug_status = ?'</span>, <span style="color: #ff0000;">'NEW'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1</span> = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Verwenden der standardmäßigen Referenzregel</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$reporter</span> = <span style="color: #0000ff;">$bug1</span>-&gt;<span style="color: #006600;">findParentAccounts</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Die Referenzregel spezifizieren</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$engineer</span> = <span style="color: #0000ff;">$bug1</span>-&gt;<span style="color: #006600;">findParentAccountsByEngineer</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.db.table.relationships.fetching.many-to-many" name="zend.db.table.relationships.fetching.many-to-many"><div class="info"><h1 class="title">Ein Zeilenset über eine Viele-zu-Viele Verknüpfung holen</h1></div>
        

        <p class="para">
            Wenn man ein Zeilenobjekt als Ergebnis einer Abfrage auf eine Tabelle in einer
            Viele-Zu-Viele Verknüpfung hat (für die Zwecke dieses Beispiels, nennen wir das die
            &quot;Original&quot; Tabelle), können entsprechende Zeilen in der anderen Tabelle (nennen wir das
            die &quot;Ziel&quot; Tabelle) über eine Verknüpfungstabelle geholt werden. Hierbei wird die
            folgende Methode verwendet:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$row</span>-&gt;<span style="color: #006600;">findManyToManyRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$table</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">$intersectionTable</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#91;</span><span style="color: #0000ff;">$rule1</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#91;</span><span style="color: #0000ff;">$rule2</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#91;</span>Zend_Db_Table_Select <span style="color: #0000ff;">$select</span><span style="color: #66cc66;">&#93;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#93;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Diese Methode gibt ein <span class="classname">Zend_Db_Table_Rowset_Abstract</span> zurück
            welches Zeilen von der Tabelle <var class="varname">$table</var> enthält, und der Viele-Zu-Viele
            Abhängigkeit entspricht. Das aktuelle Zeilenobjekt <var class="varname">$row</var> von der
            originalen Tabelle wird verwendet um Zeilen in der Verknüpfungstabelle zu finden, und es
            ist mit der Zieltabelle verbunden.
        </p>

        <p class="para">
            Das erste Argument <var class="varname">$table</var> kann ein String sein der die Zieltabelle in
            der Viele-Zu-Viele Verknüpfung durch seinen Klassennamen spezifiziert. Es kann auch die
            Zieltabelle durch Verwendung eines Objekts dieser Tabellenklasse spezifiziert werden.
        </p>

        <p class="para">
            Das zweite Argument <var class="varname">$intersectionTable</var> kann ein String sein, der die
            Verknüpfungstabelle zwischen diesen zwei Tabellen in der Viele-Zu-Viele Verknüpfung,
            durch seinen Klassennamen, spezifiziert. Die Verknüpfungstabelle kann auch durch
            Verwendung eines Objektes dieser Tabellenklasse spezifiziert werden.
        </p>

        <div class="example"><div class="info"><p><b>Example #8 Ein Zeilenset mit einer Viele-Zu-Viele Methode holen</b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wie man ein Zeilenobjekt von der Originaltabelle
                <strong class="command">Bugs</strong> erhält, und wie Zeilen von der Zieltabelle
                <strong class="command">Products</strong> gefunden werden können die Produkte repräsentieren
                welche diesem Bug zugeordnet sind.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span> = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1234</span> = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$productsRowset</span> = <span style="color: #0000ff;">$bug1234</span>-&gt;<span style="color: #006600;">findManyToManyRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Products'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'BugsProducts'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Das dritte und vierte Argument <var class="varname">$rule1</var> und <var class="varname">$rule2</var>
            sind optional. Das sind Strings die den Regelschlüssel im
            <var class="varname">$_referenceMap</var> Array der verknüpfungstabelle benennen.
        </p>

        <p class="para">
            Der <var class="varname">$rule1</var> Schlüssel benennt die Regel für die Verknüpfung der
            Verknüpfungstabelle zur Originaltabelle. In diesem Beispiel ist das die verknüpfung von
            <strong class="command">BugsProducts</strong> zu <strong class="command">Bugs</strong>.
        </p>

        <p class="para">
            Der <var class="varname">$rule2</var> Schlüssel benennt die Regel für die Verknüpfung der
            Verknüpfungstabelle zur Zieltabelle. In diesem Beispiel ist der die Verknüpfung von
            <strong class="command">Bugs</strong> zu <strong class="command">Products</strong>.
        </p>

        <p class="para">
            Ähnlich den Methoden für das finden von Eltern- und abhängigen Zeilen verwendet die
            Methode, wenn keine Regel spezifiziert wird, die erste Regel im
            <var class="varname">$_referenceMap</var> Array das den Tabellen in der Verknüpfung entspricht.
            Wenn eine andere Regel als die erste verwendet werden soll, muß der Schlüssel
            spezifiziert werden.
        </p>

        <p class="para">
            Im obigen Beispiel wird der Regelschlüssel nicht spezifiziert, sodas standardmäßig die
            ersten passenden Regeln verwendet werden. In diesem Fall ist <var class="varname">$rule1</var>
            <strong class="command">&#039;Reporter&#039;</strong> und <var class="varname">$rule2</var> ist
            <strong class="command">&#039;Product&#039;</strong>.
        </p>

        <div class="example"><div class="info"><p><b>Example #9 
                Ein Zeilenset mit einer Viele-Zu-Viele Methode durch eine spezielle Regel holen
            </b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wie man ein Zeilenobjekt von der Originaltabelle
                <strong class="command">Bugs</strong> erhält, und Zeilen von der Zieltabelle
                <strong class="command">Products</strong> findet die Produkte repräsentieren die dem Fehler
                zugeordnet sind.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span> = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1234</span> = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$productsRowset</span> = <span style="color: #0000ff;">$bug1234</span>-&gt;<span style="color: #006600;">findManyToManyRowset</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Products'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'BugsProducts'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'Bug'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Alternativ können Zeilen von der Zieltabelle in einer Viele-Zu-Viele Verknüpfung
            abgefragt werden inden eine &quot;magische Methode&quot; verwendet wird.
            <span class="classname">Zend_Db_Table_Row_Abstract</span> ruft die Methode:
            <strong class="command">findManyToManyRowset(&#039;&lt;TabellenKlasse&gt;&#039;,
                &#039;&lt;VerknüpfungTabellenKlasse&gt;&#039;, &#039;&lt;Regel1&gt;&#039;, &#039;&lt;Regel2&gt;&#039;)</strong>
            auf, wenn eine Methode aufgerufen wird die einem der folgenden Pattern entspricht:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <strong class="command">$row-&gt;find&lt;TabellenKlasse&gt;Via&lt;VerknüpfungsTabellenKlasse&gt;
                        ([Zend_Db_Table_Select $select])</strong>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <strong class="command">$row-&gt;find&lt;TabellenKlasse&gt;Via&lt;VerknüpfungsTabellenKlasse&gt;By&lt;Regel1&gt;
                        ([Zend_Db_Table_Select $select])</strong>
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <strong class="command">$row-&gt;find&lt;TabellenKlasse&gt;Via&lt;VerknüpfungsTabellenKlasse&gt;By&lt;Regel1&gt;And&lt;Regel2&gt;
                        ([Zend_Db_Table_Select $select])</strong>
                </p>
            </li>
        </ul>

        <p class="para">
            In den oben gezeigten Pattern sind <strong class="command">&lt;TabellenKlasse&gt;</strong> und
            <strong class="command">&lt;VerknüpfungsTabellenKlasse&gt;</strong> Strings die den Klassennamen der
            Zieltabelle und der Verknüpfungstabelle entsprechen. <strong class="command">&lt;Regel1&gt;</strong>
            und <strong class="command">&lt;Regel2&gt;</strong> sind Strings die den Regelschlüssel in der
            Verknüpfungstabelle entsprechen, welche die Originaltabelle und die Zieltabelle
            referenzieren.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Die Tabelleneinheiten und die Regelschlüssel die in der aufgerufenen Methode
                benannt werden, müssen exakt der Schreibweise der Klasse und des Regelschlüssels
                entsprechen.
            <br />
        </p></blockquote>

        <div class="example"><div class="info"><p><b>Example #10 Zeilensets durch Verwendung der magischen Viele-Zu-Viele Methode holen</b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt wie Zeilen in der Zieltabelle einer Viele-Zu-Viele
                Verknüpfung gefunden werden können, in der Produkte die einen Bezug zu einem
                angegebenen Fehler haben, entsprechen.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Bugs<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bugsRowset</span> = <span style="color: #0000ff;">$bugsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$bug1234</span> = <span style="color: #0000ff;">$bugsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Verwendung der standardmäßigen Referenzregel</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$products</span> = <span style="color: #0000ff;">$bug1234</span>-&gt;<span style="color: #006600;">findProductsViaBugsProducts</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Spezifizieren der Referenzregel</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$products</span> = <span style="color: #0000ff;">$bug1234</span>-&gt;<span style="color: #006600;">findProductsViaBugsProductsByBug</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.db.table.relationships.cascading" name="zend.db.table.relationships.cascading"><div class="info"><h1 class="title">Schreiboperationen kaskadieren</h1></div>
        

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Deklarieren von DRI in der Datenbank:</b><br /></span>
            

            
                Die Deklaration von kaskadierenden Operationen in
                <span class="classname">Zend_Db_Table</span> <em class="emphasis">nur</em> für
                <acronym class="acronym">RDBMS</acronym> Marken gedacht die keine deklarative referentielle
                Integrität unterstützen (<acronym class="acronym">DRI</acronym>).
            <br />

            
                Zum Beispiel, bei der Verwendung von MySQL&#039;s MyISAM Speicherengine oder SQLite.
                Diese Lösungen unterstützen kein <acronym class="acronym">DRI</acronym>. Hierbei ist es hilfreich
                die kaskadierenden Operationen mit <span class="classname">Zend_Db_Table</span> zu
                deklarieren.
            <br />

            
                Wenn die eigene <acronym class="acronym">RDBMS</acronym> <acronym class="acronym">DRI</acronym> implementiert sowie
                die ON <b><tt>DELETE</tt></b> und ON <b><tt>UPDATE</tt></b> Klauseln,
                sollten diese Klauseln im eigenen Datenbank Schema deklariert werden, anstatt das
                kaskadierende Feature von <span class="classname">Zend_Db_Table</span> zu verwenden. Die
                Deklaration von <acronym class="acronym">DRI</acronym> Regeln in der <acronym class="acronym">RDBMS</acronym> ist
                besser für die Geschwindigkeit der Datenbank, Konsistenz und Integrität.
            <br />

            
                Am wichtigsten ist aber das die kaskadierenden Operationen nicht in beiden, der
                <acronym class="acronym">RDBMS</acronym> und der eigenen <span class="classname">Zend_Db_Table</span>
                Klasse deklariert werden.
            <br />
        </p></blockquote>

        <p class="para">
            Kaskadierende Operationen können deklariert werden um anhand einer abhängigen Tabelle
            ausgeführt zu werden wenn ein <b><tt>UPDATE</tt></b> oder ein
            <b><tt>DELETE</tt></b> an einer Zeile in einer Elterntabelle ausgeführt wird.
        </p>

        <div class="example"><div class="info"><p><b>Example #11 Beispiel für ein kaskadierendes Löschen</b></p></div>
            

            <div class="example-contents"><p>
                Dieses Beispiel zeigt das Löschen einer Zeile in der <strong class="command">Products</strong>
                Tabelle, welche konfiguriert ist um automatisch abhängige Zeilen in der
                <strong class="command">Bugs</strong> Tabelle zu löschen.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$productsTable</span> = <span style="color: #000000; font-weight: bold;">new</span> Products<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$productsRowset</span> = <span style="color: #0000ff;">$productsTable</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1234</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$product1234</span> = <span style="color: #0000ff;">$productsRowset</span>-&gt;<span style="color: #006600;">current</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$product1234</span>-&gt;<span style="color: #006600;">delete</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Kaskadiert automatisch zur Bugs Tabelle und löscht abhängige Zeilen.</span></div></li></ol></div></div></div>

        </div>

        <p class="para">
            Genauso kann es gewünscht sein, wenn man ein <b><tt>UPDATE</tt></b> verwendet um
            den Wert eines primären Schlüssels in einer Elterntabelle zu verändern, das sich auch
            den Wert im entfernten Schlüssel der abhängigen Tabellen automatisch von selbst
            aktualisiert um dem neuen Wert zu entsprechen, sodas solche Referenzen aktuel gehalten
            werden.
        </p>

        <p class="para">
            Normalerweise ist es nicht notwendig die Werte eines primären Schlüssels, der durch
            eine Sequenz von anderen Mechanismen erstellt wurde, zu aktualisieren. Aber wenn man
            einen <em class="emphasis">natürlichen Schlüssel</em> verwendet, der den Wert plötzlich
            ändert, ist es besser kaskadierende Aktualisierungen auf abhängigen Tabellen
            durchzuführen.
        </p>

        <p class="para">
            Um eine kaskadierende Abhängigkeit in <span class="classname">Zend_Db_Table</span> zu
            deklarieren, müssen die Regeln in <var class="varname">$_referenceMap</var> bearbeitet werden.
            Die assoziativen Arrayschlüssel <strong class="command">&#039;onDelete&#039;</strong> und
            <strong class="command">&#039;onUpdate&#039;</strong> müssen auf den String &#039;cascade&#039; (oder die Konstante
            <b><tt>self::CASCADE</tt></b>) gesetzt werden. Bevor eine Zeile von der
            Elterntabelle gelöscht wird oder dessen Wert des primären Schlüssels aktualisiert wird,
            werden alle Zeilen in der abhängigen Tabelle, welche die Eltern-Zeilen referenzieren,
            zuerst gelöscht oder aktualisiert.
        </p>

        <div class="example"><div class="info"><p><b>Example #12 Beispieldeklaration einer kaskadierenden Operation</b></p></div>
            

            <div class="example-contents"><p>
                Im unten angeführten Beispiel, werden die Zeilen in der <strong class="command">Bugs</strong>
                Tabelle automatisch gelöscht wenn eine Zeile in der <strong class="command">Products</strong>
                Tabelle zu der Sie referenzieren gelöscht wird. Das <strong class="command">&#039;onDelete&#039;</strong>
                Element des Referenzplan Eintrages wird auf <b><tt>self::CASCADE</tt></b>
                gesetzt.
            </p></div>

            <div class="example-contents"><p>
                Es wird in diesem Beispiel keine kaskadierende Aktualisierung durchgeführt wenn der
                primäre Schlüsselwert in der Elternklasse verändert wird. Das
                <strong class="command">&#039;onUpdate&#039;</strong> Element des Referenzplan Eintrages ist
                <b><tt>self::RESTRICT</tt></b>. Das gleiche Ergebnis erhält man durch
                Unterdrückung des <strong class="command">&#039;onUpdate&#039;</strong> Eintrages.
            </p></div>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> BugsProducts <span style="color: #000000; font-weight: bold;">extends</span> Zend_Db_Table_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; ...</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; protected <span style="color: #0000ff;">$_referenceMap</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Product'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'columns'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'product_id'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refTableClass'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Products'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'refColumns'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'product_id'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'onDelete'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; self::<span style="color: #006600;">CASCADE</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'onUpdate'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; self::<span style="color: #006600;">RESTRICT</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; ...</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

        </div>

        <div class="section" id="zend.db.table.relationships.cascading.notes" name="zend.db.table.relationships.cascading.notes"><div class="info"><h1 class="title">Notizen betreffend kaskadierenden Operationen</h1></div>
            

            <p class="para">
                <em class="emphasis">Kaskadierende Operationen die durch <span class="classname">Zend_Db_Table</span>
                aufgerufen werden sind nicht atomar.</em>
            </p>

            <p class="para">
                Das bedeutet, das wenn die eigene Datenbank referentielle integrative Verknüpfungen
                implementiert und erzwingt, ein kaskadierends <b><tt>UPDATE</tt></b> das durch
                eine <span class="classname">Zend_Db_Table</span> Klasse ausgeführt wird mit der Verknüpfung
                kollidiert, und in einem referentiellen integrativen Verstoß mündet. Ein
                kaskadierendes <b><tt>UPDATE</tt></b> kann in
                <span class="classname">Zend_Db_Table</span> <em class="emphasis">nur</em> dann verwendet werden
                wenn die eigene Datenbank die referentielle integrative Verknüpfung nicht erzwingt.
            </p>

            <p class="para">
                Ein kaskadierendes <b><tt>DELETE</tt></b> erleidet weniger durch das Problem
                des referentiellen integrativen Verstoßes. Abhängige Zeilen können genauso gelöscht
                werden wie durch eine nicht-atomare Aktion bevor die Elternzeile welche diese
                referenziert gelöscht wird.
            </p>

            <p class="para">
                Trotzdem, für beide <b><tt>UPDATE</tt></b> und <b><tt>DELETE</tt></b>,
                erzeugt die Änderung der Datenbank in einem nicht-atomaren Weg auch das Risiko das
                ein anderer Datenbankbenutzer die Daten in einem inkonsistenten Status sieht. Wenn,
                zum Beispiel, eine Zeile und alle Ihre abhängigen Zeilen, gelöscht werden, gibt es
                eine kleine Chance das ein anderes Datenbank Clientprogramm die Datenbank abfragen
                kann nachdem die abhängigen Zeilen gelöscht wurden, aber bevor die Elternzeilen
                gelöscht wurden. Dieses Clientprogramm kann die Elternzeilen ohne abhängige Zeilen
                sehen, und diese als gewünschten Status der Daten annehmen. Es gibt keinen Weg für
                diesen Clienten herauszufinden das die Abfrage der Datenbank mitten wärend einer
                Änderung gelesen wurde.
            </p>

            <p class="para">
                Der Fall von nicht-atomaren Änderungen kann durch die Verwendung von Transaktionen
                entschärft werden indem die Änderungen isoliert werden. Aber einige
                <acronym class="acronym">RDBMS</acronym> Marken unterstützen keine Transaktionen, oder erlauben dem
                Clienten &quot;schmutzige&quot; Änderungen zu lesen die noch nicht fertiggestellt wurden.
            </p>

            <p class="para">
                <em class="emphasis">Kaskadierende Operationen in <span class="classname">Zend_Db_Table</span> werden
                nur durch <span class="classname">Zend_Db_Table</span> aufgerufen.</em>
            </p>

            <p class="para">
                Kaskadierendes Löschen und Aktualisieren welches in den eigenen
                <span class="classname">Zend_Db_Table</span> Klassen definiert wurde werden ausgeführt wenn
                die  <span class="methodname">save()</span> oder  <span class="methodname">delete()</span> Methoden
                der Zeilenklasse ausgeführt werden. Trotzdem, wenn ein Update oder Löschen von
                Daten durch Verwendung eines anderen Interfaces durchgeführt wird, wie durch ein
                Abfragetool oder eine andere Anwendung, werden die kaskadierenden Operationen nicht
                ausgeführt. Selbst wenn die  <span class="methodname">update()</span> und
                 <span class="methodname">delete()</span> Methoden in der
                <span class="classname">Zend_Db_Adapter</span> Klasse verwendet werden, werden die
                kaskadierenden Operationen die in der eigenen <span class="classname">Zend_Db_Table</span>
                Klasse definiert wurden, nicht ausgeführt.
            </p>

            <p class="para">
                <em class="emphasis">Kein kaskadierendes <b><tt>INSERT</tt></b>.</em>
            </p>

            <p class="para">
                Es gibt keine Unterstützung für ein kaskadierendes <b><tt>INSERT</tt></b>. Man
                muß eine Zeile in eine Elterntabelle in einer Operation hinzufügen, und Zeilen zu
                einer abhängigen Tabelle in einer unabhängigen Operation hinzufügen.
            </p>
        </div>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.db.table.rowset.html">Zend_Db_Table_Rowset</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.db.html">Zend_Db</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.db.table.definition.html">Zend_Db_Table_Definition</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.db.html">Zend_Db</a></li>
  <li><a href="zend.db.adapter.html">Zend_Db_Adapter</a></li>
  <li><a href="zend.db.statement.html">Zend_Db_Statement</a></li>
  <li><a href="zend.db.profiler.html">Zend_Db_Profiler</a></li>
  <li><a href="zend.db.select.html">Zend_Db_Select</a></li>
  <li><a href="zend.db.table.html">Zend_Db_Table</a></li>
  <li><a href="zend.db.table.row.html">Zend_Db_Table_Row</a></li>
  <li><a href="zend.db.table.rowset.html">Zend_Db_Table_Rowset</a></li>
  <li class="active"><a href="zend.db.table.relationships.html">Zend_Db_Table Relationships</a></li>
  <li><a href="zend.db.table.definition.html">Zend_Db_Table_Definition</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>