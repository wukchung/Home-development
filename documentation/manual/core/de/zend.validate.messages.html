<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Pr&uuml;fungsmeldungen - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.validate.writing_validators.html">Schreiben von Pr&uuml;fern</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.validate.html">Zend_Validate</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.version.html">Zend_Version</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.validate.messages" class="section"><div class="info"><h1 class="title">Prüfungsmeldungen</h1></div>
    

    <p class="para">
        Jede Prüfung die auf <span class="classname">Zend_Validate</span> basiert, bietet im Fall einer
        fehlgeschlagen Prüfung eine oder mehrere Meldungen an. Diese Information kann verwendet
        werden um eigene Meldungen zu setzen, oder bestehende Meldungen welche eine Prüfung
        zurückgeben könnte, auf etwas anderes zu übersetzen.
    </p>

    <p class="para">
        Diese Prüfmeldungen sind Konstanten welche am Beginn jeder Prüfklasse gefunden werden
        können. Sehen wir uns für ein beschreibendes Beispiel
        <span class="classname">Zend_Validate_GreaterThan</span> an:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">protected <span style="color: #0000ff;">$_messageTemplates</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; self::<span style="color: #006600;">NOT_GREATER</span> =&gt; <span style="color: #ff0000;">&quot;'%value%' is not greater than '%min%'&quot;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Wie man siehr referenziert die Konstante <b><tt>self::NOT_GREATER</tt></b> auf den
        Fehler und wird als Schlüssel verwendet. Und die Nachricht selbst ist der Wert des
        Nachrichtenarrays.
    </p>

    <p class="para">
        Man kann alle Nachrichten Templates einer Prüfung erhalten indem man die Methode
         <span class="methodname">getMessageTemplates()</span> verwendet. Diese gibt das oben stehende array
        zurück, welches alle Nachrichten enthält die eine Prüfung im Falle einer fehlgeschlagenen
        Prüfung zurückgeben kann.
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validator</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_GreaterThan<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$messages</span>&nbsp; = <span style="color: #0000ff;">$validator</span>-&gt;<span style="color: #006600;">getMessageTemplates</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Indem die Methode  <span class="methodname">setMessage()</span> verwendet wird kann man eine andere
        Meldung definieren die im Fall des spezifizierten Fehlers zurückgegeben werden.
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validator</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_GreaterThan<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validator</span>-&gt;<span style="color: #006600;">setMessage</span><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'Bitte einen kleineren Wert angeben'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; Zend_Validate_GreaterThan::<span style="color: #006600;">NOT_GREATER</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Der zweite Parameter definiert den Fehler der überschrieben wird. Wenn man diesen Parameter
        nicht angibt, wird die angegebene Meldung für alle möglichen Fehler dieser Prüfung gesetzt.
    </p>

    <div class="section" id="zend.validate.messages.pretranslated" name="zend.validate.messages.pretranslated"><div class="info"><h1 class="title">Verwendung vor-übersetzter Prüfungsmeldungen</h1></div>
        

        <p class="para">
            Zend Framework wird mit mehr als 45 unterschiedlichen Prüfern und mehr als 200
            Fehlermeldungen ausgeliefert. Es kann eine zeitraubende Aufgabe sein alle diese
            Meldungen zu übersetzen. Aber der Bequemlichkeit halber kommt Zend Framework mit
            bereits vor-übersetzten Prüfmeldungen. Diese können im Pfad
            <var class="filename">/resources/languages</var> der eigenen Zend Framework Installation
            gefunden werden.
        </p>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Verwendeter Pfad</b><br /></span>
            

            
                Die Ressource Dateien liegen ausserhalb des Bibliothekspfads weil alle Übersetzungen
                ausserhalb dieses Pfades liegen sollten.
            <br />
        </p></blockquote>

        <p class="para">
            Um also alle Prüfmeldungen zum Beispiel auf Deutsch zu übersetzen muss man nur einen
            Übersetzer an <span class="classname">Zend_Validate</span> anhängen der diese Ressourcedateien
            verwendet.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$translator</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Translate<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'adapter'</span> =&gt; <span style="color: #ff0000;">'array'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'content'</span> =&gt; <span style="color: #ff0000;">'/resources/languages'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'locale'</span>&nbsp; =&gt; <span style="color: #0000ff;">$language</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'scan'</span>&nbsp; &nbsp; =&gt; Zend_Translate::<span style="color: #006600;">LOCALE_DIRECTORY</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Validate_Abstract::<span style="color: #006600;">setDefaultTranslator</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$translator</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Verwendeter Übersetzungsadapter</b><br /></span>
            

            
                Als Übersetzungsadapter hat Zend Framework den Array Adapter ausgewählt. Er ist
                einfach zu bearbeiten und sehr schnell erstellt.
            <br />
        </p></blockquote>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Unterstützte Sprachen</b><br /></span>
            

            
                Dieses Feature ist sehr jung, und deshalb ist die Anzahl der unterstützten Sprachen
                nicht sehr komplett. Neue Sprachen werden mit jedem Release hinzugefügt. Zusätzlich
                können die existierenden Ressourcedateien verwendet werden um eigene Übersetzungen
                durchzuführen.
            <br />

            
                Man kann diese Ressource Dateien auch verwenden um existierende Übersetzungen
                umzuschreiben. Man muss diese Dateien also nicht selbst per Hand erstellen.
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.validate.messages.limitation" name="zend.validate.messages.limitation"><div class="info"><h1 class="title">Begrenzen der Größe einer Prüfungsmeldung</h1></div>
        

        <p class="para">
            Manchmal ist es notwendig die maximale Größe die eine Prüfungsmeldung haben kann zu
            begrenzen. Zum Beispiel wenn die View nur eine maximale Größe von 100 Zeichen für die
            Darstellung auf einer Zeile erlaubt. Um die Verwendung zu vereinfachen, ist
            <span class="classname">Zend_Validate</span> dazu in der Lage die maximal zurückgegebene
            Größe einer Prüfnachricht zu begrenzen.
        </p>

        <p class="para">
            Um die aktuell gesetzte Größe zu erhalten ist
             <span class="methodname">Zend_Validate::getMessageLength()</span> zu verwenden. Wenn diese
            -1 ist, dann wird die zurückgegebene Nachricht nicht begrenzt. Das ist das
            Standardverhalten.
        </p>

        <p class="para">
            Um die Größe der zurückgegebenen Nachrichten zu begrenzen ist
             <span class="methodname">Zend_Validate::setMessageLength()</span> zu verwenden. Man kann diese
            auf jede benötigte Integer Größe setzen. Wenn die zurückzugebende Nachricht die
            gesetzte Größe überschreitet, dann wird die Nachricht abgeschnitten und der String
            &#039;<em class="emphasis">...</em>&#039; wird statt dem Rest der Nachricht hinzugefügt.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">Zend_Validate::<span style="color: #006600;">setMessageLength</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Wo wird dieser Parameter verwendet?</b><br /></span>
            

            
                Die gesetzte Länge der Nachrichten wird für alle Prüfungen verwendet, sogar für
                selbstdefinierte, solange Sie <span class="classname">Zend_Validate_Abstract</span>
                erweitern.
            <br />
        </p></blockquote>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.validate.writing_validators.html">Schreiben von Pr&uuml;fern</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.validate.html">Zend_Validate</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.version.html">Zend_Version</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.validate.html">Zend_Validate</a></li>
  <li><a href="zend.validate.introduction.html">Einf&uuml;hrung</a></li>
  <li><a href="zend.validate.set.html">Standard Pr&uuml;fklassen</a></li>
  <li><a href="zend.validate.validator_chains.html">Kettenpr&uuml;fungen</a></li>
  <li><a href="zend.validate.writing_validators.html">Schreiben von Pr&uuml;fern</a></li>
  <li class="active"><a href="zend.validate.messages.html">Pr&uuml;fungsmeldungen</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>