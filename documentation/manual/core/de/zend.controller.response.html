<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Das Response Objekt - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.controller.actionhelpers.html">Action Helfer</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.controller.html">Zend_Controller</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.controller.plugins.html">Plugins</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.controller.response" class="section"><div class="info"><h1 class="title">Das Response Objekt</h1></div>
    

    <div class="section" id="zend.controller.response.usage" name="zend.controller.response.usage"><div class="info"><h1 class="title">Verwendung</h1></div>
        

        <p class="para">
            Das Response Objekt ist das logische Gegenstück zum <a href="zend.controller.request.html" class="link">Request Objekt</a>. Sein Zweck ist es,
            Inhalte und / oder Header zu vereinigen, um sie in einem Rutsch zu versenden.
            Zusätzlich übergibt der Front Controller alle aufgefangenen Ausnahmen an das Response
            Objekt, um dem Entwickler das Verarbeiten von Ausnahmen zu ermöglichen. Dies
            Funktionalität kann durch Setzen von
             <span class="methodname">Zend_Controller_Front::throwExceptions(true)</span> überschrieben
            werden.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">throwExceptions</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Um die Ausgabe der Response, inklusiver der gesetzten Header, zu senden, verwendet man
             <span class="methodname">sendResponse()</span>:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">sendResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <blockquote><p><b class="note">Note</b>: 
            
                Standardmäßig ruft der Front Controller  <span class="methodname">sendResponse()</span> auf
                wenn er die Anfrage fertig bearbeitet hat; typischerweise wird es nie notwendig
                sein Ihn aufzurufen. Wenn man trotzdem die Antwort manipulieren will oder Sie beim
                Testen verwenden will, kann dieses Verhalten durch das Setzen des
                <span class="property">returnResponse</span> Flags mit
                 <span class="methodname">Zend_Controller_Front::returnResponse(true)</span> geändert
                werden:
            <br />

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">returnResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span> = <span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">dispatch</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ein bischen mehr verarbeiten, wie z.B. loggen...</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// und dann die Ausgabe senden:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">sendResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </p></blockquote>

        <p class="para">
            Entwickler sollten das Response Objekt in ihren Aktionscontrollern verwenden. Statt
            die Ausgabe direkt zu machen und Header zu versenden, sollten diese an des Response
            Objekt übergeben werden:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Innerhalb einer Controller Aktion:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Setze einen Header</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">getResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; -&gt;<span style="color: #006600;">setHeader</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Content-Type'</span>, <span style="color: #ff0000;">'text/html'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; -&gt;<span style="color: #006600;">appendBody</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$content</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Dadurch werden alle Header in einem Rutsch versendet, genau vor der Anzeige des Inhalts.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                Wenn die <a href="zend.controller.action.html#zend.controller.action.viewintegration" class="link">View
                    Integration</a> des Aktion Controllers verwendet wird muß der bearbeitete
                Inhalt des View Skripts im Antwort Objekt nicht gesetzt werden, da die
                 <span class="methodname">Zend_Controller_Action::render()</span> das standardmäßig macht.
            <br />
        </p></blockquote>

        <p class="para">
            Sollte in der Anwendung eine Ausnahme auftreten, überprüft man den
             <span class="methodname">isException()</span> Schalter des Response Objektes und erhält die
            Ausnahme durch Verwendung von  <span class="methodname">getException()</span>. Zusätzlich kann
            man ein eigenes Response Objekt erstellen, dass zu einer Fehlerseite umleitet, die
            Nachricht der Ausnahme loggt, die Nachricht der Ausnahme schön formatiert ausgibt (für
            Entwicklungsumgebungen), usw.
        </p>

        <p class="para">
            Man kann das Response Objekt im Anschluß an die  <span class="methodname">dispatch()</span>
            Methode des Front Controllers erhalten oder den Front Controller auffordern, dass
            Response Objekt zurückzugeben statt den Inhalt auszugeben.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Erhalten nach dem Dispatch:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">dispatch</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span> = <span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">getResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">isException</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// log, mail, etc...</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Oder den Front Controller dispatch Prozess auffordern, es zurück zu geben</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">returnResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span> = <span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">dispatch</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// mach irgend was...</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// zum Schluß, gib die Antwort aus</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">sendResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Standardmäßig werden Ausnahmennachrichten nicht ausgegeben. Dieses Verhalten kann durch
            den Aufruf von  <span class="methodname">renderException()</span> überschrieben werden oder
            indem der Front Controller aufgefordert wird, die Exceptions durch
             <span class="methodname">throwExceptions()</span> auszuwerfen, wie oben gezeigt:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">renderExceptions</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">dispatch</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$request</span>, <span style="color: #0000ff;">$response</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// oder:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">returnResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span> = <span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">dispatch</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">renderExceptions</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">sendResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// oder:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">throwExceptions</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$front</span>-&gt;<span style="color: #006600;">dispatch</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.controller.response.headers" name="zend.controller.response.headers"><div class="info"><h1 class="title">Header manipulieren</h1></div>
        

        <p class="para">
            Wie vorher besprochen, ist einer der Aspekte der Antwort Objekt Aufgaben das Sammeln und
            Abschicken der <acronym class="acronym">HTTP</acronym> Antwort Header. Eine Vielzahl von Methoden
            existieren hierfür:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                     <span class="methodname">canSendHeaders()</span> wird verwendet um zu ermitteln ob
                    bereits Header gesendet wurden. Sie nimmt ein zusätzliches Flag das zeigt ob
                    eine Ausnahme geworfen werden soll oder nicht, wenn bereits Header gesendet
                    wurden. Das kann durch das Setzen der Eigenschaft
                    <span class="property">headersSentThrowsException</span> zu <b><tt>FALSE</tt></b>
                    überschrieben werden.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">setHeader($name, $value, $replace = false)</span> wird
                    verwendet um einen individuellen Header zu setzen. Standardmäßig, ersetzt das
                    keinen bereits existierenden gleichnamigen Header im Objekt; Trotzdem wird das
                    Setzen von <var class="varname">$replace</var> zu <b><tt>TRUE</tt></b> es forcieren
                    das zu tun.
                </p>

                <p class="para">
                    Bevor der Header setzt wird, prüft er mit
                     <span class="methodname">canSendHeaders()</span> um zu sehen ob diese Operation zu
                    diesem Zeitpunkt erlaubt ist, und erzwingt das eine Ausnahme geworfen wird.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">setRedirect($url, $code = 302)</span> setzt einen
                    <acronym class="acronym">HTTP</acronym> Location Header für eine Umleitung. Wenn ein
                    <acronym class="acronym">HTTP</acronym> Status Code angegeben wurde, wird dieser Status Code
                    verwendet.
                </p>

                <p class="para">
                    Intern wird  <span class="methodname">setHeader()</span> mit dem
                    <var class="varname">$replace</var> Flag aufgerufen um sicherzustellen das nur ein
                    solcher Header jemals gesendet wird.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getHeaders()</span> gibt ein Array aller Header zurück. Jedes
                    Array Element ist ein Array mit den Schlüsseln &#039;name&#039; und &#039;value&#039;.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">clearHeaders()</span> löscht alle registrierten Headern.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">setRawHeader()</span> kann verwendet werden um Header zu
                    setzen die keine Schlüssel und Werte Paare sind, wie einen
                    <acronym class="acronym">HTTP</acronym> Status Header.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getRawHeaders()</span> gibt jeden registrierten rohen Header
                    zurück.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">clearRawHeaders()</span> löscht jeden registrierten rohen
                    Header.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">clearAllHeaders()</span> löscht beide, reguläre
                    Schlüssel und Werte Header genauso wie rohe Header.
                </p>
            </li>
        </ul>

        <p class="para">
            Zusätzlich zu den obigen Methoden, gint es Accessors für das Setzen und Empfangen der
            <acronym class="acronym">HTTP</acronym> Antwort Codes für die aktuellen Anfrage,
             <span class="methodname">setHttpResponseCode()</span> und
             <span class="methodname">getHttpResponseCode()</span>.
        </p>
    </div>

    <div class="section" id="zend.controller.response.namedsegments" name="zend.controller.response.namedsegments"><div class="info"><h1 class="title">Benannte Segmente</h1></div>
        

        <p class="para">
            Das Antwort Objekt unterstützt &quot;benannte Segmente&quot;. Das erlaubt es den Inhalt des Bodys
            in verschiedene Segmente zu isolieren und diese Segmente zu reihen damit die Ausgabe in
            einer spezifizierten Reihenfolge zurückgegeben wird. Intern wird der Inhalt der Bodys in
            einem Array gespeichert und die verschiedenen Accessor Methoden können verwendet werden
            um die Plazierung und Benamung innerhalb des Arrays zu indizieren.
        </p>

        <p class="para">
            Als Beispiel könnte ein  <span class="methodname">preDispatch()</span> Hook verwendet werden um
            dem Antwort Objekt einen Header hinzuzufügen, dann den Aktion Controller einen Inhalt
            des Bodys hinzufügen zu lassen und einen  <span class="methodname">postDispatch()</span> Hook
            einen Footer hinzufügen zu lassen:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Angenommen diese Plugin Klasse ist im Front Controller registriert</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> MyPlugin <span style="color: #000000; font-weight: bold;">extends</span> Zend_Controller_Plugin_Abstract</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> preDispatch<span style="color: #66cc66;">&#40;</span>Zend_Controller_Request_Abstract <span style="color: #0000ff;">$request</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$response</span> = <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">getResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$view</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_View<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$view</span>-&gt;<span style="color: #006600;">setBasePath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'../views/scripts'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">prepend</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'header'</span>, <span style="color: #0000ff;">$view</span>-&gt;<span style="color: #006600;">render</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'header.phtml'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> postDispatch<span style="color: #66cc66;">&#40;</span>Zend_Controller_Request_Abstract <span style="color: #0000ff;">$request</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$response</span> = <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">getResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$view</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_View<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$view</span>-&gt;<span style="color: #006600;">setBasePath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'../views/scripts'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">append</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'footer'</span>, <span style="color: #0000ff;">$view</span>-&gt;<span style="color: #006600;">render</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'footer.phtml'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Ein Beispiel Aktion Controller</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #000000; font-weight: bold;">class</span> MyController <span style="color: #000000; font-weight: bold;">extends</span> Zend_Controller_Action</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> fooAction<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">render</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
            Im obigen Beispiel wird ein Aufruf zu <var class="filename">/my/foo</var> den endgültigen
            Inhalt des Bodys des Antwort Objekts mit der folgenden Struktur verursachen:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'header'</span>&nbsp; =&gt; ..., <span style="color: #808080; font-style: italic;">// Header Inhalt</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'default'</span> =&gt; ..., <span style="color: #808080; font-style: italic;">// Body Inhalt von MyController::fooAction()</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'footer'</span>&nbsp; =&gt; ...&nbsp; <span style="color: #808080; font-style: italic;">// Footer Inhalt</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Wenn das gerendert wird, wird es in der Reihenfolge gerendert in dem die Elements im
            Array angeordnet sind.
        </p>

        <p class="para">
            Eine Vielzahl von Methoden kann verwendet werden um die benannten Segmente zu
            manipulieren:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                     <span class="methodname">setBody()</span> und  <span class="methodname">appendBody()</span>
                    erlauben das ein zweiter Wert, <var class="varname">$name</var>, übergeben wird der ein
                    benanntes Segment indiziert. In jedem Fall wird, wenn das übergeben wird, das
                    spezifizierte benannte Segment überschrieben oder es wird erstellt wenn es
                    nicht existiert (standardmäßig dem Array hinzugefügt). Wenn kein benanntes
                    Segment an  <span class="methodname">setBody()</span> übergeben wird, setzt es den
                    kompletten Inhalt des Body Arrays zurück. Wenn kein benanntes Segment an
                     <span class="methodname">appendBody()</span> übergeben wird, wird der Inhalt dem Wert
                    im &#039;default&#039; benannten Segment hinzugefügt.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">prepend($name, $content)</span> erstellt ein
                    <var class="varname">$name</var> benanntes Segment und plaziert dieses ab Beginn des
                    Arrays. Wenn das Segment bereits existiert, wird es vor der Operation entfernt
                    (bzw, überschrieben und getauscht).
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">append($name, $content)</span> erstellt ein
                    <var class="varname">$name</var> benanntes Segment und plaziert es am Ende des Arrays.
                    Wenn das Segment bereits existiert, wird es vor der Operation entfernt (bzw,
                    überschrieben und getauscht).
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">insert($name, $content, $parent = null, $before =
                        false)</span> erstellt ein <var class="varname">$name</var> benanntes
                    Segment. Wenn ein <var class="varname">$parent</var> Segment angegeben wurde, wird das
                    neue Segment entweder vor oder nach diesem Segment im Array plaziert (basierend
                    auf dem Wert von <var class="varname">$before</var>). Wenn das Segment bereits
                    existiert, wird es vor der Operation entfernt (bzw, überschrieben und
                    getauscht).
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">clearBody($name = null)</span> entfernt ein einzelnes
                    benanntes Segment wenn ein <var class="varname">$name</var> angegeben wurde
                    (andernfalls das komplette Array).
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getBody($spec = false)</span> kann verwendet werden um ein
                    einzelnes Array Segment zu erhalten wenn <var class="varname">$spec</var> der Name des
                    benannten Segments ist. Wenn <var class="varname">$spec</var> <b><tt>FALSE</tt></b>
                    ist, gibt es einen String zurück der erstellt wird durch zusammenfügen aller
                    benannten Segmente in Ihrer Reihenfolge. Wenn <var class="varname">$spec</var>
                    <b><tt>TRUE</tt></b> ist, gibt er das Array des Body Inhalts zurück.
                </p>
            </li>
        </ul>
    </div>

    <div class="section" id="zend.controller.response.exceptions" name="zend.controller.response.exceptions"><div class="info"><h1 class="title">Auf Ausnahmen im Antwort Objekt testen</h1></div>
        

        <p class="para">
            Wie vorher beschrieben werden Ausnahmen standardmäßig wärend des Dispatchens gefangen
            und im Antwort Objekt registriert. Ausnahmen werden in einem Stack registriert, der es
            erlaubt alle Ausnahmen geworfen zu lassen -- Anwendungs Ausnahmen, Dispatch Ausnahmen,
            Plugin Ausnahmen, usw. Wenn man auf bestimmte Ausnahmen prüfen will oder Ausnahmen
            loggen will, muß man die Ausnahme <acronym class="acronym">API</acronym> des Antwort Objekts verwenden:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                     <span class="methodname">setException(Exception $e)</span> erlaubt es eine Ausnahme zu
                    registrieren.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">isException()</span> sagt ob eine Ausnahme bereits
                    registriert wurde.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getException()</span> gibt den kompletten Ausnahme Stack
                    zurück.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">hasExceptionOfType($type)</span> erlaub es festzustellen ob
                    eine Ausnahme einer speziellen Klasse im Stack vorhanden ist.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">hasExceptionOfMessage($message)</span> erlaubt es
                    festzustellen ob eine Ausnahme mit einer speziellen Nachricht im Stack
                    vorhanden ist.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">hasExceptionOfCode($code)</span> erlaubt es festzustellen ob
                    eine Ausnahme mit einem bestimmten Code im Stack vorhanden ist.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getExceptionByType($type)</span> erlaubt es alle Ausnahmen
                    einer speziellen Klasse vom Stack zu erhalten. <b><tt>FALSE</tt></b> wird
                    zurückgegeben wenn keine gefunden wurden, und andernfalls ein Array mit
                    Ausnahmen.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getExceptionByMessage($message)</span> erlaubt es alle
                    Ausnahmen mit einer speziellen Nachricht vom Stack zu erhalten.
                    <b><tt>FALSE</tt></b> wird zurückgegeben wenn keine gefunden wurden, und
                    andernfalls ein Array mit Ausnahmen.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">getExceptionByCode($code)</span> erlaubt es alle Ausnahmen
                    mit einem speziellen Code vom Stack zu erhalten. <b><tt>FALSE</tt></b> wird
                    zurückgegeben wenn keine gefunden wurden, und andernfalls ein Array mit
                    Ausnahmen.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                     <span class="methodname">renderExceptions($flag)</span> erlaubt es ein Flag zu setzen
                    das anzeigt ob die Ausnahmen ausgegeben werden sollen wenn die Antwort gesendet
                    wurde, oder nicht.
                </p>
            </li>
        </ul>
    </div>

    <div class="section" id="zend.controller.response.subclassing" name="zend.controller.response.subclassing"><div class="info"><h1 class="title">Erben vom Antwort Objekt</h1></div>
        

        <p class="para">
            Der Zweck des Antwort Objekts ist es Header und Inhalte von den verschiedenen Aktionen
            und Plugins zu sammeln und diese an den Client zurückzugeben; zweitens sammelt es in der
            Reihenfolge Ihres auftretens alle Fehler (Ausnahmen), und gibt diese zurück, oder
            versteckt Sie vor dem Endbenutzer.
        </p>

        <p class="para">
            Die Basis Antwort Klasse ist <span class="classname">Zend_Controller_Response_Abstract</span>,
            und jede erbende Klasse die erstellt wird sollte von dieser Klasse oder eine Ihrer
            Derivate erben. Die verschiedenen vorhandenen Methoden wurden in der vorhergehenden
            Sektion aufgezählt.
        </p>

        <p class="para">
            Gründe um vom Antwort Objekt eine Subklasse zu erstellen beinhalten das Ändern wie eine
            Ausgabe zurückgegeben wird, basierend auf der Antwortumgebung (z.B., keine Header senden
            für <acronym class="acronym">CLI</acronym> oder <acronym class="acronym">PHP</acronym>-<acronym class="acronym">GTK</acronym> Anfragen),
            zusätzliche Funktionalitäten um eine endgültige Ansicht zurückzugeben, basierend am
            Inhalt der in den benannten Segmenten gespeichert wurde, usw.
        </p>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.controller.actionhelpers.html">Action Helfer</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.controller.html">Zend_Controller</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.controller.plugins.html">Plugins</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.controller.html">Zend_Controller</a></li>
  <li><a href="zend.controller.quickstart.html">Zend_Controller Schnellstart</a></li>
  <li><a href="zend.controller.basics.html">Zend_Controller Grundlagen</a></li>
  <li><a href="zend.controller.front.html">Der Front Controller</a></li>
  <li><a href="zend.controller.request.html">Das Request Objekt</a></li>
  <li><a href="zend.controller.router.html">Der Standard Router</a></li>
  <li><a href="zend.controller.dispatcher.html">Der Dispatcher</a></li>
  <li><a href="zend.controller.action.html">Action Controller</a></li>
  <li><a href="zend.controller.actionhelpers.html">Action Helfer</a></li>
  <li class="active"><a href="zend.controller.response.html">Das Response Objekt</a></li>
  <li><a href="zend.controller.plugins.html">Plugins</a></li>
  <li><a href="zend.controller.modular.html">Eine konventionelle modulare Verzeichnis Struktur verwenden</a></li>
  <li><a href="zend.controller.exceptions.html">MVC Ausnahmen</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>