<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_Dojo_Data: dojo.data Envelopes - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.dojo.introduction.html">Einf&uuml;hrung</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.dojo.html">Zend_Dojo</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.dojo.view.html">Dojo View Helfer</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.dojo.data" class="section"><div class="info"><h1 class="title">Zend_Dojo_Data: dojo.data Envelopes</h1></div>
    

    <p class="para">
        Dojo bietet Datenabstraktionen für daten-aktivierte Widgets über seine
        <strong class="command">dojo.data</strong> Komponente. Diese Komponente bietet die Möglichkeit einen
        Datenspeicher hinzuzufügen, einige Metadaten betreffend dem Identifikatorfeld zu liefern und
        optional ein Labelfeld, und eine <acronym class="acronym">API</acronym> für das Abfragen, Sortieren und
        Empfangen von Einträgen und Sets von Einträgen von der Datenquelle.
    </p>

    <p class="para">
        <strong class="command">dojo.data</strong> wird oft mit XmlHttpRequest verwendet um dynamisch Daten vom
        Server zu holen. Der primäre Mechanismus hierfür ist die Erweiterung von QueryReadStore um
        auf eine <acronym class="acronym">URL</acronym> zu zeigen und die Anfrageinformation zu spezifizieren. Die
        Serverseite gibt dann Daten im folgenden <acronym class="acronym">JSON</acronym> Format zurück:
    </p>

    <div class="programlisting javascript"><div class="javascriptcode"><div class="javascript" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; identifier: <span style="color: #3366CC;">'&lt;name&gt;'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &lt;label: <span style="color: #3366CC;">'&lt;label&gt;'</span>,&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; items: <span style="color: #66cc66;">&#91;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span> <span style="color: #000066;">name</span>: <span style="color: #3366CC;">'...'</span>, label: <span style="color: #3366CC;">'...'</span>, someKey: <span style="color: #3366CC;">'...'</span> <span style="color: #66cc66;">&#125;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; ...</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#93;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


    <p class="para">
        <span class="classname">Zend_Dojo_Data</span> bietet ein einfaches Interface für das
        programmtechnische erstellen solcher Strukturen, der Interaktion mit Ihnen, und deren
        Serialisierung in ein Array oder <acronym class="acronym">JSON</acronym>.
    </p>

    <div class="section" id="zend.dojo.data.usage" name="zend.dojo.data.usage"><div class="info"><h1 class="title">Verwendung von Zend_Dojo_Data</h1></div>
        

        <p class="para">
            In seiner einfachsten Form, verlangt <strong class="command">dojo.data</strong> dass der Name des
            Identifikatorfelds in jedem Element angegeben wird, und ein Set von Elementen (Daten).
            Man kann diese entweder über den Konstruktor übergeben, oder über Mutatoren:
        </p>

        <div class="example"><div class="info"><p><b>Example #1 Initialisierung von Zend_Dojo_Data über den Konstruktor</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Dojo_Data<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'id'</span>, <span style="color: #0000ff;">$items</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <div class="example"><div class="info"><p><b>Example #2 Initialisierung von Zend_Dojo_Data über Mutatoren</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Dojo_Data<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">setIdentifier</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'id'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addItems</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$items</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Man kann jederzeit ein einzelnes Element hinzufügen, oder Elemente anfügen, indem
             <span class="methodname">addItem()</span> und  <span class="methodname">addItems()</span> verwendet
            wird.
        </p>

        <div class="example"><div class="info"><p><b>Example #3 Hinzufügen von Daten bei Zend_Dojo_Data</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Dojo_Data<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$identifier</span>, <span style="color: #0000ff;">$items</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">addItem</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$someItem</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">addItems</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$someMoreItems</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Immer einen Identifikator verwenden!</b><br /></span>
            

            
                Für jeden <strong class="command">dojo.data</strong> Datenspeicher muß die Identifikatorspalte
                als Metadaten angegeben werden, inklusive <span class="classname">Zend_Dojo_Data</span>.
                Fakt ist das, wenn man versucht Elemente ohne Identifikator hinzuzufügen, eine
                Ausnahme geworfen wird.
            <br />
        </p></blockquote>

        <p class="para">
            Individuelle Elemente können die folgenden sein:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    Assoziative Arrays
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    Objekte die eine  <span class="methodname">toArray()</span> Methode implementieren
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    Jedes andere Objekt (wird über  <span class="methodname">get_object_vars()</span>
                    serialisiert)
                </p>
            </li>
        </ul>

        <p class="para">
            Man kann Kollektionen der obigen Elemente über  <span class="methodname">addItems()</span> oder
             <span class="methodname">setItems()</span> hinzufügen (überschreibt alle vorher gesetzte
            Elemente); wenn das getan wird, kann man ein einzelnes Argument setzen:
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    Arrays
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    Objekte die das <span class="classname">Traversable</span> implementieren, welches die
                    Interfaces <span class="classname">Iterator</span> und
                    <span class="classname">ArrayAccess</span> enthält.
                </p>
            </li>
        </ul>

        <p class="para">
            Wenn man ein Feld spezifizieren will das als Label für das Element agieren soll, kann
             <span class="methodname">setLabel()</span> aufgerufen werden:
        </p>

        <div class="example"><div class="info"><p><b>Example #4 Spezifizierung eines Labelfeldes in Zend_Dojo_Data</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">setLabel</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'name'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            Letztendlich kann man auch ein <span class="classname">Zend_Dojo_Data</span> Element von einem
            <strong class="command">dojo.data</strong> <acronym class="acronym">JSON</acronym> Array geladen werden, indem die
             <span class="methodname">fromJson()</span> Methode verwendet wird.
        </p>

        <div class="example"><div class="info"><p><b>Example #5 Zend_Dojo_Data von JSON aus bekanntgeben</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">fromJson</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$json</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.dojo.data.metadata" name="zend.dojo.data.metadata"><div class="info"><h1 class="title">Den Containern Metadaten hinzufügen</h1></div>
        

        <p class="para">
            Einige Dojo Komponenten benötigen zusätzliche Metadaten zusammen mit dem
            <strong class="command">dojo.data</strong> Payload zurückgegeben werden. Als Beispiel kann
            <strong class="command">dojox.grid.Grid</strong> Daten dynamisch von einem
            <strong class="command">dojox.data.QueryReadStore</strong> herausziehen. Damit die
            Seitenweise Darstellung richtig funktioniert, sollte jeder zurückgegebene
            Payload einen <span class="property">numRows</span> Schlüssel mit der kompletten Anzahl
            an Zeilen enthalten, die von der Abfrage zurückgegeben wird. Mit diesen Daten
            weiß der Grid (a) wann er weitere kleine Anfragen an den Server
            abschicken muß für Subsets von Daten, und (b) wann er aufhören soll
            weitere Anfragen zu erstellen (z.B., wenn er die letzte Seite der Daten
            erreicht hat). Diese Technik ist nützlich wenn große Sets an Daten im
            Grid geliefert werden sollen, ohne das man das komplette Set auf einmal
            laden muß.
        </p>

        <p class="para">
            <span class="classname">Zend_Dojo_Data</span> erlaubt die Zuordnung von Metadaten Eigenschaften
            zum Objekt. Das folgende zeigt die Verwendung:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Setzt &quot;numRows&quot; auf 100</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">setMetadata</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'numRows'</span>, <span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Setzt verschiedene Items auf einmal:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">setMetadata</span><span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'numRows'</span> =&gt; <span style="color: #cc66cc;">100</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'sort'</span>&nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'name'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Zeigt einen einzelnen Metadaten Wert:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$numRows</span> = <span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">getMetadata</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'numRows'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Zeigt alle Metadaten:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$metadata</span> = <span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">getMetadata</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Entfernt ein Metadaten Item:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">clearMetadata</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'numRows'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Entfernt alle Metadaten:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">clearMetadata</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.dojo.data.advanced" name="zend.dojo.data.advanced"><div class="info"><h1 class="title">Gehobenere Verwendungsfälle</h1></div>
        

        <p class="para">
            Neben der Funktion als serialisierbarer Datenkontainer bietet
            <span class="classname">Zend_Dojo_Data</span> auch die Möglichkeit Daten auf verschiedenen Wegen
            zu manipulieren und zu durchlaufen.
        </p>

        <p class="para">
            <span class="classname">Zend_Dojo_Data</span> implementiert die Interfaces
            <strong class="command">ArrayAccess</strong>, <strong class="command">Iterator</strong> und
            <strong class="command">Countable</strong>. Deshalb kann man die Datenkollektion genauso verwenden
            kann wie wenn Sie ein Array wäre.
        </p>

        <p class="para">
            Alle Elemente werden durch das Identifikatorfeld referenziert. Da Identifikatoren
            eindeutig sein müssen, können die Werte dieses Feldes verwendet werden um individuelle
            Einträge zu holen. Es gibt zwei Wege um das zu tun: mit der
             <span class="methodname">getItem()</span> Methode, oder über die Array Schreibweise.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Verwenden von getItem():</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$item</span> = <span style="color: #0000ff;">$data</span>-&gt;<span style="color: #006600;">getItem</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Oder verwenden der Array Schreibweise:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$item</span> = <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#93;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Wenn man den Identifikator kennt, kann man Ihn verwende um ein Element zu erhalten, es
            upzudaten, es zu löschen, es zu erstellen oder es zu testen:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Updaten oder Erstellen eines Elements:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#93;</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'title'</span> =&gt; <span style="color: #ff0000;">'Foo'</span>, <span style="color: #ff0000;">'email'</span> =&gt; <span style="color: #ff0000;">'foo@foo.com'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Löschen eines Elements:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/unset"><span style="color: #000066;">unset</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'foo'</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Testen eines Elements:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/isset"><span style="color: #000066;">isset</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#91;</span>foo<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
            Man kann genauso über alle Elemente iterieren. Intern werden alle Elemente als Arrays
            gespeichert.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$data</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$item</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$item</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'title'</span><span style="color: #66cc66;">&#93;</span> . <span style="color: #ff0000;">': '</span> . <span style="color: #0000ff;">$item</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'description'</span><span style="color: #66cc66;">&#93;</span> . <span style="color: #ff0000;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


        <p class="para">
            Oder Sie sogar zählen um zu sehen wie viele Elemente man hat:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <a href="http://www.php.net/count"><span style="color: #000066;">count</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #ff0000;">&quot; Elemente gefunden!&quot;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Letztendlich kann man, da die Klasse  <span class="methodname">__toString()</span>
            implementiert, Sie auch zu <acronym class="acronym">JSON</acronym> casten indem man Sie einfach ausgibt,
            oder Sie zu einem String castet:
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$data</span>; <span style="color: #808080; font-style: italic;">// Ausgabe als JSON String</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$json</span> = <span style="color: #66cc66;">&#40;</span>string<span style="color: #66cc66;">&#41;</span> <span style="color: #0000ff;">$data</span>; <span style="color: #808080; font-style: italic;">// Casten zu einem String == casten zu JSON</span></div></li></ol></div></div></div>


        <div class="section" id="zend.dojo.data.advanced.methods" name="zend.dojo.data.advanced.methods"><div class="info"><h1 class="title">Vorhandene Methoden</h1></div>
            

            <p class="para">
                Neben den Methoden die notwendig sind um die oben beschriebenen Interfaces zu
                implementieren sind die folgenden Methoden vorhanden.
            </p>

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                         <span class="methodname">setItems($items)</span>: Setzt mehrere Elemente auf
                        einmal, und überschreibt alle vorher im Objekt gesetzten.
                        <var class="varname">$items</var> sollte ein Array oder ein
                        <strong class="command">Traversable</strong> Objekt sein.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">setItem($item, $id = null)</span>: Setzt ein
                        individuelles Element, indem optional ein expliziter Identifikator
                        übergeben wird. Überschreibt das Element wenn es bereits in der Kollektion
                        ist. Gültige Elemente enthalten assoziative Arrays, Objekte die
                         <span class="methodname">toArray()</span> implementieren, oder jedes Objekt mit
                        öffentlichen Eigenschaften.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">addItem($item, $id = null)</span>: Fügt ein individuelles
                        Element hinzu, indem optional ein expliziter Identifikator übergeben wird.
                        Wirft eine Ausnahme wenn das Element bereits in der Kollektion existiert.
                        Gültige Elemente enthalten assoziative Arrays, Objekte die
                         <span class="methodname">toArray()</span> implementieren, oder jedes Objekt mit
                        öffentlichen Eigenschaften.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">addItems($items)</span>: Fügt mehrere Elemente auf einmal
                        hinzu, indem Sie allen aktuellen Elementen angefügt werden. Wirft eine
                        Ausnahme wenn irgendeines der neuen Elemente einen Identifikator hat der zu
                        einem bereits in der Kollektion vorhandenen Identifikator passt.
                        <var class="varname">$items</var> sollte ein Array oder ein
                        <strong class="command">Traversable</strong> Objekt sein.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">getItems()</span>: Gibt alle Elemente als Array von
                        Arrays zurück.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">hasItem($id)</span>: Erkennt ob ein Element mit dem
                        angegebenen Identifikator in der Kollektion existiert oder nicht.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">getItem($id)</span>: Gibt ein Element mit dem angegebenen
                        Identifikator von der Kollektion zurück; das zurückgegebene Element ist ein
                        assoziatives Array. Wenn kein Element passt, wird ein
                        <b><tt>NULL</tt></b> Wert zurückgegeben.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">removeItem($id)</span>: Entfernt ein Element mit dem
                        angegebenen Identifikator von der Kollektion.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">clearItems()</span>: Entfernt alle Elemente von der
                        Kollektion.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">setIdentifier($identifier)</span>: Setzt den Namen des
                        Feldes das den eindeutigen Identifikator repräsentiert für jedes Element
                        in der Kollektion.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">getIdentifier()</span>: Gibt den Namen des
                        Identifikatorfeldes zurück.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">setLabel($label)</span>: Setzt den Namen eines Feldes
                        das als Anzeigelabel für ein Element verwendet wird.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">getLabel()</span>: Gibt den Namen des Labelfeldes zurück.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">toArray()</span>: Castet das Objekt zu einem Array. Das
                        Array enthält mindestens die Schlüssel &#039;identifier&#039; und &#039;items&#039;, und den
                        Schlüssel &#039;label&#039; wenn ein Labelfeld im Objekt gesetzt wurde.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                         <span class="methodname">toJson()</span>: Castet das Objekt zu einer
                        <acronym class="acronym">JSON</acronym> Repräsentation.
                    </p>
                </li>
            </ul>
        </div>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.dojo.introduction.html">Einf&uuml;hrung</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.dojo.html">Zend_Dojo</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.dojo.view.html">Dojo View Helfer</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.dojo.html">Zend_Dojo</a></li>
  <li><a href="zend.dojo.introduction.html">Einf&uuml;hrung</a></li>
  <li class="active"><a href="zend.dojo.data.html">Zend_Dojo_Data: dojo.data Envelopes</a></li>
  <li><a href="zend.dojo.view.html">Dojo View Helfer</a></li>
  <li><a href="zend.dojo.form.html">Formular Elemente und Dekoratore f&uuml;r Dojo</a></li>
  <li><a href="zend.dojo.build-layers.html">Support f&uuml;r den Build Layer von Zend_Dojo</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>